import{a as h,t as v}from"./disclose-version.wcsHG7oF.js";import{p as P,c as r,s as d,f as Q,r as t,b as e,t as p,e as S,a as U}from"./runtime.D6lgFUio.js";import{s as i}from"./render.CIW-w3Th.js";import{i as E}from"./if.lkQ-IRrr.js";import{e as I,i as N}from"./each.CWrzZiCN.js";import{s as V}from"./attributes.BFGPVQjG.js";import{p as W}from"./props.C7PlKWmz.js";import{f as R}from"./index.UdVxqQke.js";var X=v('<span class="chip variant-ghost"> </span>'),Y=v('<span class="chip variant-ghost"> </span>'),Z=v('<tr><td role="gridcell"></td><td role="gridcell"></td><td role="gridcell"></td><td role="gridcell"><span class="chip variant-filled"> </span></td><td role="gridcell"><!></td><td role="gridcell"><!></td><td role="gridcell"></td><td role="gridcell"></td></tr>'),$=v('<tr><td role="gridcell"> </td><td role="gridcell"> </td><td role="gridcell"> </td><td role="gridcell"></td><td role="gridcell"></td><td role="gridcell"></td><td role="gridcell"></td><td role="gridcell"><a class="underline">edit</a></td></tr> <!>',1),tt=v('<div class="card m-2 overflow-x-auto"><table class="table p-0 table-compact"><thead class="table-head"><tr><th role="columnheader">#</th><th role="columnheader">Title</th><th role="columnheader">Notes</th><th role="columnheader">Account</th><th role="columnheader">Debit</th><th role="columnheader">Credit</th><th role="columnheader">Attachments</th><th role="columnheader">Actions</th></tr></thead><tbody class="table-body p-0 overflow-y-scroll w-full max-h-screen"></tbody></table></div>');function ct(m,l){P(l,!0);let a=W(l,"lineData",19,()=>[]);console.log("@lines",a());var o=tt(),D=r(o),T=d(r(D));I(T,21,a,N,(q,c)=>{var k=$(),_=Q(k),f=r(_),B=r(f);t(f);var u=d(f),F=r(u);t(u);var g=d(u),G=r(g);t(g);var C=d(g,5),H=r(C);t(C),t(_);var J=d(_,2);I(J,17,()=>e(c).lines,N,(K,n)=>{var b=Z(),x=d(r(b),3),j=r(x),L=r(j);t(j),t(x);var y=d(x),M=r(y);E(M,()=>e(n).credit_amount,w=>{var s=X(),A=r(s);p(()=>i(A,R(e(n).credit_amount))),t(s),h(w,s)}),t(y);var z=d(y),O=r(z);E(O,()=>e(n).debit_amount,w=>{var s=Y(),A=r(s);p(()=>i(A,R(e(n).debit_amount))),t(s),h(w,s)}),t(z),S(2),t(b),p(()=>i(L,l.accountsIndex[e(n).account_id]||"")),h(K,b)}),p(()=>{i(B,e(c).txn.id),i(F,e(c).txn.title),i(G,e(c).txn.notes),V(H,"href",`/z/pages/portal/projects/books/${l.pid}/txn/edit?tid=${e(c).txn.id}`)}),h(q,k)}),t(T),t(D),t(o),h(m,o),U()}const nt=m=>{let l={};return m.lines.forEach(a=>{let o=l[a.txn_id];o||(o=[],l[a.txn_id]=o),o.push(a)}),m.transactions.map(a=>({lines:l[a.id]||[],txn:a}))};export{ct as T,nt as f};
