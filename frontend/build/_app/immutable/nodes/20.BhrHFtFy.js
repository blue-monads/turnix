import{s as ve,e as v,a as S,c as y,b as $,v as ye,g as j,f as b,m as w,i as P,h as _,k as ie,C as Te,r as $e,w as ce,q as Ee,n as pe,t as K,d as Q,x as W,D as De,j as X,A as we}from"../chunks/scheduler.D2OtNeTK.js";import{S as ze,i as Ne,a as z,d as Z,t as E,g as x,c as U,b as M,m as R,e as V}from"../chunks/index.DD9KLV65.js";import{e as fe}from"../chunks/each.D6YF6ztN.js";import{S as Ae}from"../chunks/SvgIcon.DW0uSnC-.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.B6Y8wNrO.js";import{L as Be}from"../chunks/loader.zv9XVPa1.js";import{F as Ce,a as Le}from"../chunks/Folder.BLnQB3_F.js";import{p as Se}from"../chunks/stores.D0bQ952I.js";import{p as je}from"../chunks/index.BURjlDwe.js";import{g as ue}from"../chunks/entry.C8cUSds7.js";function _e(l,e,r){const t=l.slice();return t[13]=e[r],t[15]=r,t}function Fe(l){let e,r,t=fe(l[0]),o=[];for(let n=0;n<t.length;n+=1)o[n]=me(_e(l,t,n));const c=n=>z(o[n],1,1,()=>{o[n]=null});return{c(){for(let n=0;n<o.length;n+=1)o[n].c();e=ce()},l(n){for(let a=0;a<o.length;a+=1)o[a].l(n);e=ce()},m(n,a){for(let s=0;s<o.length;s+=1)o[s]&&o[s].m(n,a);P(n,e,a),r=!0},p(n,a){if(a&55){t=fe(n[0]);let s;for(s=0;s<t.length;s+=1){const m=_e(n,t,s);o[s]?(o[s].p(m,a),E(o[s],1)):(o[s]=me(m),o[s].c(),E(o[s],1),o[s].m(e.parentNode,e))}for(x(),s=t.length;s<o.length;s+=1)c(s);Z()}},i(n){if(!r){for(let a=0;a<t.length;a+=1)E(o[a]);r=!0}},o(n){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)z(o[a]);r=!1},d(n){n&&b(e),Ee(o,n)}}}function Ie(l){let e,r;return e=new Be({}),{c(){U(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,o){R(e,t,o),r=!0},p:pe,i(t){r||(E(e.$$.fragment,t),r=!0)},o(t){z(e.$$.fragment,t),r=!1},d(t){V(e,t)}}}function de(l){let e;return{c(){e=v("input"),this.h()},l(r){e=y(r,"INPUT",{type:!0}),this.h()},h(){w(e,"type","checkbox"),e.checked=!0},m(r,t){P(r,e,t)},d(r){r&&b(e)}}}function qe(l){let e,r;return e=new Ce({props:{size:he,name:l[13].name}}),{c(){U(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,o){R(e,t,o),r=!0},p(t,o){const c={};o&1&&(c.name=t[13].name),e.$set(c)},i(t){r||(E(e.$$.fragment,t),r=!0)},o(t){z(e.$$.fragment,t),r=!1},d(t){V(e,t)}}}function He(l){let e,r;return e=new Le({props:{size:he}}),{c(){U(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,o){R(e,t,o),r=!0},p:pe,i(t){r||(E(e.$$.fragment,t),r=!0)},o(t){z(e.$$.fragment,t),r=!1},d(t){V(e,t)}}}function me(l){let e,r,t,o,c,n,a,s,m=l[13].name+"",T,d,D,f=(l[13].created_at||"")+"",p,g,i,N=(l[13].size||"")+"",q,Y,I,C,L,G,H,A,J,ee,h=l[1]===l[13].name&&de();const te=[He,qe],B=[];function re(k,u){return k[13].is_folder?0:1}n=re(l),a=B[n]=te[n](l);function be(){return l[7](l[13])}L=new Ae({props:{name:"eye",className:"w-4 h-4"}});function ge(){return l[8](l[13])}function ke(){return l[9](l[13])}return{c(){e=v("tr"),r=v("td"),h&&h.c(),t=S(),o=v("td"),c=v("button"),a.c(),s=S(),T=K(m),d=S(),D=v("td"),p=K(f),g=S(),i=v("td"),q=K(N),Y=S(),I=v("td"),C=v("button"),U(L.$$.fragment),G=S(),this.h()},l(k){e=y(k,"TR",{class:!0});var u=$(e);r=y(u,"TD",{class:!0});var F=$(r);h&&h.l(F),F.forEach(b),t=j(u),o=y(u,"TD",{});var le=$(o);c=y(le,"BUTTON",{class:!0,type:!0});var O=$(c);a.l(O),s=j(O),T=Q(O,m),O.forEach(b),le.forEach(b),d=j(u),D=y(u,"TD",{});var ne=$(D);p=Q(ne,f),ne.forEach(b),g=j(u),i=y(u,"TD",{});var ae=$(i);q=Q(ae,N),ae.forEach(b),Y=j(u),I=y(u,"TD",{});var oe=$(I);C=y(oe,"BUTTON",{type:!0,class:!0});var se=$(C);M(L.$$.fragment,se),se.forEach(b),oe.forEach(b),G=j(u),u.forEach(b),this.h()},h(){w(r,"class","w-1"),w(c,"class","mr-1 text-indigo-500"),w(c,"type","button"),w(C,"type","button"),w(C,"class","btn btn-sm variant-filled"),w(e,"class",H="cursor-pointer hover:bg-gray-700 "+(l[1]===l[13].name?"variant-outline-primary":""))},m(k,u){P(k,e,u),_(e,r),h&&h.m(r,null),_(e,t),_(e,o),_(o,c),B[n].m(c,null),_(c,s),_(c,T),_(e,d),_(e,D),_(D,p),_(e,g),_(e,i),_(i,q),_(e,Y),_(e,I),_(I,C),R(L,C,null),_(e,G),A=!0,J||(ee=[W(c,"click",De(be)),W(e,"dblclick",ge),W(e,"click",ke)],J=!0)},p(k,u){l=k,l[1]===l[13].name?h||(h=de(),h.c(),h.m(r,null)):h&&(h.d(1),h=null);let F=n;n=re(l),n===F?B[n].p(l,u):(x(),z(B[F],1,1,()=>{B[F]=null}),Z(),a=B[n],a?a.p(l,u):(a=B[n]=te[n](l),a.c()),E(a,1),a.m(c,s)),(!A||u&1)&&m!==(m=l[13].name+"")&&X(T,m),(!A||u&1)&&f!==(f=(l[13].created_at||"")+"")&&X(p,f),(!A||u&1)&&N!==(N=(l[13].size||"")+"")&&X(q,N),(!A||u&3&&H!==(H="cursor-pointer hover:bg-gray-700 "+(l[1]===l[13].name?"variant-outline-primary":"")))&&w(e,"class",H)},i(k){A||(E(a),E(L.$$.fragment,k),A=!0)},o(k){z(a),z(L.$$.fragment,k),A=!1},d(k){k&&b(e),h&&h.d(),B[n].d(),V(L),J=!1,we(ee)}}}function Oe(l){let e,r,t,o="<tr><td></td> <th>Name</th> <th>Created At</th> <th>Size</th> <th>Action</th></tr>",c,n,a,s,m;const T=[Ie,Fe],d=[];function D(f,p){return f[3]?0:1}return a=D(l),s=d[a]=T[a](l),{c(){e=v("div"),r=v("table"),t=v("thead"),t.innerHTML=o,c=S(),n=v("tbody"),s.c(),this.h()},l(f){e=y(f,"DIV",{class:!0});var p=$(e);r=y(p,"TABLE",{class:!0});var g=$(r);t=y(g,"THEAD",{"data-svelte-h":!0}),ye(t)!=="svelte-1bsuqe7"&&(t.innerHTML=o),c=j(g),n=y(g,"TBODY",{});var i=$(n);s.l(i),i.forEach(b),g.forEach(b),p.forEach(b),this.h()},h(){w(r,"class","table table-hover"),w(e,"class","table-container")},m(f,p){P(f,e,p),_(e,r),_(r,t),_(r,c),_(r,n),d[a].m(n,null),m=!0},p(f,[p]){let g=a;a=D(f),a===g?d[a].p(f,p):(x(),z(d[g],1,1,()=>{d[g]=null}),Z(),s=d[a],s?s.p(f,p):(s=d[a]=T[a](f),s.c()),E(s,1),s.m(n,null))},i(f){m||(E(s),m=!0)},o(f){z(s),m=!1},d(f){f&&b(e),d[a].d()}}}let he="32";function Pe(l,e,r){let t,o,c;ie(l,je,i=>r(6,o=i)),ie(l,Se,i=>r(10,c=i));let{files:n=[]}=e,{selected:a}=e;const s=Te(),m=$e("__api__"),T=c.params.pid;let d=!1;const D=async i=>{r(3,d=!0);const N=await m.listProjectFiles(T,i);N.status===200&&(r(0,n=N.data),r(3,d=!1))},f=i=>{i.is_folder?ue(`/z/pages/portal/project/files/${T}?folder=${t?t+"/"+i.name:i.name}`):ue(`/z/pages/portal/project/files/${T}/preview?folder=${t}`)},p=i=>s("open_item",i),g=i=>s("select_item",i);return l.$$set=i=>{"files"in i&&r(0,n=i.files),"selected"in i&&r(1,a=i.selected)},l.$$.update=()=>{l.$$.dirty&64&&r(2,t=o.folder||""),l.$$.dirty&4&&D(t)},[n,a,t,d,s,T,o,f,p,g]}class Xe extends ze{constructor(e){super(),Ne(this,e,Pe,Oe,ve,{files:0,selected:1})}}export{Xe as component};
