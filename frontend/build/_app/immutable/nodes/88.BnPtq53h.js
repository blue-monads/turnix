import{s as ve,e as k,a as C,c as v,b as E,v as ye,g as L,f as h,m as w,i as M,h as _,k as ie,C as Te,r as Ee,w as ce,q as $e,n as pe,t as K,d as Q,x as W,D as De,j as X,A as we}from"../chunks/scheduler.D2OtNeTK.js";import{S as ze,i as Ne,a as z,d as Z,t as $,g as x,c as P,b as j,m as R,e as V}from"../chunks/index.DD9KLV65.js";import{e as fe}from"../chunks/each.D6YF6ztN.js";import{S as Se}from"../chunks/SvgIcon.DW0uSnC-.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.B6Y8wNrO.js";import{L as Ae}from"../chunks/loader.zv9XVPa1.js";import{F as Be,a as Ce}from"../chunks/Folder.BLnQB3_F.js";import{p as Le}from"../chunks/stores.D0bQ952I.js";import{p as Fe}from"../chunks/index.BURjlDwe.js";import{g as ue}from"../chunks/entry.C8cUSds7.js";function _e(r,e,l){const t=r.slice();return t[13]=e[l],t[15]=l,t}function Ie(r){let e,l,t=fe(r[0]),o=[];for(let n=0;n<t.length;n+=1)o[n]=me(_e(r,t,n));const c=n=>z(o[n],1,1,()=>{o[n]=null});return{c(){for(let n=0;n<o.length;n+=1)o[n].c();e=ce()},l(n){for(let a=0;a<o.length;a+=1)o[a].l(n);e=ce()},m(n,a){for(let s=0;s<o.length;s+=1)o[s]&&o[s].m(n,a);M(n,e,a),l=!0},p(n,a){if(a&23){t=fe(n[0]);let s;for(s=0;s<t.length;s+=1){const d=_e(n,t,s);o[s]?(o[s].p(d,a),$(o[s],1)):(o[s]=me(d),o[s].c(),$(o[s],1),o[s].m(e.parentNode,e))}for(x(),s=t.length;s<o.length;s+=1)c(s);Z()}},i(n){if(!l){for(let a=0;a<t.length;a+=1)$(o[a]);l=!0}},o(n){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)z(o[a]);l=!1},d(n){n&&h(e),$e(o,n)}}}function qe(r){let e,l;return e=new Ae({}),{c(){P(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,o){R(e,t,o),l=!0},p:pe,i(t){l||($(e.$$.fragment,t),l=!0)},o(t){z(e.$$.fragment,t),l=!1},d(t){V(e,t)}}}function de(r){let e;return{c(){e=k("input"),this.h()},l(l){e=v(l,"INPUT",{type:!0}),this.h()},h(){w(e,"type","checkbox"),e.checked=!0},m(l,t){M(l,e,t)},d(l){l&&h(e)}}}function He(r){let e,l;return e=new Be({props:{size:he,name:r[13].name}}),{c(){P(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,o){R(e,t,o),l=!0},p(t,o){const c={};o&1&&(c.name=t[13].name),e.$set(c)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){z(e.$$.fragment,t),l=!1},d(t){V(e,t)}}}function Oe(r){let e,l;return e=new Ce({props:{size:he}}),{c(){P(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,o){R(e,t,o),l=!0},p:pe,i(t){l||($(e.$$.fragment,t),l=!0)},o(t){z(e.$$.fragment,t),l=!1},d(t){V(e,t)}}}function me(r){let e,l,t,o,c,n,a,s,d=r[13].name+"",y,b,D,f=(r[13].created_at||"")+"",m,i,T,I=(r[13].size||"")+"",H,Y,q,A,B,G,O,N,J,ee,p=r[1]===r[13].name&&de();const te=[Oe,He],S=[];function le(g,u){return g[13].is_folder?0:1}n=le(r),a=S[n]=te[n](r);function be(){return r[6](r[13])}B=new Se({props:{name:"eye",className:"w-4 h-4"}});function ge(){return r[7](r[13])}function ke(){return r[8](r[13])}return{c(){e=k("tr"),l=k("td"),p&&p.c(),t=C(),o=k("td"),c=k("button"),a.c(),s=C(),y=K(d),b=C(),D=k("td"),m=K(f),i=C(),T=k("td"),H=K(I),Y=C(),q=k("td"),A=k("button"),P(B.$$.fragment),G=C(),this.h()},l(g){e=v(g,"TR",{class:!0});var u=E(e);l=v(u,"TD",{class:!0});var F=E(l);p&&p.l(F),F.forEach(h),t=L(u),o=v(u,"TD",{});var re=E(o);c=v(re,"BUTTON",{class:!0,type:!0});var U=E(c);a.l(U),s=L(U),y=Q(U,d),U.forEach(h),re.forEach(h),b=L(u),D=v(u,"TD",{});var ne=E(D);m=Q(ne,f),ne.forEach(h),i=L(u),T=v(u,"TD",{});var ae=E(T);H=Q(ae,I),ae.forEach(h),Y=L(u),q=v(u,"TD",{});var oe=E(q);A=v(oe,"BUTTON",{type:!0,class:!0});var se=E(A);j(B.$$.fragment,se),se.forEach(h),oe.forEach(h),G=L(u),u.forEach(h),this.h()},h(){w(l,"class","w-1"),w(c,"class","mr-1 text-indigo-500"),w(c,"type","button"),w(A,"type","button"),w(A,"class","btn btn-sm variant-filled"),w(e,"class",O="cursor-pointer hover:bg-gray-700 "+(r[1]===r[13].name?"variant-outline-primary":""))},m(g,u){M(g,e,u),_(e,l),p&&p.m(l,null),_(e,t),_(e,o),_(o,c),S[n].m(c,null),_(c,s),_(c,y),_(e,b),_(e,D),_(D,m),_(e,i),_(e,T),_(T,H),_(e,Y),_(e,q),_(q,A),R(B,A,null),_(e,G),N=!0,J||(ee=[W(c,"click",De(be)),W(e,"dblclick",ge),W(e,"click",ke)],J=!0)},p(g,u){r=g,r[1]===r[13].name?p||(p=de(),p.c(),p.m(l,null)):p&&(p.d(1),p=null);let F=n;n=le(r),n===F?S[n].p(r,u):(x(),z(S[F],1,1,()=>{S[F]=null}),Z(),a=S[n],a?a.p(r,u):(a=S[n]=te[n](r),a.c()),$(a,1),a.m(c,s)),(!N||u&1)&&d!==(d=r[13].name+"")&&X(y,d),(!N||u&1)&&f!==(f=(r[13].created_at||"")+"")&&X(m,f),(!N||u&1)&&I!==(I=(r[13].size||"")+"")&&X(H,I),(!N||u&3&&O!==(O="cursor-pointer hover:bg-gray-700 "+(r[1]===r[13].name?"variant-outline-primary":"")))&&w(e,"class",O)},i(g){N||($(a),$(B.$$.fragment,g),N=!0)},o(g){z(a),z(B.$$.fragment,g),N=!1},d(g){g&&h(e),p&&p.d(),S[n].d(),V(B),J=!1,we(ee)}}}function Ue(r){let e,l,t,o="<tr><td></td> <th>Name</th> <th>Created At</th> <th>Size</th> <th>Action</th></tr>",c,n,a,s,d;const y=[qe,Ie],b=[];function D(f,m){return f[3]?0:1}return a=D(r),s=b[a]=y[a](r),{c(){e=k("div"),l=k("table"),t=k("thead"),t.innerHTML=o,c=C(),n=k("tbody"),s.c(),this.h()},l(f){e=v(f,"DIV",{class:!0});var m=E(e);l=v(m,"TABLE",{class:!0});var i=E(l);t=v(i,"THEAD",{"data-svelte-h":!0}),ye(t)!=="svelte-1bsuqe7"&&(t.innerHTML=o),c=L(i),n=v(i,"TBODY",{});var T=E(n);s.l(T),T.forEach(h),i.forEach(h),m.forEach(h),this.h()},h(){w(l,"class","table table-hover"),w(e,"class","table-container")},m(f,m){M(f,e,m),_(e,l),_(l,t),_(l,c),_(l,n),b[a].m(n,null),d=!0},p(f,[m]){let i=a;a=D(f),a===i?b[a].p(f,m):(x(),z(b[i],1,1,()=>{b[i]=null}),Z(),s=b[a],s?s.p(f,m):(s=b[a]=y[a](f),s.c()),$(s,1),s.m(n,null))},i(f){d||($(s),d=!0)},o(f){z(s),d=!1},d(f){f&&h(e),b[a].d()}}}let he="32";function Me(r,e,l){let t,o,c;ie(r,Fe,i=>l(5,o=i)),ie(r,Le,i=>l(9,c=i));let{files:n=[]}=e,{selected:a}=e;const s=Te(),d=Ee("__api__");c.params.pid;let y=!1;const b=async i=>{l(3,y=!0);const T=await d.listSelfFiles(i);T.status===200&&(l(0,n=T.data),l(3,y=!1))},D=i=>{i.is_folder?ue(`/z/pages/portal/self/files?folder=${t?t+"/"+i.name:i.name}`):ue(`/z/pages/portal/self/files/preview?folder=${t}`)},f=i=>s("open_item",i),m=i=>s("select_item",i);return r.$$set=i=>{"files"in i&&l(0,n=i.files),"selected"in i&&l(1,a=i.selected)},r.$$.update=()=>{r.$$.dirty&32&&l(2,t=o.folder||""),r.$$.dirty&4&&b(t)},[n,a,t,y,s,o,D,f,m]}class Xe extends ze{constructor(e){super(),Ne(this,e,Me,Ue,ve,{files:0,selected:1})}}export{Xe as component};
