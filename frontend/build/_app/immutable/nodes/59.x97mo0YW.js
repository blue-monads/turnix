import{s as M,a as T,w as H,g as B,i as d,f,k as P,r as x,e as A,c as S,v as D,m as h,n as q,t as C,b as j,d as E,h as I}from"../chunks/scheduler.D2OtNeTK.js";import{S as O,i as U,c as k,b as v,m as w,a as g,d as F,t as b,e as y,g as G}from"../chunks/index.DD9KLV65.js";import{S as L}from"../chunks/SvgIcon.DW0uSnC-.js";import{N as J}from"../chunks/index.ZlEQwogg.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.B6Y8wNrO.js";import{A as K}from"../chunks/AppBar.C3Ur4xTI.js";import{p as Q}from"../chunks/stores.D0bQ952I.js";import{A as R}from"../chunks/autotable.D4yDFDK-.js";import{L as V}from"../chunks/loader.zv9XVPa1.js";import{g as W}from"../chunks/entry.C8cUSds7.js";function X(c){let e,s='<li class="crumb"><a class="anchor" href="/z/pages/portal/projects/books">Books</a></li> <li class="crumb-separator" aria-hidden="">â€º</li> <li class="crumb">Sales</li>';return{c(){e=A("ol"),e.innerHTML=s,this.h()},l(t){e=S(t,"OL",{class:!0,"data-svelte-h":!0}),D(e)!=="svelte-q69zr7"&&(e.innerHTML=s),this.h()},h(){h(e,"class","breadcrumb")},m(t,r){d(t,e,r)},p:q,d(t){t&&f(e)}}}function Y(c){let e,s,t,r,o,m,u,i,p,a,l,_;return s=new L({props:{className:"h-4 w-4",name:"plus"}}),m=new L({props:{className:"h-4 w-4 mr-1",name:"document"}}),a=new L({props:{className:"h-4 w-4 mr-1",name:"document-text"}}),{c(){e=A("a"),k(s.$$.fragment),t=C(`
            Sale`),r=T(),o=A("a"),k(m.$$.fragment),u=C(`

            Estimates`),i=T(),p=A("a"),k(a.$$.fragment),l=C(`

            Invoices`),this.h()},l(n){e=S(n,"A",{href:!0,class:!0});var $=j(e);v(s.$$.fragment,$),t=E($,`
            Sale`),$.forEach(f),r=B(n),o=S(n,"A",{href:!0,class:!0});var N=j(o);v(m.$$.fragment,N),u=E(N,`

            Estimates`),N.forEach(f),i=B(n),p=S(n,"A",{href:!0,class:!0});var z=j(p);v(a.$$.fragment,z),l=E(z,`

            Invoices`),z.forEach(f),this.h()},h(){h(e,"href",`/z/pages/portal/projects/books/${c[2]}/sales/new`),h(e,"class","btn variant-ghost-primary btn-sm"),h(o,"href",`/z/pages/portal/projects/books/${c[2]}/sales/estimates`),h(o,"class","btn variant-filled-secondary btn-sm"),h(p,"href",`/z/pages/portal/projects/books/${c[2]}/sales/invoice`),h(p,"class","btn variant-filled btn-sm")},m(n,$){d(n,e,$),w(s,e,null),I(e,t),d(n,r,$),d(n,o,$),w(m,o,null),I(o,u),d(n,i,$),d(n,p,$),w(a,p,null),I(p,l),_=!0},p:q,i(n){_||(b(s.$$.fragment,n),b(m.$$.fragment,n),b(a.$$.fragment,n),_=!0)},o(n){g(s.$$.fragment,n),g(m.$$.fragment,n),g(a.$$.fragment,n),_=!1},d(n){n&&(f(e),f(r),f(o),f(i),f(p)),y(s),y(m),y(a)}}}function Z(c){let e,s;return e=new R({props:{action_key:"id",key_names:[["id","ID"],["title","Title"],["client_name","Client"],["total","Total"],["updated_at","Updated At"]],datas:c[0],color:["ctype"],actions:[{Name:"edit",Class:"variant-filled-primary",Action:c[5]},{Name:"delete",Class:"variant-filled-error",Action:c[6]}]}}),{c(){k(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,r){w(e,t,r),s=!0},p(t,r){const o={};r&1&&(o.datas=t[0]),e.$set(o)},i(t){s||(b(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){y(e,t)}}}function ee(c){let e,s;return e=new V({}),{c(){k(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,r){w(e,t,r),s=!0},p:q,i(t){s||(b(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){y(e,t)}}}function te(c){let e,s,t,r,o,m;e=new K({props:{$$slots:{trail:[Y],lead:[X]},$$scope:{ctx:c}}});const u=[ee,Z],i=[];function p(a,l){return a[1]?0:1}return t=p(c),r=i[t]=u[t](c),{c(){k(e.$$.fragment),s=T(),r.c(),o=H()},l(a){v(e.$$.fragment,a),s=B(a),r.l(a),o=H()},m(a,l){w(e,a,l),d(a,s,l),i[t].m(a,l),d(a,o,l),m=!0},p(a,[l]){const _={};l&256&&(_.$$scope={dirty:l,ctx:a}),e.$set(_);let n=t;t=p(a),t===n?i[t].p(a,l):(G(),g(i[n],1,1,()=>{i[n]=null}),F(),r=i[t],r?r.p(a,l):(r=i[t]=u[t](a),r.c()),b(r,1),r.m(o.parentNode,o))},i(a){m||(b(e.$$.fragment,a),b(r),m=!0)},o(a){g(e.$$.fragment,a),g(r),m=!1},d(a){a&&(f(s),f(o)),y(e,a),i[t].d(a)}}}function ae(c,e,s){let t;P(c,Q,l=>s(7,t=l));const r=t.params.pid,o=J(x("__api__"));let m=[],u=!0;const i=async()=>{s(1,u=!0);const l=await o.listSales(r);l.status===200&&(s(0,m=l.data),s(1,u=!1))};return i(),[m,u,r,o,i,async l=>{W(`/z/pages/portal/projects/books/${r}/sales/edit?sid=${l}`)},async l=>{(await o.deleteSale(r,l)).status===200&&i()}]}class ue extends O{constructor(e){super(),U(this,e,ae,te,M,{})}}export{ue as component};
