import{s as Kt,A as Xt,i as Ot,f as p,k as Wt,z as Zt,e as n,a as x,c as o,b as _,q as $,g as y,m as r,h as t,x as nt,r as Q,G as te,v as ee,y as le,n as ae,t as gt,d as xt,j as yt}from"../chunks/scheduler.DVTwEvQJ.js";import{S as se,i as re,a as it,d as ne,t as ut,g as oe,c as It,b as Lt,m as At,e as Bt}from"../chunks/index.DkBQfKoF.js";import{e as Gt}from"../chunks/each.D6YF6ztN.js";import{N as ce}from"../chunks/index.D3jOKT1N.js";import{p as ie}from"../chunks/stores.10CBQxEg.js";import{S as Qt}from"../chunks/SvgIcon.BFG_zjfn.js";import{g as ue}from"../chunks/stores.DEog-POi.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.Dy7ATQYE.js";import{L as de}from"../chunks/loader.B70xSjYw.js";import"../chunks/entry.B0930nEj.js";function Yt(a,e,l){const s=a.slice();return s[20]=e[l],s[22]=l,s}function pe(a){let e,l,s,k='<h3 class="h3">New Sale</h3>',N,c,m,i,b,D="Billed To",S,v,E,w,M,I,L,O,g,P,q="Date of Sale",j,f,R,T,d,ot="Title",W,A,Z,z,V,tt,Pt='<tr class="variant-filled print:bg-gray-300 print:text-black"><th class="px-4 py-2">Item</th> <th class="px-4 py-2 text-right">Qty</th> <th class="px-4 py-2 text-right">Unit Price</th> <th class="px-4 py-2 text-right">Subtotal</th> <th class="px-4 py-2 text-right"></th></tr>',Et,et,Tt,lt,Y,J,kt,F,X,at,Ht="Notes",Ct,U,Dt,K,Mt='<table><tbody><tr><td class="px-2 py-2 border">Sub Total</td> <td class="px-2 py-2 border text-right">10000</td></tr> <tr><td class="px-2 py-2 border">TAX</td> <td class="px-2 py-2 border text-right">12%</td></tr> <tr><td class="px-2 py-2 border">Discount</td> <td class="px-2 py-2 border text-right">0%</td></tr> <tr><td class="px-2 py-2 border font-semibold">Total</td> <td class="px-2 py-2 border text-right font-semibold">1120</td></tr></tbody></table>',wt,st,G,Ut="save",ct,Nt,jt;L=new Qt({props:{name:"plus",className:"w-4 h-4 inline-block align-middle"}});let rt=Gt(a[4]),C=[];for(let u=0;u<rt.length;u+=1)C[u]=Jt(Yt(a,rt,u));return J=new Qt({props:{name:"plus",className:"w-4 h-4 inline-block align-middle"}}),{c(){e=n("form"),l=n("div"),s=n("header"),s.innerHTML=k,N=x(),c=n("section"),m=n("div"),i=n("label"),b=n("span"),b.textContent=D,S=x(),v=n("div"),E=n("input"),M=x(),I=n("button"),It(L.$$.fragment),O=x(),g=n("label"),P=n("span"),P.textContent=q,j=x(),f=n("input"),R=x(),T=n("label"),d=n("span"),d.textContent=ot,W=x(),A=n("input"),Z=x(),z=n("div"),V=n("table"),tt=n("thead"),tt.innerHTML=Pt,Et=x(),et=n("tbody");for(let u=0;u<C.length;u+=1)C[u].c();Tt=x(),lt=n("div"),Y=n("button"),It(J.$$.fragment),kt=x(),F=n("div"),X=n("label"),at=n("span"),at.textContent=Ht,Ct=x(),U=n("textarea"),Dt=x(),K=n("div"),K.innerHTML=Mt,wt=x(),st=n("footer"),G=n("button"),G.textContent=Ut,this.h()},l(u){e=o(u,"FORM",{class:!0});var H=_(e);l=o(H,"DIV",{class:!0});var h=_(l);s=o(h,"HEADER",{class:!0,"data-svelte-h":!0}),$(s)!=="svelte-1jr804n"&&(s.innerHTML=k),N=y(h),c=o(h,"SECTION",{class:!0});var B=_(c);m=o(B,"DIV",{class:!0});var dt=_(m);i=o(dt,"LABEL",{class:!0});var pt=_(i);b=o(pt,"SPAN",{"data-svelte-h":!0}),$(b)!=="svelte-1d9r8lt"&&(b.textContent=D),S=y(pt),v=o(pt,"DIV",{class:!0});var ft=_(v);E=o(ft,"INPUT",{type:!0,class:!0,placeholder:!0}),M=y(ft),I=o(ft,"BUTTON",{});var zt=_(I);Lt(L.$$.fragment,zt),zt.forEach(p),ft.forEach(p),pt.forEach(p),O=y(dt),g=o(dt,"LABEL",{class:!0});var ht=_(g);P=o(ht,"SPAN",{"data-svelte-h":!0}),$(P)!=="svelte-18fl3p6"&&(P.textContent=q),j=y(ht),f=o(ht,"INPUT",{type:!0,class:!0,placeholder:!0}),ht.forEach(p),dt.forEach(p),R=y(B),T=o(B,"LABEL",{class:!0});var _t=_(T);d=o(_t,"SPAN",{"data-svelte-h":!0}),$(d)!=="svelte-7ccxmo"&&(d.textContent=ot),W=y(_t),A=o(_t,"INPUT",{class:!0,type:!0,placeholder:!0}),_t.forEach(p),Z=y(B),z=o(B,"DIV",{class:!0});var Vt=_(z);V=o(Vt,"TABLE",{class:!0,id:!0});var mt=_(V);tt=o(mt,"THEAD",{"data-svelte-h":!0}),$(tt)!=="svelte-d548eh"&&(tt.innerHTML=Pt),Et=y(mt),et=o(mt,"TBODY",{});var $t=_(et);for(let St=0;St<C.length;St+=1)C[St].l($t);$t.forEach(p),mt.forEach(p),Vt.forEach(p),Tt=y(B),lt=o(B,"DIV",{class:!0});var qt=_(lt);Y=o(qt,"BUTTON",{class:!0});var Rt=_(Y);Lt(J.$$.fragment,Rt),Rt.forEach(p),qt.forEach(p),kt=y(B),F=o(B,"DIV",{class:!0});var bt=_(F);X=o(bt,"LABEL",{class:!0});var vt=_(X);at=o(vt,"SPAN",{"data-svelte-h":!0}),$(at)!=="svelte-nf0nmx"&&(at.textContent=Ht),Ct=y(vt),U=o(vt,"TEXTAREA",{class:!0,rows:!0,placeholder:!0}),_(U).forEach(p),vt.forEach(p),Dt=y(bt),K=o(bt,"DIV",{class:!0,"data-svelte-h":!0}),$(K)!=="svelte-11nkuax"&&(K.innerHTML=Mt),bt.forEach(p),B.forEach(p),wt=y(h),st=o(h,"FOOTER",{class:!0});var Ft=_(st);G=o(Ft,"BUTTON",{class:!0,"data-svelte-h":!0}),$(G)!=="svelte-14oftkg"&&(G.textContent=Ut),Ft.forEach(p),h.forEach(p),H.forEach(p),this.h()},h(){r(s,"class","card-header"),r(E,"type","text"),E.disabled=!0,E.value=w=a[6][a[2]]||"",r(E,"class","input p-1"),r(E,"placeholder","Client"),r(v,"class","flex gap-2"),r(i,"class","label"),r(f,"type","datetime-local"),r(f,"class","input p-1"),r(f,"placeholder","Date"),r(g,"class","label"),r(m,"class","flex gap-2 justify-between"),r(A,"class","input p-1 w-36"),r(A,"type","text"),r(A,"placeholder","Input"),r(T,"class","label flex flex-col gap-2"),r(V,"class","w-full text-left table-auto print:text-sm"),r(V,"id","table-items"),r(z,"class","max-h-96 overflow-auto"),r(Y,"class","btn btn-sm variant-filled"),r(lt,"class","flex justify-start p-2"),r(U,"class","textarea p-1"),r(U,"rows","4"),r(U,"placeholder","Notes about the sale.."),r(X,"class","label flex flex-col gap-2 w-full md:w-1/2"),r(K,"class","flex flex-col gap-2 text-sm"),r(F,"class","flex gap-2 w-full justify-between"),r(c,"class","p-4 flex flex-col gap-4"),r(G,"class","btn variant-filled"),r(st,"class","card-footer flex justify-end"),r(l,"class","card"),r(e,"class","p-2")},m(u,H){Ot(u,e,H),t(e,l),t(l,s),t(l,N),t(l,c),t(c,m),t(m,i),t(i,b),t(i,S),t(i,v),t(v,E),t(v,M),t(v,I),At(L,I,null),t(m,O),t(m,g),t(g,P),t(g,j),t(g,f),nt(f,a[3]),t(c,R),t(c,T),t(T,d),t(T,W),t(T,A),nt(A,a[0]),t(c,Z),t(c,z),t(z,V),t(V,tt),t(V,Et),t(V,et);for(let h=0;h<C.length;h+=1)C[h]&&C[h].m(et,null);t(c,Tt),t(c,lt),t(lt,Y),At(J,Y,null),t(c,kt),t(c,F),t(F,X),t(X,at),t(X,Ct),t(X,U),nt(U,a[1]),t(F,Dt),t(F,K),t(l,wt),t(l,st),t(st,G),ct=!0,Nt||(jt=[Q(I,"click",a[12]),Q(f,"input",a[13]),Q(A,"input",a[14]),Q(Y,"click",a[16]),Q(U,"input",a[17]),Q(G,"click",a[10]),Q(e,"submit",te(a[10]))],Nt=!0)},p(u,H){if((!ct||H&68&&w!==(w=u[6][u[2]]||"")&&E.value!==w)&&(E.value=w),H&8&&nt(f,u[3]),H&1&&A.value!==u[0]&&nt(A,u[0]),H&16){rt=Gt(u[4]);let h;for(h=0;h<rt.length;h+=1){const B=Yt(u,rt,h);C[h]?C[h].p(B,H):(C[h]=Jt(B),C[h].c(),C[h].m(et,null))}for(;h<C.length;h+=1)C[h].d(1);C.length=rt.length}H&2&&nt(U,u[1])},i(u){ct||(ut(L.$$.fragment,u),ut(J.$$.fragment,u),ct=!0)},o(u){it(L.$$.fragment,u),it(J.$$.fragment,u),ct=!1},d(u){u&&p(e),Bt(L),ee(C,u),Bt(J),Nt=!1,le(jt)}}}function fe(a){let e,l;return e=new de({}),{c(){It(e.$$.fragment)},l(s){Lt(e.$$.fragment,s)},m(s,k){At(e,s,k),l=!0},p:ae,i(s){l||(ut(e.$$.fragment,s),l=!0)},o(s){it(e.$$.fragment,s),l=!1},d(s){Bt(e,s)}}}function Jt(a){let e,l,s=a[20].info+"",k,N,c,m=a[20].qty+"",i,b,D,S=a[20].amount+"",v,E,w,M=a[20].amount*a[20].qty+"",I,L,O,g,P="remove",q,j,f;function R(){return a[15](a[22])}return{c(){e=n("tr"),l=n("td"),k=gt(s),N=x(),c=n("td"),i=gt(m),b=x(),D=n("td"),v=gt(S),E=x(),w=n("td"),I=gt(M),L=x(),O=n("td"),g=n("button"),g.textContent=P,q=x(),this.h()},l(T){e=o(T,"TR",{});var d=_(e);l=o(d,"TD",{class:!0});var ot=_(l);k=xt(ot,s),ot.forEach(p),N=y(d),c=o(d,"TD",{class:!0});var W=_(c);i=xt(W,m),W.forEach(p),b=y(d),D=o(d,"TD",{class:!0});var A=_(D);v=xt(A,S),A.forEach(p),E=y(d),w=o(d,"TD",{class:!0});var Z=_(w);I=xt(Z,M),Z.forEach(p),L=y(d),O=o(d,"TD",{class:!0});var z=_(O);g=o(z,"BUTTON",{class:!0,"data-svelte-h":!0}),$(g)!=="svelte-z6zj73"&&(g.textContent=P),z.forEach(p),q=y(d),d.forEach(p),this.h()},h(){r(l,"class","px-4 py-2 border"),r(c,"class","px-4 py-2 text-right border tabular-nums slashed-zero"),r(D,"class","px-4 py-2 text-right border tabular-nums slashed-zero"),r(w,"class","px-4 py-2 text-right border tabular-nums slashed-zero"),r(g,"class","hover:underline text-warning-800 text-xs"),r(O,"class","px-4 py-2 text-right border tabular-nums slashed-zero")},m(T,d){Ot(T,e,d),t(e,l),t(l,k),t(e,N),t(e,c),t(c,i),t(e,b),t(e,D),t(D,v),t(e,E),t(e,w),t(w,I),t(e,L),t(e,O),t(O,g),t(e,q),j||(f=Q(g,"click",R),j=!0)},p(T,d){a=T,d&16&&s!==(s=a[20].info+"")&&yt(k,s),d&16&&m!==(m=a[20].qty+"")&&yt(i,m),d&16&&S!==(S=a[20].amount+"")&&yt(v,S),d&16&&M!==(M=a[20].amount*a[20].qty+"")&&yt(I,M)},d(T){T&&p(e),j=!1,f()}}}function he(a){let e,l,s,k;const N=[fe,pe],c=[];function m(i,b){return i[5]?0:1}return e=m(a),l=c[e]=N[e](a),{c(){l.c(),s=Xt()},l(i){l.l(i),s=Xt()},m(i,b){c[e].m(i,b),Ot(i,s,b),k=!0},p(i,[b]){let D=e;e=m(i),e===D?c[e].p(i,b):(oe(),it(c[D],1,1,()=>{c[D]=null}),ne(),l=c[e],l?l.p(i,b):(l=c[e]=N[e](i),l.c()),ut(l,1),l.m(s.parentNode,s))},i(i){k||(ut(l),k=!0)},o(i){it(l),k=!1},d(i){i&&p(s),c[e].d(i)}}}function _e(a,e,l){let s,k;Wt(a,ie,f=>l(18,k=f));const N=k.params.pid,c=ce(Zt("__api__")),m=ue();let i="Sale #1234",b="",D=0,S=new Date().toISOString().slice(0,16),v=[],E=[],w=!0;(async()=>{l(5,w=!0);const f=await c.listContacts(N);f.status===200&&(l(11,E=f.data),l(5,w=!1))})();const I=async()=>{},L=()=>{m.trigger({type:"component",component:"books_client_picker",meta:{api:c,pid:N,onSelect:f=>{l(2,D=f.id||0)}}})};function O(){S=this.value,l(3,S)}function g(){i=this.value,l(0,i)}const P=f=>{v.splice(f,1),l(4,v)},q=()=>{m.trigger({type:"component",component:"books_sales_item_pick",meta:{api:c,pid:N,onSave:f=>{v.push(f),l(4,v)}}})};function j(){b=this.value,l(1,b)}return a.$$.update=()=>{a.$$.dirty&2048&&l(6,s=E.reduce((f,R)=>{const T=R.id,d=R.name;return f[T]=d,f},{}))},[i,b,D,S,v,w,s,N,c,m,I,E,L,O,g,P,q,j]}class De extends se{constructor(e){super(),re(this,e,_e,he,Kt,{})}}export{De as component};
