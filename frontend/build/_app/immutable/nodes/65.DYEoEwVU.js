import{s as te,w as Ft,i as _t,f,k as ee,r as le,e as i,a as y,c,b,v as Y,g as E,m as o,h as l,z as kt,x as et,D as ae,q as se,A as re,n as ne,R as Xt,T as Gt,t as it,d as ct,j as Tt}from"../chunks/scheduler.D2OtNeTK.js";import{S as oe,i as ie,a as J,d as ce,t as K,g as ue,c as ut,b as dt,m as ft,e as pt,f as Qt}from"../chunks/index.DD9KLV65.js";import{e as Yt}from"../chunks/each.D6YF6ztN.js";import{N as de}from"../chunks/index.ZlEQwogg.js";import{p as fe}from"../chunks/stores.D0bQ952I.js";import{S as Jt}from"../chunks/SvgIcon.DW0uSnC-.js";import{g as pe}from"../chunks/stores.BSAXtruD.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.B6Y8wNrO.js";import{R as _e,a as Kt}from"../chunks/RadioItem.CFFCp3wG.js";import{L as me}from"../chunks/loader.zv9XVPa1.js";function Wt(a,t,e){const s=a.slice();return s[22]=t[e],s[24]=e,s}function he(a){let t,e,s,u,k="New Sale",_,v,n,$,p,r,m,T,I="Billed To",V,x,D,S,N,z,B,U,O,h,j="Date of Sale",g,A,lt,q,R,M,Bt='<tr class="variant-filled print:bg-gray-300 print:text-black"><th class="px-4 py-2">Item</th> <th class="px-4 py-2 text-right">Qty</th> <th class="px-4 py-2 text-right">Unit Price</th> <th class="px-4 py-2 text-right">Subtotal</th> <th class="px-4 py-2 text-right"></th></tr>',Ct,at,wt,st,W,Z,Dt,F,X,rt,Ot="Notes",It,H,St,tt,jt='<table><tbody><tr><td class="px-2 py-2 border">Sub Total</td> <td class="px-2 py-2 border text-right">10000</td></tr> <tr><td class="px-2 py-2 border">TAX</td> <td class="px-2 py-2 border text-right">12%</td></tr> <tr><td class="px-2 py-2 border">Discount</td> <td class="px-2 py-2 border text-right">0%</td></tr> <tr><td class="px-2 py-2 border font-semibold">Total</td> <td class="px-2 py-2 border text-right font-semibold">1120</td></tr></tbody></table>',Nt,nt,G,Rt="save",mt,At,Pt;n=new _e({props:{$$slots:{default:[$e]},$$scope:{ctx:a}}}),B=new Jt({props:{name:"plus",className:"w-4 h-4 inline-block align-middle"}});let ot=Yt(a[3]),C=[];for(let d=0;d<ot.length;d+=1)C[d]=Zt(Wt(a,ot,d));return Z=new Jt({props:{name:"plus",className:"w-4 h-4 inline-block align-middle"}}),{c(){t=i("form"),e=i("div"),s=i("header"),u=i("h3"),u.textContent=k,_=y(),v=i("div"),ut(n.$$.fragment),$=y(),p=i("section"),r=i("div"),m=i("label"),T=i("span"),T.textContent=I,V=y(),x=i("div"),D=i("input"),N=y(),z=i("button"),ut(B.$$.fragment),U=y(),O=i("label"),h=i("span"),h.textContent=j,g=y(),A=i("input"),lt=y(),q=i("div"),R=i("table"),M=i("thead"),M.innerHTML=Bt,Ct=y(),at=i("tbody");for(let d=0;d<C.length;d+=1)C[d].c();wt=y(),st=i("div"),W=i("button"),ut(Z.$$.fragment),Dt=y(),F=i("div"),X=i("label"),rt=i("span"),rt.textContent=Ot,It=y(),H=i("textarea"),St=y(),tt=i("div"),tt.innerHTML=jt,Nt=y(),nt=i("footer"),G=i("button"),G.textContent=Rt,this.h()},l(d){t=c(d,"FORM",{class:!0});var P=b(t);e=c(P,"DIV",{class:!0});var L=b(e);s=c(L,"HEADER",{class:!0});var w=b(s);u=c(w,"H3",{class:!0,"data-svelte-h":!0}),Y(u)!=="svelte-1egbxyh"&&(u.textContent=k),_=E(w),v=c(w,"DIV",{class:!0});var ht=b(v);dt(n.$$.fragment,ht),ht.forEach(f),w.forEach(f),$=E(L),p=c(L,"SECTION",{class:!0});var Q=b(p);r=c(Q,"DIV",{class:!0});var bt=b(r);m=c(bt,"LABEL",{class:!0});var gt=b(m);T=c(gt,"SPAN",{"data-svelte-h":!0}),Y(T)!=="svelte-1d9r8lt"&&(T.textContent=I),V=E(gt),x=c(gt,"DIV",{class:!0});var vt=b(x);D=c(vt,"INPUT",{type:!0,class:!0,placeholder:!0}),N=E(vt),z=c(vt,"BUTTON",{});var Vt=b(z);dt(B.$$.fragment,Vt),Vt.forEach(f),vt.forEach(f),gt.forEach(f),U=E(bt),O=c(bt,"LABEL",{class:!0});var $t=b(O);h=c($t,"SPAN",{"data-svelte-h":!0}),Y(h)!=="svelte-18fl3p6"&&(h.textContent=j),g=E($t),A=c($t,"INPUT",{type:!0,class:!0,placeholder:!0}),$t.forEach(f),bt.forEach(f),lt=E(Q),q=c(Q,"DIV",{class:!0});var zt=b(q);R=c(zt,"TABLE",{class:!0,id:!0});var xt=b(R);M=c(xt,"THEAD",{"data-svelte-h":!0}),Y(M)!=="svelte-d548eh"&&(M.innerHTML=Bt),Ct=E(xt),at=c(xt,"TBODY",{});var Ht=b(at);for(let Lt=0;Lt<C.length;Lt+=1)C[Lt].l(Ht);Ht.forEach(f),xt.forEach(f),zt.forEach(f),wt=E(Q),st=c(Q,"DIV",{class:!0});var Ut=b(st);W=c(Ut,"BUTTON",{class:!0});var qt=b(W);dt(Z.$$.fragment,qt),qt.forEach(f),Ut.forEach(f),Dt=E(Q),F=c(Q,"DIV",{class:!0});var yt=b(F);X=c(yt,"LABEL",{class:!0});var Et=b(X);rt=c(Et,"SPAN",{"data-svelte-h":!0}),Y(rt)!=="svelte-nf0nmx"&&(rt.textContent=Ot),It=E(Et),H=c(Et,"TEXTAREA",{class:!0,rows:!0,placeholder:!0}),b(H).forEach(f),Et.forEach(f),St=E(yt),tt=c(yt,"DIV",{class:!0,"data-svelte-h":!0}),Y(tt)!=="svelte-11nkuax"&&(tt.innerHTML=jt),yt.forEach(f),Q.forEach(f),Nt=E(L),nt=c(L,"FOOTER",{class:!0});var Mt=b(nt);G=c(Mt,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(G)!=="svelte-1y6r20i"&&(G.textContent=Rt),Mt.forEach(f),L.forEach(f),P.forEach(f),this.h()},h(){o(u,"class","h3"),o(v,"class","w-64"),o(s,"class","card-header flex justify-between"),o(D,"type","text"),D.disabled=!0,D.value=S=a[6][a[1]]||"",o(D,"class","input p-1"),o(D,"placeholder","Client"),o(x,"class","flex gap-2"),o(m,"class","label"),o(A,"type","datetime-local"),o(A,"class","input p-1"),o(A,"placeholder","Date"),o(O,"class","label"),o(r,"class","flex gap-2 justify-between"),o(R,"class","w-full text-left table-auto print:text-sm"),o(R,"id","table-items"),o(q,"class","max-h-96 overflow-auto"),o(W,"class","btn btn-sm variant-filled"),o(st,"class","flex justify-start p-2"),o(H,"class","textarea p-1"),o(H,"rows","4"),o(H,"placeholder","Notes about the sale.."),o(X,"class","label flex flex-col gap-2 w-full md:w-1/2"),o(tt,"class","flex flex-col gap-2 text-sm"),o(F,"class","flex gap-2 w-full justify-between"),o(p,"class","p-4 flex flex-col gap-4"),o(G,"class","btn variant-filled"),o(nt,"class","card-footer flex justify-end"),o(e,"class","card"),o(t,"class","p-2")},m(d,P){_t(d,t,P),l(t,e),l(e,s),l(s,u),l(s,_),l(s,v),ft(n,v,null),l(e,$),l(e,p),l(p,r),l(r,m),l(m,T),l(m,V),l(m,x),l(x,D),l(x,N),l(x,z),ft(B,z,null),l(r,U),l(r,O),l(O,h),l(O,g),l(O,A),kt(A,a[2]),l(p,lt),l(p,q),l(q,R),l(R,M),l(R,Ct),l(R,at);for(let L=0;L<C.length;L+=1)C[L]&&C[L].m(at,null);l(p,wt),l(p,st),l(st,W),ft(Z,W,null),l(p,Dt),l(p,F),l(F,X),l(X,rt),l(X,It),l(X,H),kt(H,a[0]),l(F,St),l(F,tt),l(e,Nt),l(e,nt),l(nt,G),mt=!0,At||(Pt=[et(z,"click",a[14]),et(A,"input",a[15]),et(W,"click",a[17]),et(H,"input",a[18]),et(G,"click",a[10]),et(t,"submit",ae(a[10]))],At=!0)},p(d,P){const L={};if(P&33554464&&(L.$$scope={dirty:P,ctx:d}),n.$set(L),(!mt||P&66&&S!==(S=d[6][d[1]]||"")&&D.value!==S)&&(D.value=S),P&4&&kt(A,d[2]),P&8){ot=Yt(d[3]);let w;for(w=0;w<ot.length;w+=1){const ht=Wt(d,ot,w);C[w]?C[w].p(ht,P):(C[w]=Zt(ht),C[w].c(),C[w].m(at,null))}for(;w<C.length;w+=1)C[w].d(1);C.length=ot.length}P&1&&kt(H,d[0])},i(d){mt||(K(n.$$.fragment,d),K(B.$$.fragment,d),K(Z.$$.fragment,d),mt=!0)},o(d){J(n.$$.fragment,d),J(B.$$.fragment,d),J(Z.$$.fragment,d),mt=!1},d(d){d&&f(t),pt(n),pt(B),se(C,d),pt(Z),At=!1,re(Pt)}}}function be(a){let t,e;return t=new me({}),{c(){ut(t.$$.fragment)},l(s){dt(t.$$.fragment,s)},m(s,u){ft(t,s,u),e=!0},p:ne,i(s){e||(K(t.$$.fragment,s),e=!0)},o(s){J(t.$$.fragment,s),e=!1},d(s){pt(t,s)}}}function ge(a){let t;return{c(){t=it("Direct Sale")},l(e){t=ct(e,"Direct Sale")},m(e,s){_t(e,t,s)},d(e){e&&f(t)}}}function ve(a){let t;return{c(){t=it("Invoice")},l(e){t=ct(e,"Invoice")},m(e,s){_t(e,t,s)},d(e){e&&f(t)}}}function $e(a){let t,e,s,u,k,_;function v(r){a[12](r)}let n={name:"justify",value:"direct_sale",$$slots:{default:[ge]},$$scope:{ctx:a}};a[5]!==void 0&&(n.group=a[5]),t=new Kt({props:n}),Xt.push(()=>Qt(t,"group",v));function $(r){a[13](r)}let p={name:"justify",value:"invoice",$$slots:{default:[ve]},$$scope:{ctx:a}};return a[5]!==void 0&&(p.group=a[5]),u=new Kt({props:p}),Xt.push(()=>Qt(u,"group",$)),{c(){ut(t.$$.fragment),s=y(),ut(u.$$.fragment)},l(r){dt(t.$$.fragment,r),s=E(r),dt(u.$$.fragment,r)},m(r,m){ft(t,r,m),_t(r,s,m),ft(u,r,m),_=!0},p(r,m){const T={};m&33554432&&(T.$$scope={dirty:m,ctx:r}),!e&&m&32&&(e=!0,T.group=r[5],Gt(()=>e=!1)),t.$set(T);const I={};m&33554432&&(I.$$scope={dirty:m,ctx:r}),!k&&m&32&&(k=!0,I.group=r[5],Gt(()=>k=!1)),u.$set(I)},i(r){_||(K(t.$$.fragment,r),K(u.$$.fragment,r),_=!0)},o(r){J(t.$$.fragment,r),J(u.$$.fragment,r),_=!1},d(r){r&&f(s),pt(t,r),pt(u,r)}}}function Zt(a){let t,e,s=a[22].info+"",u,k,_,v=a[22].qty+"",n,$,p,r=a[22].amount+"",m,T,I,V=a[22].amount*a[22].qty+"",x,D,S,N,z="remove",B,U,O;function h(){return a[16](a[24])}return{c(){t=i("tr"),e=i("td"),u=it(s),k=y(),_=i("td"),n=it(v),$=y(),p=i("td"),m=it(r),T=y(),I=i("td"),x=it(V),D=y(),S=i("td"),N=i("button"),N.textContent=z,B=y(),this.h()},l(j){t=c(j,"TR",{});var g=b(t);e=c(g,"TD",{class:!0});var A=b(e);u=ct(A,s),A.forEach(f),k=E(g),_=c(g,"TD",{class:!0});var lt=b(_);n=ct(lt,v),lt.forEach(f),$=E(g),p=c(g,"TD",{class:!0});var q=b(p);m=ct(q,r),q.forEach(f),T=E(g),I=c(g,"TD",{class:!0});var R=b(I);x=ct(R,V),R.forEach(f),D=E(g),S=c(g,"TD",{class:!0});var M=b(S);N=c(M,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(N)!=="svelte-z6zj73"&&(N.textContent=z),M.forEach(f),B=E(g),g.forEach(f),this.h()},h(){o(e,"class","px-4 py-2 border"),o(_,"class","px-4 py-2 text-right border tabular-nums slashed-zero"),o(p,"class","px-4 py-2 text-right border tabular-nums slashed-zero"),o(I,"class","px-4 py-2 text-right border tabular-nums slashed-zero"),o(N,"class","hover:underline text-warning-800 text-xs"),o(S,"class","px-4 py-2 text-right border tabular-nums slashed-zero")},m(j,g){_t(j,t,g),l(t,e),l(e,u),l(t,k),l(t,_),l(_,n),l(t,$),l(t,p),l(p,m),l(t,T),l(t,I),l(I,x),l(t,D),l(t,S),l(S,N),l(t,B),U||(O=et(N,"click",h),U=!0)},p(j,g){a=j,g&8&&s!==(s=a[22].info+"")&&Tt(u,s),g&8&&v!==(v=a[22].qty+"")&&Tt(n,v),g&8&&r!==(r=a[22].amount+"")&&Tt(m,r),g&8&&V!==(V=a[22].amount*a[22].qty+"")&&Tt(x,V)},d(j){j&&f(t),U=!1,O()}}}function xe(a){let t,e,s,u;const k=[be,he],_=[];function v(n,$){return n[4]?0:1}return t=v(a),e=_[t]=k[t](a),{c(){e.c(),s=Ft()},l(n){e.l(n),s=Ft()},m(n,$){_[t].m(n,$),_t(n,s,$),u=!0},p(n,[$]){let p=t;t=v(n),t===p?_[t].p(n,$):(ue(),J(_[p],1,1,()=>{_[p]=null}),ce(),e=_[t],e?e.p(n,$):(e=_[t]=k[t](n),e.c()),K(e,1),e.m(s.parentNode,s))},i(n){u||(K(e),u=!0)},o(n){J(e),u=!1},d(n){n&&f(s),_[t].d(n)}}}function ye(a,t,e){let s,u;ee(a,fe,h=>e(19,u=h));const k=u.params.pid,_=de(le("__api__")),v=pe();let n="",$=0,p=new Date().toISOString().slice(0,16),r=[],m=[],T=!0;(async()=>{e(4,T=!0);const h=await _.listContacts(k);h.status===200&&(e(11,m=h.data),e(4,T=!1))})();const V=async()=>{};let x="invoice";function D(h){x=h,e(5,x)}function S(h){x=h,e(5,x)}const N=()=>{v.trigger({type:"component",component:"books_client_picker",meta:{api:_,pid:k,onSelect:h=>{e(1,$=h.id||0)}}})};function z(){p=this.value,e(2,p)}const B=h=>{r.splice(h,1),e(3,r)},U=()=>{v.trigger({type:"component",component:"books_sales_item_pick",meta:{api:_,pid:k,onSave:h=>{r.push(h),e(3,r)}}})};function O(){n=this.value,e(0,n)}return a.$$.update=()=>{a.$$.dirty&2048&&e(6,s=m.reduce((h,j)=>{const g=j.id,A=j.name;return h[g]=A,h},{}))},[n,$,p,r,T,x,s,k,_,v,V,m,D,S,N,z,B,U,O]}class Le extends oe{constructor(t){super(),ie(this,t,ye,xe,te,{})}}export{Le as component};
