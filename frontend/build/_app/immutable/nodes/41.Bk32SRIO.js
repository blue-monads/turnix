import{a as i,t as c}from"../chunks/disclose-version.wcsHG7oF.js";import{p as y,g as k,i as u,f as A,a as C,h as p,s as N,b as n,c as w,e as x,r as P,d as j}from"../chunks/runtime.D6lgFUio.js";import{i as z}from"../chunks/if.lkQ-IRrr.js";import{s as B}from"../chunks/attributes.BFGPVQjG.js";import{p as _}from"../chunks/proxy.r5-P5EHK.js";import{s as I,a as L}from"../chunks/store.BaapSzAp.js";import{g as S}from"../chunks/entry.Y6HcnCx3.js";import{p as q}from"../chunks/stores.D4Dcgzbh.js";import{N as D}from"../chunks/index.Duto3aX0.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.DbB_HC5r.js";import{A as E}from"../chunks/AppBar.3srT6C5i.js";import{S as T}from"../chunks/SvgIcon.Cj01WnO8.js";import"../chunks/auto_form.CxbPX2mo.js";import{A as F}from"../chunks/autotable.D6q4cofd.js";import"../chunks/index.BXdKDRLQ.js";import{L as G}from"../chunks/loader.BeY12cOT.js";var H=c('<ol class="breadcrumb"><li class="crumb"><a class="anchor" href="/z/pages/portal/projects/books">Books</a></li> <li class="crumb-separator" aria-hidden="">&rsaquo;</li> <li class="crumb">Contacts</li></ol>'),J=c('<a class="btn variant-ghost-primary btn-sm"><!> Contact</a>'),K=c("<!> <!>",1);function na(b,v){y(v,!0);const $=I(),s=L(q,"$page",$).params.pid,m=D(k("__api__"));let o=u(!0),l=u(_([]));const d=async()=>{p(o,!0);const a=await m.listContacts(s);a.status===200&&(p(l,_(a.data)),p(o,!1))};d();var f=K(),g=A(f);E(g,{$$slots:{lead:(a,r)=>{var t=H();i(a,t)},trail:(a,r)=>{var t=J();B(t,"href",`/z/pages/portal/projects/books/${s}/contacts/new`);var e=w(t);T(e,{className:"h-4 w-4",name:"plus"}),x(),P(t),i(a,t)}}});var h=N(g,2);z(h,()=>n(o),a=>{G(a,{})},a=>{var r=j(()=>[{Name:"edit",Class:"variant-filled-primary",Action:async(t,e)=>{S(`/z/pages/portal/projects/books/${s}/contacts/edit?cid=${t}`)}},{Name:"delete",Class:"variant-filled-error",Action:async(t,e)=>{(await m.deleteContact(s,t)).status===200&&d()}}]);F(a,{action_key:"id",key_names:[["id","ID"],["name","Name"],["ctype","Type"],["email","Email"],["phone","Phone"]],get datas(){return n(l)},color:["ctype"],get actions(){return n(r)}})}),i(b,f),C()}export{na as component};
