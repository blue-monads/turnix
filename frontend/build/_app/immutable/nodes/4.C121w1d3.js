import{s as R,a as A,e as w,t as W,g as S,c as j,b as E,d as X,f as m,m as _,i as y,h as b,q as te,k as T,r as le,v as D,n as Y,w as U,j as se,l as ae,u as re,o as oe,p as ne,x as ie}from"../chunks/scheduler.D2OtNeTK.js";import{S as fe,i as ce,c as V,b as q,m as F,a as z,d as Z,t as N,e as H,g as ee}from"../chunks/index.DD9KLV65.js";import{e as x}from"../chunks/each.D6YF6ztN.js";import{p as pe}from"../chunks/index.BURjlDwe.js";import{S as M}from"../chunks/SvgIcon.DW0uSnC-.js";import{g as ue}from"../chunks/stores.BSAXtruD.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.B6Y8wNrO.js";import{A as me}from"../chunks/AppBar.C3Ur4xTI.js";import{p as _e}from"../chunks/stores.D0bQ952I.js";function G(n,l,a){const e=n.slice();return e[11]=l[a],e[13]=a,e}function de(n){let l,a="Project Files";return{c(){l=w("h4"),l.textContent=a,this.h()},l(e){l=j(e,"H4",{class:!0,"data-svelte-h":!0}),D(l)!=="svelte-qxvb07"&&(l.textContent=a),this.h()},h(){_(l,"class","h4")},m(e,t){y(e,l,t)},p:Y,d(e){e&&m(l)}}}function J(n){let l,a,e,t,r,h="Upload",$,k,c,o,i,g,I="Folder",p,u,C;return e=new M({props:{name:"cloud-arrow-up",className:"h-4 w-4"}}),o=new M({props:{name:"folder-plus",className:"h-4 w4"}}),{c(){l=w("div"),a=w("a"),V(e.$$.fragment),t=A(),r=w("span"),r.textContent=h,k=A(),c=w("button"),V(o.$$.fragment),i=A(),g=w("span"),g.textContent=I,this.h()},l(s){l=j(s,"DIV",{class:!0});var f=E(l);a=j(f,"A",{href:!0,class:!0});var v=E(a);q(e.$$.fragment,v),t=S(v),r=j(v,"SPAN",{class:!0,"data-svelte-h":!0}),D(r)!=="svelte-1h4fdy2"&&(r.textContent=h),v.forEach(m),k=S(f),c=j(f,"BUTTON",{class:!0});var d=E(c);q(o.$$.fragment,d),i=S(d),g=j(d,"SPAN",{class:!0,"data-svelte-h":!0}),D(g)!=="svelte-1des60x"&&(g.textContent=I),d.forEach(m),f.forEach(m),this.h()},h(){_(r,"class","hidden md:inline"),_(a,"href",$="/z/pages/portal/project/files/"+n[3]+"/upload?folder="+n[0].folder),_(a,"class","btn btn-sm variant-filled"),_(g,"class","hidden md:inline"),_(c,"class","btn btn-sm variant-filled-primary"),_(l,"class","flex flex-row gap-1")},m(s,f){y(s,l,f),b(l,a),F(e,a,null),b(a,t),b(a,r),b(l,k),b(l,c),F(o,c,null),b(c,i),b(c,g),p=!0,u||(C=ie(c,"click",n[7]),u=!0)},p(s,f){(!p||f&1&&$!==($="/z/pages/portal/project/files/"+s[3]+"/upload?folder="+s[0].folder))&&_(a,"href",$)},i(s){p||(N(e.$$.fragment,s),N(o.$$.fragment,s),p=!0)},o(s){z(e.$$.fragment,s),z(o.$$.fragment,s),p=!1},d(s){s&&m(l),H(e),H(o),u=!1,C()}}}function he(n){let l,a,e=!n[0].file&&J(n);return{c(){e&&e.c(),l=U()},l(t){e&&e.l(t),l=U()},m(t,r){e&&e.m(t,r),y(t,l,r),a=!0},p(t,r){t[0].file?e&&(ee(),z(e,1,1,()=>{e=null}),Z()):e?(e.p(t,r),r&1&&N(e,1)):(e=J(t),e.c(),N(e,1),e.m(l.parentNode,l))},i(t){a||(N(e),a=!0)},o(t){z(e),a=!1},d(t){t&&m(l),e&&e.d(t)}}}function K(n){let l,a="/",e,t,r,h=n[11]+"",$,k,c;return{c(){l=w("li"),l.textContent=a,e=A(),t=w("li"),r=w("a"),$=W(h),c=A(),this.h()},l(o){l=j(o,"LI",{class:!0,"aria-hidden":!0,"data-svelte-h":!0}),D(l)!=="svelte-1t7edrb"&&(l.textContent=a),e=S(o),t=j(o,"LI",{class:!0});var i=E(t);r=j(i,"A",{class:!0,href:!0});var g=E(r);$=X(g,h),g.forEach(m),c=S(i),i.forEach(m),this.h()},h(){_(l,"class","crumb-separator"),_(l,"aria-hidden",""),_(r,"class","anchor"),_(r,"href",k="/z/pages/portal/project/files/"+n[3]+"?folder="+n[2].slice(0,n[13]+1).join("/")),_(t,"class","crumb")},m(o,i){y(o,l,i),y(o,e,i),y(o,t,i),b(t,r),b(r,$),b(t,c)},p(o,i){i&4&&h!==(h=o[11]+"")&&se($,h),i&4&&k!==(k="/z/pages/portal/project/files/"+o[3]+"?folder="+o[2].slice(0,o[13]+1).join("/"))&&_(r,"href",k)},d(o){o&&(m(l),m(e),m(t))}}}function Q(n){let l;const a=n[6].default,e=ae(a,n,n[8],null);return{c(){e&&e.c()},l(t){e&&e.l(t)},m(t,r){e&&e.m(t,r),l=!0},p(t,r){e&&e.p&&(!l||r&256)&&re(e,a,t,t[8],l?ne(a,t[8],r,null):oe(t[8]),null)},i(t){l||(N(e,t),l=!0)},o(t){z(e,t),l=!1},d(t){e&&e.d(t)}}}function ve(n){let l,a,e,t,r,h,$,k,c,o,i,g=n[1],I;l=new me({props:{$$slots:{trail:[he],lead:[de]},$$scope:{ctx:n}}});let p=x(n[2]),u=[];for(let s=0;s<p.length;s+=1)u[s]=K(G(n,p,s));let C=Q(n);return{c(){V(l.$$.fragment),a=A(),e=w("div"),t=w("ol"),r=w("li"),h=w("a"),$=W("Home"),k=A();for(let s=0;s<u.length;s+=1)u[s].c();c=A(),o=w("div"),i=w("div"),C.c(),this.h()},l(s){q(l.$$.fragment,s),a=S(s),e=j(s,"DIV",{class:!0});var f=E(e);t=j(f,"OL",{class:!0});var v=E(t);r=j(v,"LI",{class:!0});var d=E(r);h=j(d,"A",{class:!0,href:!0});var L=E(h);$=X(L,"Home"),L.forEach(m),d.forEach(m),k=S(v);for(let P=0;P<u.length;P+=1)u[P].l(v);v.forEach(m),f.forEach(m),c=S(s),o=j(s,"DIV",{class:!0});var B=E(o);i=j(B,"DIV",{class:!0});var O=E(i);C.l(O),O.forEach(m),B.forEach(m),this.h()},h(){_(h,"class","anchor"),_(h,"href","/z/pages/portal/project/files/"+n[3]),_(r,"class","crumb"),_(t,"class","breadcrumb"),_(e,"class","flex justify-between p-2 pl-4"),_(i,"class","card p-2 h-full"),_(o,"class","px-2 h-full")},m(s,f){F(l,s,f),y(s,a,f),y(s,e,f),b(e,t),b(t,r),b(r,h),b(h,$),b(t,k);for(let v=0;v<u.length;v+=1)u[v]&&u[v].m(t,null);y(s,c,f),y(s,o,f),b(o,i),C.m(i,null),I=!0},p(s,[f]){const v={};if(f&257&&(v.$$scope={dirty:f,ctx:s}),l.$set(v),f&12){p=x(s[2]);let d;for(d=0;d<p.length;d+=1){const L=G(s,p,d);u[d]?u[d].p(L,f):(u[d]=K(L),u[d].c(),u[d].m(t,null))}for(;d<u.length;d+=1)u[d].d(1);u.length=p.length}f&2&&R(g,g=s[1])?(ee(),z(C,1,1,Y),Z(),C=Q(s),C.c(),N(C,1),C.m(i,null)):C.p(s,f)},i(s){I||(N(l.$$.fragment,s),N(C),I=!0)},o(s){z(l.$$.fragment,s),z(C),I=!1},d(s){s&&(m(a),m(e),m(c),m(o)),H(l,s),te(u,s),C.d(s)}}}function ge(n,l,a){let e,t,r,h;T(n,pe,p=>a(0,r=p)),T(n,_e,p=>a(9,h=p));let{$$slots:$={},$$scope:k}=l;const c=h.params.pid,o=ue(),i=le("__api__"),g=async p=>{await i.addProjectFolder(c,p,r.folder),a(1,t=t+1)},I=()=>{o.trigger({type:"component",component:"new_folder_panel",meta:{onNewName:g}})};return n.$$set=p=>{"$$scope"in p&&a(8,k=p.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&a(2,e=(r.folder||"").split("/"))},a(1,t=1),[r,t,e,c,o,g,$,I,k]}class Ne extends fe{constructor(l){super(),ce(this,l,ge,ve,R,{})}}export{Ne as component};
