import{s as E,w as d,i as $,f as w,k as g,r as h,n as A}from"../chunks/scheduler.D2OtNeTK.js";import{S as L,i as N,a as i,d as S,t as u,g as C,c as k,b as y,m as b,e as T}from"../chunks/index.DD9KLV65.js";import{A as X}from"../chunks/auto_form.FPf_zM_P.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.B6Y8wNrO.js";import{L as P}from"../chunks/loader.zv9XVPa1.js";import{f as U}from"../chunks/route.CWj9Z-1C.js";import{p as q}from"../chunks/index.BURjlDwe.js";import{N as K}from"../chunks/index.B_G37SEf.js";import{p as O}from"../chunks/stores.D0bQ952I.js";function V(s){let t,o;return t=new X({props:{data:s[2],message:s[0],schema:{fields:[{ftype:"TEXT",key_name:"name",name:"Name"},{ftype:"KEY_VALUE_TEXT",key_name:"contents",name:"Contents"},{ftype:"KEY_VALUE_TEXT",key_name:"result",name:"Result"},{ftype:"LONG_TEXT",key_name:"contentScript",name:"Content script"}],name:"Edit Template",required_fields:["name"]},onSave:s[6]}}),{c(){k(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,n){b(t,e,n),o=!0},p(e,n){const m={};n&4&&(m.data=e[2]),n&1&&(m.message=e[0]),n&1&&(m.onSave=e[6]),t.$set(m)},i(e){o||(u(t.$$.fragment,e),o=!0)},o(e){i(t.$$.fragment,e),o=!1},d(e){T(t,e)}}}function Y(s){let t,o;return t=new P({}),{c(){k(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,n){b(t,e,n),o=!0},p:A,i(e){o||(u(t.$$.fragment,e),o=!0)},o(e){i(t.$$.fragment,e),o=!1},d(e){T(t,e)}}}function j(s){let t,o,e,n;const m=[Y,V],r=[];function f(a,p){return a[1]?0:1}return t=f(s),o=r[t]=m[t](s),{c(){o.c(),e=d()},l(a){o.l(a),e=d()},m(a,p){r[t].m(a,p),$(a,e,p),n=!0},p(a,[p]){let l=t;t=f(a),t===l?r[t].p(a,p):(C(),i(r[l],1,1,()=>{r[l]=null}),S(),o=r[t],o?o.p(a,p):(o=r[t]=m[t](a),o.c()),u(o,1),o.m(e.parentNode,e))},i(a){n||(u(o),n=!0)},o(a){i(o),n=!1},d(a){a&&w(e),r[t].d(a)}}}function G(s,t,o){let e,n;g(s,q,c=>o(7,e=c)),g(s,O,c=>o(8,n=c));const m=K(h("__api__"));let r=n.params.pid,f=e.tid,a="",p=!0,l={};return(async()=>{o(1,p=!0);const c=await m.getTemplate(r,f);c.status===200&&(o(2,l=c.data),o(1,p=!1))})(),[a,p,l,m,r,f,async c=>{const _=await m.updateTemplate(r,f,c);if(_.status!==200){o(0,a=_.data);return}U(r)}]}class Z extends L{constructor(t){super(),N(this,t,G,j,E,{})}}export{Z as component};
