import{s as w,w as g,i as h,f as C,k as d,r as N,n as T}from"../chunks/scheduler.D2OtNeTK.js";import{S as A,i as E,a as u,d as L,t as l,g as S,c as b,b as k,m as y,e as $}from"../chunks/index.DD9KLV65.js";import{N as q}from"../chunks/index.ZlEQwogg.js";import{p as I}from"../chunks/stores.D0bQ952I.js";import{A as P}from"../chunks/auto_form.FPf_zM_P.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.B6Y8wNrO.js";import{L as X}from"../chunks/loader.zv9XVPa1.js";import{g as j}from"../chunks/entry.C8cUSds7.js";import{p as z}from"../chunks/index.BURjlDwe.js";function B(s){let e,o;return e=new P({props:{message:s[0],data:s[1],schema:{fields:[{name:"Name",ftype:"TEXT",key_name:"name"},{name:"Info",ftype:"LONG_TEXT",key_name:"info"}],name:"Edit Catagory",required_fields:["name"]},onSave:s[3]}}),{c(){b(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,r){y(e,t,r),o=!0},p(t,r){const m={};r&1&&(m.message=t[0]),r&2&&(m.data=t[1]),e.$set(m)},i(t){o||(l(e.$$.fragment,t),o=!0)},o(t){u(e.$$.fragment,t),o=!1},d(t){$(e,t)}}}function G(s){let e,o;return e=new X({}),{c(){b(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,r){y(e,t,r),o=!0},p:T,i(t){o||(l(e.$$.fragment,t),o=!0)},o(t){u(e.$$.fragment,t),o=!1},d(t){$(e,t)}}}function O(s){let e,o,t,r;const m=[G,B],n=[];function f(a,c){return a[2]?0:1}return e=f(s),o=n[e]=m[e](s),{c(){o.c(),t=g()},l(a){o.l(a),t=g()},m(a,c){n[e].m(a,c),h(a,t,c),r=!0},p(a,[c]){let p=e;e=f(a),e===p?n[e].p(a,c):(S(),u(n[p],1,1,()=>{n[p]=null}),L(),o=n[e],o?o.p(a,c):(o=n[e]=m[e](a),o.c()),l(o,1),o.m(t.parentNode,t))},i(a){r||(l(o),r=!0)},o(a){u(o),r=!1},d(a){a&&C(t),n[e].d(a)}}}function D(s,e,o){let t,r;d(s,z,i=>o(4,t=i)),d(s,I,i=>o(5,r=i));const m=r.params.pid,n=t.cid,f=q(N("__api__"));let a="",c,p=!0;return(async()=>{o(2,p=!0);const i=await f.getCatagory(m,n);i.status===200&&(o(1,c=i.data),o(2,p=!1))})(),[a,c,p,async i=>{const _=await f.updateCatagory(m,n,i);if(_.status!==200){o(0,a=_.data.message);return}j(`/z/pages/portal/projects/books/${m}/inventory/catagories`)}]}class Z extends A{constructor(e){super(),E(this,e,D,O,w,{})}}export{Z as component};
