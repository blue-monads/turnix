import{s as Se,e as i,a as x,t as ie,c,b,w,g as C,f as d,d as ce,m as p,A as ae,i as N,h as l,n as ue,x as Ie,k as He,q as Me}from"../chunks/scheduler.Dy-hT7lj.js";import{S as Oe,i as De,c as H,b as M,m as z,t as y,a as k,e as B,d as ze,g as Be}from"../chunks/index.jcCBAMyh.js";import{S as se}from"../chunks/SvgIcon.D5ofxCQw.js";import{N as Pe}from"../chunks/index.ZlEQwogg.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.DUTEVMI9.js";import{A as je}from"../chunks/AppBar.C2N-oVhp.js";import{p as qe}from"../chunks/stores.YmkBQNJ3.js";import{A as Ve}from"../chunks/autotable.DAXKCWtn.js";import{L as Fe}from"../chunks/loader.DwCv7VNw.js";import{g as Re}from"../chunks/entry.Cp0zZRwk.js";function Ue(h){let e,s,t,r='<h4 class="h4">Sales Filter</h4>',a,u,_,o,v,n="Date range",m,$,f='<span class="w-24">From</span> <input class="input" type="datetime-local"/>',g,E,W='<span class="w-24">To</span> <input class="input" type="datetime-local"/>',fe,G,L,A,be="1 Hour",I,ge="1 Day",S,xe="1 Week",O,Ce="1 Month",D,we="3 Month",pe,J,P,K,Ee="Client",me,j,Q,de,X,V,_e,F,Te='<span>Show Deleted</span> <input type="checkbox" class="checkbox ml-2"/>',ve,Y,R,U,$e,le;return V=new se({props:{className:"h-4 w-4",name:"plus"}}),U=new se({props:{className:"h-4 w-4",name:"bolt"}}),{c(){e=i("div"),s=i("div"),t=i("header"),t.innerHTML=r,a=x(),u=i("section"),_=i("div"),o=i("div"),v=i("span"),v.textContent=n,m=x(),$=i("label"),$.innerHTML=f,g=x(),E=i("label"),E.innerHTML=W,fe=x(),G=i("label"),L=i("select"),A=i("option"),A.textContent=be,I=i("option"),I.textContent=ge,S=i("option"),S.textContent=xe,O=i("option"),O.textContent=Ce,D=i("option"),D.textContent=we,pe=x(),J=i("div"),P=i("label"),K=i("span"),K.textContent=Ee,me=x(),j=i("div"),Q=i("input"),de=x(),X=i("button"),H(V.$$.fragment),_e=x(),F=i("label"),F.innerHTML=Te,ve=x(),Y=i("footer"),R=i("button"),H(U.$$.fragment),$e=ie(`

                Run`),this.h()},l(T){e=c(T,"DIV",{class:!0});var ne=b(e);s=c(ne,"DIV",{class:!0});var Z=b(s);t=c(Z,"HEADER",{class:!0,"data-svelte-h":!0}),w(t)!=="svelte-1xzr5hx"&&(t.innerHTML=r),a=C(Z),u=c(Z,"SECTION",{class:!0});var ye=b(u);_=c(ye,"DIV",{class:!0});var ee=b(_);o=c(ee,"DIV",{class:!0});var q=b(o);v=c(q,"SPAN",{class:!0,"data-svelte-h":!0}),w(v)!=="svelte-ignbmn"&&(v.textContent=n),m=C(q),$=c(q,"LABEL",{class:!0,"data-svelte-h":!0}),w($)!=="svelte-9s79eg"&&($.innerHTML=f),g=C(q),E=c(q,"LABEL",{class:!0,"data-svelte-h":!0}),w(E)!=="svelte-1bulanh"&&(E.innerHTML=W),fe=C(q),G=c(q,"LABEL",{class:!0});var ke=b(G);L=c(ke,"SELECT",{class:!0});var te=b(L);A=c(te,"OPTION",{"data-svelte-h":!0}),w(A)!=="svelte-15gq1kv"&&(A.textContent=be),I=c(te,"OPTION",{"data-svelte-h":!0}),w(I)!=="svelte-xc3amt"&&(I.textContent=ge),S=c(te,"OPTION",{"data-svelte-h":!0}),w(S)!=="svelte-tqzzyd"&&(S.textContent=xe),O=c(te,"OPTION",{"data-svelte-h":!0}),w(O)!=="svelte-usqu4l"&&(O.textContent=Ce),D=c(te,"OPTION",{"data-svelte-h":!0}),w(D)!=="svelte-lw4zin"&&(D.textContent=we),te.forEach(d),ke.forEach(d),q.forEach(d),pe=C(ee),J=c(ee,"DIV",{class:!0});var Le=b(J);P=c(Le,"LABEL",{class:!0});var re=b(P);K=c(re,"SPAN",{"data-svelte-h":!0}),w(K)!=="svelte-mt7s9t"&&(K.textContent=Ee),me=C(re),j=c(re,"DIV",{class:!0});var oe=b(j);Q=c(oe,"INPUT",{type:!0,class:!0,placeholder:!0}),de=C(oe),X=c(oe,"BUTTON",{class:!0});var Ne=b(X);M(V.$$.fragment,Ne),Ne.forEach(d),oe.forEach(d),re.forEach(d),Le.forEach(d),_e=C(ee),F=c(ee,"LABEL",{class:!0,"data-svelte-h":!0}),w(F)!=="svelte-10935j0"&&(F.innerHTML=Te),ee.forEach(d),ye.forEach(d),ve=C(Z),Y=c(Z,"FOOTER",{class:!0});var Ae=b(Y);R=c(Ae,"BUTTON",{class:!0});var he=b(R);M(U.$$.fragment,he),$e=ce(he,`

                Run`),he.forEach(d),Ae.forEach(d),Z.forEach(d),ne.forEach(d),this.h()},h(){p(t,"class","card-header"),p(v,"class","font-medium"),p($,"class","label flex"),p(E,"class","label flex"),A.__value="",ae(A,A.__value),I.__value="",ae(I,I.__value),S.__value="",ae(S,S.__value),O.__value="",ae(O,O.__value),D.__value="",ae(D,D.__value),p(L,"class","select"),p(G,"class","label"),p(o,"class","flex flex-col gap-1"),p(Q,"type","text"),p(Q,"class","input p-1"),p(Q,"placeholder","Client"),p(X,"class","btn btn-sm variant-filled"),p(j,"class","flex gap-2"),p(P,"class","label"),p(J,"class","flex flex-col"),p(F,"class","label inline-flex"),p(_,"class","flex gap-2 items-center flex-wrap"),p(u,"class","pl-4 py-2 flex justify-between items-center flex-wrap gap-2"),p(R,"class","btn btn-sm variant-filled disabled:variant-ghost disabled:text-slate-800"),p(Y,"class","card-footer flex justify-end"),p(s,"class","card"),p(e,"class","p-2")},m(T,ne){N(T,e,ne),l(e,s),l(s,t),l(s,a),l(s,u),l(u,_),l(_,o),l(o,v),l(o,m),l(o,$),l(o,g),l(o,E),l(o,fe),l(o,G),l(G,L),l(L,A),l(L,I),l(L,S),l(L,O),l(L,D),l(_,pe),l(_,J),l(J,P),l(P,K),l(P,me),l(P,j),l(j,Q),l(j,de),l(j,X),z(V,X,null),l(_,_e),l(_,F),l(s,ve),l(s,Y),l(Y,R),z(U,R,null),l(R,$e),le=!0},p:ue,i(T){le||(y(V.$$.fragment,T),y(U.$$.fragment,T),le=!0)},o(T){k(V.$$.fragment,T),k(U.$$.fragment,T),le=!1},d(T){T&&d(e),B(V),B(U)}}}class We extends Oe{constructor(e){super(),De(this,e,null,Ue,Se,{})}}function Ge(h){let e,s='<li class="crumb"><a class="anchor" href="/z/pages/portal/projects/books">Books</a></li> <li class="crumb-separator" aria-hidden="">â€º</li> <li class="crumb">Sales</li>';return{c(){e=i("ol"),e.innerHTML=s,this.h()},l(t){e=c(t,"OL",{class:!0,"data-svelte-h":!0}),w(e)!=="svelte-q69zr7"&&(e.innerHTML=s),this.h()},h(){p(e,"class","breadcrumb")},m(t,r){N(t,e,r)},p:ue,d(t){t&&d(e)}}}function Je(h){let e,s,t,r,a,u,_,o,v,n,m,$;return s=new se({props:{className:"h-4 w-4",name:"plus"}}),u=new se({props:{className:"h-4 w-4 mr-1",name:"document"}}),n=new se({props:{className:"h-4 w-4 mr-1",name:"document-text"}}),{c(){e=i("a"),H(s.$$.fragment),t=ie(`
            Sale`),r=x(),a=i("a"),H(u.$$.fragment),_=ie(`

            Estimates`),o=x(),v=i("a"),H(n.$$.fragment),m=ie(`

            Invoices`),this.h()},l(f){e=c(f,"A",{href:!0,class:!0});var g=b(e);M(s.$$.fragment,g),t=ce(g,`
            Sale`),g.forEach(d),r=C(f),a=c(f,"A",{href:!0,class:!0});var E=b(a);M(u.$$.fragment,E),_=ce(E,`

            Estimates`),E.forEach(d),o=C(f),v=c(f,"A",{href:!0,class:!0});var W=b(v);M(n.$$.fragment,W),m=ce(W,`

            Invoices`),W.forEach(d),this.h()},h(){p(e,"href",`/z/pages/portal/projects/books/${h[2]}/sales/new`),p(e,"class","btn variant-ghost-primary btn-sm"),p(a,"href",`/z/pages/portal/projects/books/${h[2]}/sales/estimates`),p(a,"class","btn variant-filled-secondary btn-sm"),p(v,"href",`/z/pages/portal/projects/books/${h[2]}/sales/invoice`),p(v,"class","btn variant-filled btn-sm")},m(f,g){N(f,e,g),z(s,e,null),l(e,t),N(f,r,g),N(f,a,g),z(u,a,null),l(a,_),N(f,o,g),N(f,v,g),z(n,v,null),l(v,m),$=!0},p:ue,i(f){$||(y(s.$$.fragment,f),y(u.$$.fragment,f),y(n.$$.fragment,f),$=!0)},o(f){k(s.$$.fragment,f),k(u.$$.fragment,f),k(n.$$.fragment,f),$=!1},d(f){f&&(d(e),d(r),d(a),d(o),d(v)),B(s),B(u),B(n)}}}function Ke(h){let e,s,t,r;return e=new We({}),t=new Ve({props:{action_key:"id",key_names:[["id","ID"],["title","Title"],["notes","Notes"],["client_name","Client"],["total","Total"],["created_at","Created At"],["updated_at","Updated At"]],datas:h[0],color:["ctype"],actions:[{Name:"preview",Class:"variant-filled-primary",Action:h[5]},{Name:"options",Class:"variant-filled-secondary",Action:Ye},{Name:"delete",Class:"variant-filled-error",Action:h[6]}]}}),{c(){H(e.$$.fragment),s=x(),H(t.$$.fragment)},l(a){M(e.$$.fragment,a),s=C(a),M(t.$$.fragment,a)},m(a,u){z(e,a,u),N(a,s,u),z(t,a,u),r=!0},p(a,u){const _={};u&1&&(_.datas=a[0]),t.$set(_)},i(a){r||(y(e.$$.fragment,a),y(t.$$.fragment,a),r=!0)},o(a){k(e.$$.fragment,a),k(t.$$.fragment,a),r=!1},d(a){a&&d(s),B(e,a),B(t,a)}}}function Qe(h){let e,s;return e=new Fe({}),{c(){H(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,r){z(e,t,r),s=!0},p:ue,i(t){s||(y(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function Xe(h){let e,s,t,r,a,u;e=new je({props:{$$slots:{trail:[Je],lead:[Ge]},$$scope:{ctx:h}}});const _=[Qe,Ke],o=[];function v(n,m){return n[1]?0:1}return t=v(h),r=o[t]=_[t](h),{c(){H(e.$$.fragment),s=x(),r.c(),a=Ie()},l(n){M(e.$$.fragment,n),s=C(n),r.l(n),a=Ie()},m(n,m){z(e,n,m),N(n,s,m),o[t].m(n,m),N(n,a,m),u=!0},p(n,[m]){const $={};m&256&&($.$$scope={dirty:m,ctx:n}),e.$set($);let f=t;t=v(n),t===f?o[t].p(n,m):(Be(),k(o[f],1,1,()=>{o[f]=null}),ze(),r=o[t],r?r.p(n,m):(r=o[t]=_[t](n),r.c()),y(r,1),r.m(a.parentNode,a))},i(n){u||(y(e.$$.fragment,n),y(r),u=!0)},o(n){k(e.$$.fragment,n),k(r),u=!1},d(n){n&&(d(s),d(a)),B(e,n),o[t].d(n)}}}const Ye=async h=>{};function Ze(h,e,s){let t;He(h,qe,m=>s(7,t=m));const r=t.params.pid,a=Pe(Me("__api__"));let u=[],_=!0;const o=async()=>{s(1,_=!0);const m=await a.listSales(r);m.status===200&&(s(0,u=(m.data||[]).map($=>({...$,created_at:new Date($.created_at).toISOString(),updated_at:new Date($.updated_at).toISOString()}))),s(1,_=!1))};return o(),[u,_,r,a,o,async m=>{Re(`/z/pages/portal/projects/books/${r}/sales/preview?sid=${m}`)},async m=>{(await a.deleteSale(r,m)).status===200&&o()}]}class ut extends Oe{constructor(e){super(),De(this,e,Ze,Xe,Se,{})}}export{ut as component};
