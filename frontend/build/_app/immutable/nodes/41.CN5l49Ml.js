import{s as L,a as S,x as v,g as j,i as d,f as u,k as x,q as z,e as A,c as N,w as B,m as w,n as C,t as I,b as P,d as T,h as q}from"../chunks/scheduler.BSMlFrmR.js";import{S as E,i as H,c as g,b,m as h,a as p,d as M,t as m,e as k,g as D}from"../chunks/index.DIQEG9mn.js";import{g as O}from"../chunks/entry.DdBPhNA2.js";import{p as F}from"../chunks/stores.Ct4hmiyJ.js";import{N as G}from"../chunks/index.Duto3aX0.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.CPOc6-8_.js";import{A as J}from"../chunks/AppBar.DjVK2Awi.js";import{S as K}from"../chunks/SvgIcon.DwWRhvCX.js";import{A as Q}from"../chunks/autotable.Cxn6HL1P.js";import{L as R}from"../chunks/loader.BC9BD-QK.js";function U(c){let t,a='<li class="crumb"><a class="anchor" href="/z/pages/portal/projects/books">Books</a></li> <li class="crumb-separator" aria-hidden="">â€º</li> <li class="crumb">Contacts</li>';return{c(){t=A("ol"),t.innerHTML=a,this.h()},l(e){t=N(e,"OL",{class:!0,"data-svelte-h":!0}),B(t)!=="svelte-1sflw48"&&(t.innerHTML=a),this.h()},h(){w(t,"class","breadcrumb")},m(e,s){d(e,t,s)},p:C,d(e){e&&u(t)}}}function V(c){let t,a,e,s;return a=new K({props:{className:"h-4 w-4",name:"plus"}}),{c(){t=A("a"),g(a.$$.fragment),e=I(`
            Contact`),this.h()},l(n){t=N(n,"A",{href:!0,class:!0});var l=P(t);b(a.$$.fragment,l),e=T(l,`
            Contact`),l.forEach(u),this.h()},h(){w(t,"href",`/z/pages/portal/projects/books/${c[2]}/contacts/new`),w(t,"class","btn variant-ghost-primary btn-sm")},m(n,l){d(n,t,l),h(a,t,null),q(t,e),s=!0},p:C,i(n){s||(m(a.$$.fragment,n),s=!0)},o(n){p(a.$$.fragment,n),s=!1},d(n){n&&u(t),k(a)}}}function W(c){let t,a;return t=new Q({props:{action_key:"id",key_names:[["id","ID"],["name","Name"],["ctype","Type"],["email","Email"],["phone","Phone"]],datas:c[1],color:["ctype"],actions:[{Name:"edit",Class:"variant-filled-primary",Action:c[5]},{Name:"delete",Class:"variant-filled-error",Action:c[6]}]}}),{c(){g(t.$$.fragment)},l(e){b(t.$$.fragment,e)},m(e,s){h(t,e,s),a=!0},p(e,s){const n={};s&2&&(n.datas=e[1]),t.$set(n)},i(e){a||(m(t.$$.fragment,e),a=!0)},o(e){p(t.$$.fragment,e),a=!1},d(e){k(t,e)}}}function X(c){let t,a;return t=new R({}),{c(){g(t.$$.fragment)},l(e){b(t.$$.fragment,e)},m(e,s){h(t,e,s),a=!0},p:C,i(e){a||(m(t.$$.fragment,e),a=!0)},o(e){p(t.$$.fragment,e),a=!1},d(e){k(t,e)}}}function Y(c){let t,a,e,s,n,l;t=new J({props:{$$slots:{trail:[V],lead:[U]},$$scope:{ctx:c}}});const f=[X,W],i=[];function y(r,o){return r[0]?0:1}return e=y(c),s=i[e]=f[e](c),{c(){g(t.$$.fragment),a=S(),s.c(),n=v()},l(r){b(t.$$.fragment,r),a=j(r),s.l(r),n=v()},m(r,o){h(t,r,o),d(r,a,o),i[e].m(r,o),d(r,n,o),l=!0},p(r,[o]){const _={};o&256&&(_.$$scope={dirty:o,ctx:r}),t.$set(_);let $=e;e=y(r),e===$?i[e].p(r,o):(D(),p(i[$],1,1,()=>{i[$]=null}),M(),s=i[e],s?s.p(r,o):(s=i[e]=f[e](r),s.c()),m(s,1),s.m(n.parentNode,n))},i(r){l||(m(t.$$.fragment,r),m(s),l=!0)},o(r){p(t.$$.fragment,r),p(s),l=!1},d(r){r&&(u(a),u(n)),k(t,r),i[e].d(r)}}}function Z(c,t,a){let e;x(c,F,o=>a(7,e=o));const s=e.params.pid,n=G(z("__api__"));let l=!0,f=[];const i=async()=>{a(0,l=!0);const o=await n.listContacts(s);o.status===200&&(a(1,f=o.data),a(0,l=!1))};return i(),[l,f,s,n,i,async(o,_)=>{O(`/z/pages/portal/projects/books/${s}/contacts/edit?cid=${o}`)},async(o,_)=>{(await n.deleteContact(s,o)).status===200&&i()}]}class pt extends E{constructor(t){super(),H(this,t,Z,Y,L,{})}}export{pt as component};
