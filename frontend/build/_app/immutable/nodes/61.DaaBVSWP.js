import{a as c,t as L,c as z}from"../chunks/disclose-version.wcsHG7oF.js";import{c as a,s as l,f as j,r as t,b as e,t as F,d as at,p as ot,g as lt,i as E,a as st,h as B,e as Z}from"../chunks/runtime.D6lgFUio.js";import{d as dt}from"../chunks/utils.Dh-XvBAd.js";import{i as U}from"../chunks/if.lkQ-IRrr.js";import{k as tt}from"../chunks/key.Dx7O0vkj.js";import{p as V}from"../chunks/proxy.r5-P5EHK.js";import{b as nt}from"../chunks/select.BfGKzECA.js";import{s as it,a as ct}from"../chunks/store.BaapSzAp.js";import{r as vt}from"../chunks/legacy-client.B7AzNrU7.js";import{S as pt}from"../chunks/SvgIcon.Cj01WnO8.js";import{N as _t}from"../chunks/index.Duto3aX0.js";import{g as mt}from"../chunks/stores.CebXFGJ4.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.DbB_HC5r.js";import{A as ut}from"../chunks/AppBar.3srT6C5i.js";import{p as ht}from"../chunks/stores.D4Dcgzbh.js";import{s as i}from"../chunks/render.CIW-w3Th.js";import{e as W,i as X}from"../chunks/each.CWrzZiCN.js";var bt=L("<tr><td> </td><td> </td><td> </td><td> </td></tr>"),ft=L('<tr><td colspan="5"><span class="font-semibold text-lg"> </span></td></tr> <!> <tr><th colspan="2">Total</th><td> </td><td> </td></tr>',1),gt=L('<div class="table-container h-[calc(100vh-14rem)] overflow-y-auto"><table class="table table-hover h-fit"><thead><tr><th>Txn</th><th>Title</th><th>Debit Amount</th><th>Credit Amount</th></tr></thead><tbody></tbody></table></div>');function xt(T,_){const m=n=>{let r={};return n.forEach(s=>{let o=r[s.account_id];o||(o={account_id:s.account_id,account_name:s.account_name,account_type:s.acc_type,lines:[],total_credit:s.total_credit,total_debit:s.total_debit},r[s.account_id]=o),o.lines.push(s)}),console.log("@after_format",r),r};let h=at(()=>m(_.data));var v=gt(),b=a(v),d=l(a(b));W(d,21,()=>Object.values(e(h)),X,(n,r)=>{var s=ft(),o=j(s),I=a(o),f=a(I),A=a(f);t(f),t(I),t(o);var u=l(o,2);W(u,17,()=>e(r).lines,X,(N,g)=>{var k=bt(),D=a(k),P=a(D);t(D);var x=l(D),M=a(x);t(x);var S=l(x),O=a(S);t(S);var y=l(S),R=a(y);t(y),t(k),F(()=>{i(P,e(g).txn_id),i(M,e(g).title),i(O,e(g).debit_amount),i(R,e(g).credit_amount)}),c(N,k)});var $=l(u,2),p=l(a($)),w=a(p);t(p);var C=l(p),G=a(C);t(C),t($),F(()=>{i(A,e(r).account_name),i(w,e(r).total_debit),i(G,e(r).total_credit)}),c(n,s)}),t(d),t(b),t(v),c(T,v)}var yt=L("<tr><th> </th><td> </td><td> </td><td> </td><td> </td></tr>"),$t=L('<div class="table-container h-[calc(100vh-14rem)] overflow-y-auto"><table class="table table-hover h-fit"><thead><tr><th>Id</th><th>Account</th><th>Account Type</th><th>Debit Total</th><th>Credit Total</th></tr></thead><tbody></tbody></table></div>');function kt(T,_){var m=$t(),h=a(m),v=l(a(h));W(v,21,()=>_.data,X,(b,d)=>{var n=yt(),r=a(n),s=a(r);t(r);var o=l(r),I=a(o);t(o);var f=l(o),A=a(f);t(f);var u=l(f),$=a(u);t(u);var p=l(u),w=a(p);t(p),t(n),F(()=>{i(s,e(d).account_id),i(I,e(d).account_name),i(A,e(d).acc_type),i($,e(d).total_debit),i(w,e(d).total_credit)}),c(b,n)}),t(v),t(h),t(m),c(T,m)}const Lt=async(T,_,m,h,v,b,d,n)=>{B(_,!0),B(m,V(e(h)));const r=await v.generateLiveTxn(b,{report_type:e(h),template_id:d});if(r.status!==200){B(_,!1);return}B(n,V(r.data)),console.log("@data",e(n)),B(_,!1)};var Tt=L('<ol class="breadcrumb"><li class="crumb"><a class="anchor" href="/z/pages/portal/projects/books">Books</a></li> <li class="crumb-separator" aria-hidden="">&rsaquo;</li> <li>Reports</li> <li class="crumb-separator" aria-hidden="">&rsaquo;</li> <li>Live</li></ol>'),At=L('<!> <div class="flex flex-col p-2 gap-2"><div class="card p-2"><header class="card-header"><h4 class="h4">Live Reports</h4></header> <section class="pl-4 py-2 flex justify-between items-center flex-wrap gap-2"><div class="flex gap-2 items-center flex-wrap"><label class="label"><span>Report Type</span> <select class="select"><option>Ledger short</option><option>Ledger long</option><option>Custom</option></select></label> <label class="label"><span>From Date</span> <input class="input" type="datetime-local"></label> <label class="label"><span>To Date</span> <input class="input" type="datetime-local"></label></div> <div><button class="btn btn-sm variant-filled disabled:variant-ghost disabled:text-slate-800"><!> Generate</button></div></section></div> <div class="p-2 card"><!></div></div>',1);function Ht(T,_){ot(_,!0);const m=it(),v=ct(ht,"$page",m).params.pid;mt();const b=_t(lt("__api__"));let d=E(!1),n=0,r=E("short_ledger"),s=E(V(e(r))),o=E(void 0);(async()=>{})();let f=at(()=>e(r)==="custom"&&n===0);vt(()=>{console.log("@data/2",e(o))});var A=At(),u=j(A);ut(u,{$$slots:{lead:(y,R)=>{var H=Tt();c(y,H)}}});var $=l(u,2),p=a($),w=l(a(p),2),C=a(w),G=a(C),N=l(a(G),2),g=a(N);g.value=(g.__value="short_ledger")==null?"":"short_ledger";var k=l(g);k.value=(k.__value="long_ledger")==null?"":"long_ledger";var D=l(k);D.value=(D.__value="custom")==null?"":"custom",t(N),t(G),Z(4),t(C);var P=l(C,2),x=a(P);x.__click=[Lt,d,s,r,b,v,n,o];var M=a(x);pt(M,{className:"h-4 w-4",name:"bolt"}),Z(),t(x),t(P),t(w),t(p);var S=l(p,2),O=a(S);U(O,()=>e(o),y=>{var R=z(),H=j(R);U(H,()=>e(s)==="long_ledger",J=>{var q=z(),K=j(q);tt(K,()=>e(o),Q=>{xt(Q,{get data(){return e(o)}})}),c(J,q)},J=>{var q=z(),K=j(q);U(K,()=>e(s)==="short_ledger",Q=>{var Y=z(),et=j(Y);tt(et,()=>e(o),rt=>{kt(rt,{get data(){return e(o)}})}),c(Q,Y)},null,!0),c(J,q)}),c(y,R)}),t(S),t($),F(()=>x.disabled=e(d)||e(f)),nt(N,()=>e(r),y=>B(r,y)),c(T,A),st()}dt(["click"]);export{Ht as component};
