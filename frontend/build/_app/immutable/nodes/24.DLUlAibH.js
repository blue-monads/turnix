import{s as x,a as q,w as C,g as z,i as h,f as d,k as B,r as I,e as N,c as j,v as L,m as S,n as A,t as T,b as U,d as D,h as E,x as H}from"../chunks/scheduler.D2OtNeTK.js";import{S as M,i as O,c as b,b as k,m as y,a as u,d as R,t as f,e as v,g as F}from"../chunks/index.DD9KLV65.js";import{p as G}from"../chunks/index.BURjlDwe.js";import{S as J}from"../chunks/SvgIcon.DW0uSnC-.js";import{A as K}from"../chunks/autotable.D4yDFDK-.js";import{g as Q}from"../chunks/stores.BSAXtruD.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.B6Y8wNrO.js";import{A as V}from"../chunks/AppBar.C3Ur4xTI.js";import{L as W}from"../chunks/loader.zv9XVPa1.js";import{g as P}from"../chunks/entry.C8cUSds7.js";function X(c){let t,a="Projects Plugins";return{c(){t=N("h4"),t.textContent=a,this.h()},l(e){t=j(e,"H4",{class:!0,"data-svelte-h":!0}),L(t)!=="svelte-idplqr"&&(t.textContent=a),this.h()},h(){S(t,"class","h4")},m(e,n){h(e,t,n)},p:A,d(e){e&&d(t)}}}function Y(c){let t,a,e,n,s,m;return a=new J({props:{name:"plus",className:"w-6 h-6"}}),{c(){t=N("button"),b(a.$$.fragment),e=T(`

            Plugin`),this.h()},l(l){t=j(l,"BUTTON",{class:!0});var o=U(t);k(a.$$.fragment,o),e=D(o,`

            Plugin`),o.forEach(d),this.h()},h(){S(t,"class","btn btn-sm variant-ghost-secondary")},m(l,o){h(l,t,o),y(a,t,null),E(t,e),n=!0,s||(m=H(t,"click",c[5]),s=!0)},p:A,i(l){n||(f(a.$$.fragment,l),n=!0)},o(l){u(a.$$.fragment,l),n=!1},d(l){l&&d(t),v(a),s=!1,m()}}}function Z(c){let t,a;return t=new K({props:{datas:c[0],action_key:"id",key_names:[["id","ID"],["name","Name"],["ptype","type"],["created_at","Created At"],["updated_at","Updated At"]],color:["ptype"],actions:[{Name:"Run",Class:"variant-filled-success",Action:c[6]},{Name:"edit",Class:"variant-filled-primary",Action:c[7]},{Name:"remove",Class:"variant-filled-error",Action:c[4]}]}}),{c(){b(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,n){y(t,e,n),a=!0},p(e,n){const s={};n&1&&(s.datas=e[0]),t.$set(s)},i(e){a||(f(t.$$.fragment,e),a=!0)},o(e){u(t.$$.fragment,e),a=!1},d(e){v(t,e)}}}function tt(c){let t,a;return t=new W({}),{c(){b(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,n){y(t,e,n),a=!0},p:A,i(e){a||(f(t.$$.fragment,e),a=!0)},o(e){u(t.$$.fragment,e),a=!1},d(e){v(t,e)}}}function et(c){let t,a,e,n,s,m;t=new V({props:{$$slots:{trail:[Y],lead:[X]},$$scope:{ctx:c}}});const l=[tt,Z],o=[];function _(r,p){return r[1]?0:1}return e=_(c),n=o[e]=l[e](c),{c(){b(t.$$.fragment),a=q(),n.c(),s=C()},l(r){k(t.$$.fragment,r),a=z(r),n.l(r),s=C()},m(r,p){y(t,r,p),h(r,a,p),o[e].m(r,p),h(r,s,p),m=!0},p(r,[p]){const w={};p&2048&&(w.$$scope={dirty:p,ctx:r}),t.$set(w);let g=e;e=_(r),e===g?o[e].p(r,p):(F(),u(o[g],1,1,()=>{o[g]=null}),R(),n=o[e],n?n.p(r,p):(n=o[e]=l[e](r),n.c()),f(n,1),n.m(s.parentNode,s))},i(r){m||(f(t.$$.fragment,r),f(n),m=!0)},o(r){u(t.$$.fragment,r),u(n),m=!1},d(r){r&&(d(a),d(s)),v(t,r),o[e].d(r)}}}function at(c,t,a){let e;B(c,G,i=>a(8,e=i));const n=I("__api__");let s=e.pid,m=[],l=!0;const o=async()=>{a(1,l=!0);const i=await n.listProjectPlugins(s);i.status===200&&(a(0,m=i.data),a(1,l=!1))};o();const _=Q();return[m,l,s,_,async i=>{(await n.removeProjectPlugin(s,i)).status===200&&o()},()=>{_.trigger({type:"component",component:"project_new_plugin_picker",meta:{pid:s}})},async(i,$)=>{console.log("@run",i,$),P(`/z/pages/portal/project/plugins/run?pid=${s}&id=${i}`)},async(i,$)=>{console.log("@edit",i,$),P(`/z/pages/portal/project/plugins/edit?pid=${s}&id=${i}`)}]}class ft extends M{constructor(t){super(),O(this,t,at,et,x,{})}}export{ft as component};
