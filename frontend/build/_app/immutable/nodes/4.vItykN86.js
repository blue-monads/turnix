import{s as B,a as S,e as $,t as G,g as z,c as k,b as N,d as J,f as c,m as p,i as j,h as g,v as ne,k as R,q as ie,w as q,n as se,x as F,j as ae,l as fe,u as ce,o as ue,p as pe,y as _e}from"../chunks/scheduler.BSMlFrmR.js";import{S as me,i as de,c as O,b as T,m as U,a as P,d as re,t as D,e as M,g as oe}from"../chunks/index.DIQEG9mn.js";import{e as W}from"../chunks/each.D6YF6ztN.js";import{p as he}from"../chunks/index.jNSSX7nP.js";import{S as X}from"../chunks/SvgIcon.DwWRhvCX.js";import{g as ve}from"../chunks/stores.n0Zj223A.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.CPOc6-8_.js";import{A as be}from"../chunks/AppBar.DjVK2Awi.js";import{p as ge}from"../chunks/stores.Ct4hmiyJ.js";function Y(o,t,s){const e=o.slice();return e[12]=t[s],e[14]=s,e}function $e(o){let t,s="Project Files";return{c(){t=$("h4"),t.textContent=s,this.h()},l(e){t=k(e,"H4",{class:!0,"data-svelte-h":!0}),q(t)!=="svelte-qxvb07"&&(t.textContent=s),this.h()},h(){p(t,"class","h4")},m(e,l){j(e,t,l)},p:se,d(e){e&&c(t)}}}function Z(o){let t,s,e,l,r,n="Upload",u,w,i,_,y,d,I="Folder",A,h,L;return e=new X({props:{name:"cloud-arrow-up",className:"h-4 w-4"}}),_=new X({props:{name:"folder-plus",className:"h-4 w4"}}),{c(){t=$("div"),s=$("a"),O(e.$$.fragment),l=S(),r=$("span"),r.textContent=n,w=S(),i=$("button"),O(_.$$.fragment),y=S(),d=$("span"),d.textContent=I,this.h()},l(f){t=k(f,"DIV",{class:!0});var m=N(t);s=k(m,"A",{href:!0,class:!0});var v=N(s);T(e.$$.fragment,v),l=z(v),r=k(v,"SPAN",{class:!0,"data-svelte-h":!0}),q(r)!=="svelte-1h4fdy2"&&(r.textContent=n),v.forEach(c),w=z(m),i=k(m,"BUTTON",{class:!0});var a=N(i);T(_.$$.fragment,a),y=z(a),d=k(a,"SPAN",{class:!0,"data-svelte-h":!0}),q(d)!=="svelte-1des60x"&&(d.textContent=I),a.forEach(c),m.forEach(c),this.h()},h(){p(r,"class","hidden md:inline"),p(s,"href",u="/z/pages/portal/project/files/"+o[4]+"/upload?folder="+(o[0].folder||"")),p(s,"class","btn btn-sm variant-filled"),p(d,"class","hidden md:inline"),p(i,"class","btn btn-sm variant-filled-primary"),p(t,"class","flex flex-row gap-1")},m(f,m){j(f,t,m),g(t,s),U(e,s,null),g(s,l),g(s,r),g(t,w),g(t,i),U(_,i,null),g(i,y),g(i,d),A=!0,h||(L=_e(i,"click",o[8]),h=!0)},p(f,m){(!A||m&1&&u!==(u="/z/pages/portal/project/files/"+f[4]+"/upload?folder="+(f[0].folder||"")))&&p(s,"href",u)},i(f){A||(D(e.$$.fragment,f),D(_.$$.fragment,f),A=!0)},o(f){P(e.$$.fragment,f),P(_.$$.fragment,f),A=!1},d(f){f&&c(t),M(e),M(_),h=!1,L()}}}function ke(o){let t,s,e=!o[0].file&&Z(o);return{c(){e&&e.c(),t=F()},l(l){e&&e.l(l),t=F()},m(l,r){e&&e.m(l,r),j(l,t,r),s=!0},p(l,r){l[0].file?e&&(oe(),P(e,1,1,()=>{e=null}),re()):e?(e.p(l,r),r&1&&D(e,1)):(e=Z(l),e.c(),D(e,1),e.m(t.parentNode,t))},i(l){s||(D(e),s=!0)},o(l){P(e),s=!1},d(l){l&&c(t),e&&e.d(l)}}}function x(o){let t,s="/",e,l,r,n=(o[12]||"")+"",u,w;return{c(){t=$("li"),t.textContent=s,e=S(),l=$("li"),r=$("a"),u=G(n),this.h()},l(i){t=k(i,"LI",{class:!0,"aria-hidden":!0,"data-svelte-h":!0}),q(t)!=="svelte-1t7edrb"&&(t.textContent=s),e=z(i),l=k(i,"LI",{class:!0});var _=N(l);r=k(_,"A",{class:!0,href:!0});var y=N(r);u=J(y,n),y.forEach(c),_.forEach(c),this.h()},h(){p(t,"class","crumb-separator"),p(t,"aria-hidden",""),p(r,"class","anchor"),p(r,"href",w="/z/pages/portal/project/files/"+o[4]+"?folder="+o[3].slice(0,o[14]+1).join("/")),p(l,"class","crumb")},m(i,_){j(i,t,_),j(i,e,_),j(i,l,_),g(l,r),g(r,u)},p(i,_){_&8&&n!==(n=(i[12]||"")+"")&&ae(u,n),_&8&&w!==(w="/z/pages/portal/project/files/"+i[4]+"?folder="+i[3].slice(0,i[14]+1).join("/"))&&p(r,"href",w)},d(i){i&&(c(t),c(e),c(l))}}}function ee(o){let t,s="/",e,l,r;return{c(){t=$("li"),t.textContent=s,e=S(),l=$("li"),r=G(o[2]),this.h()},l(n){t=k(n,"LI",{class:!0,"aria-hidden":!0,"data-svelte-h":!0}),q(t)!=="svelte-1t7edrb"&&(t.textContent=s),e=z(n),l=k(n,"LI",{class:!0});var u=N(l);r=J(u,o[2]),u.forEach(c),this.h()},h(){p(t,"class","crumb-separator"),p(t,"aria-hidden",""),p(l,"class","crumb")},m(n,u){j(n,t,u),j(n,e,u),j(n,l,u),g(l,r)},p(n,u){u&4&&ae(r,n[2])},d(n){n&&(c(t),c(e),c(l))}}}function te(o){let t,s=o[2]&&ee(o);return{c(){s&&s.c(),t=F()},l(e){s&&s.l(e),t=F()},m(e,l){s&&s.m(e,l),j(e,t,l)},p(e,l){e[2]?s?s.p(e,l):(s=ee(e),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(e){e&&c(t),s&&s.d(e)}}}function le(o){let t;const s=o[7].default,e=fe(s,o,o[9],null);return{c(){e&&e.c()},l(l){e&&e.l(l)},m(l,r){e&&e.m(l,r),t=!0},p(l,r){e&&e.p&&(!t||r&512)&&ce(e,s,l,l[9],t?pe(s,l[9],r,null):ue(l[9]),null)},i(l){t||(D(e,l),t=!0)},o(l){P(e,l),t=!1},d(l){e&&e.d(l)}}}function Ce(o){let t,s,e,l,r,n,u,w,i,_=o[2],y,d,I,A=o[1],h;t=new be({props:{$$slots:{trail:[ke],lead:[$e]},$$scope:{ctx:o}}});let L=W(o[3]),f=[];for(let a=0;a<L.length;a+=1)f[a]=x(Y(o,L,a));let m=te(o),v=le(o);return{c(){O(t.$$.fragment),s=S(),e=$("div"),l=$("ol"),r=$("li"),n=$("a"),u=G("Home"),w=S();for(let a=0;a<f.length;a+=1)f[a].c();i=S(),m.c(),y=S(),d=$("div"),I=$("div"),v.c(),this.h()},l(a){T(t.$$.fragment,a),s=z(a),e=k(a,"DIV",{class:!0});var b=N(e);l=k(b,"OL",{class:!0});var E=N(l);r=k(E,"LI",{class:!0});var C=N(r);n=k(C,"A",{class:!0,href:!0});var V=N(n);u=J(V,"Home"),V.forEach(c),C.forEach(c),w=z(E);for(let H=0;H<f.length;H+=1)f[H].l(E);i=z(E),m.l(E),E.forEach(c),b.forEach(c),y=z(a),d=k(a,"DIV",{class:!0});var K=N(d);I=k(K,"DIV",{class:!0});var Q=N(I);v.l(Q),Q.forEach(c),K.forEach(c),this.h()},h(){p(n,"class","anchor"),p(n,"href","/z/pages/portal/project/files/"+o[4]),p(r,"class","crumb"),p(l,"class","breadcrumb"),p(e,"class","flex justify-between p-2 pl-4"),p(I,"class","card p-2 h-full"),p(d,"class","px-2 h-full")},m(a,b){U(t,a,b),j(a,s,b),j(a,e,b),g(e,l),g(l,r),g(r,n),g(n,u),g(l,w);for(let E=0;E<f.length;E+=1)f[E]&&f[E].m(l,null);g(l,i),m.m(l,null),j(a,y,b),j(a,d,b),g(d,I),v.m(I,null),h=!0},p(a,[b]){const E={};if(b&513&&(E.$$scope={dirty:b,ctx:a}),t.$set(E),b&24){L=W(a[3]);let C;for(C=0;C<L.length;C+=1){const V=Y(a,L,C);f[C]?f[C].p(V,b):(f[C]=x(V),f[C].c(),f[C].m(l,i))}for(;C<f.length;C+=1)f[C].d(1);f.length=L.length}b&4&&B(_,_=a[2])?(m.d(1),m=te(a),m.c(),m.m(l,null)):m.p(a,b),b&2&&B(A,A=a[1])?(oe(),P(v,1,1,se),re(),v=le(a),v.c(),D(v,1),v.m(I,null)):v.p(a,b)},i(a){h||(D(t.$$.fragment,a),D(v),h=!0)},o(a){P(t.$$.fragment,a),P(v),h=!1},d(a){a&&(c(s),c(e),c(y),c(d)),M(t,a),ne(f,a),m.d(a),v.d(a)}}}function we(o,t,s){let e,l,r,n,u;R(o,he,h=>s(0,n=h)),R(o,ge,h=>s(10,u=h));let{$$slots:w={},$$scope:i}=t;const _=u.params.pid,y=ve(),d=ie("__api__"),I=async h=>{await d.addProjectFolder(_,h,n.folder),s(1,r=r+1)},A=()=>{y.trigger({type:"component",component:"new_folder_panel",meta:{onNewName:I}})};return o.$$set=h=>{"$$scope"in h&&s(9,i=h.$$scope)},o.$$.update=()=>{o.$$.dirty&1&&s(3,e=(n.folder||"").split("/")),o.$$.dirty&1&&s(2,l=n.filename)},s(1,r=1),[n,r,l,e,_,y,I,w,A,i]}class De extends me{constructor(t){super(),de(this,t,we,Ce,B,{})}}export{De as component};
