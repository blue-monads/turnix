import{s as le,e as p,a as H,c as v,b as T,w as Y,g as w,f as h,m as N,i as j,h as i,n as W,v as be,t as V,d as G,j as z,A as me,G as Se,H as Le,y as Ce,B as Re,k as je,q as Pe,x as Z,F as Ve}from"../chunks/scheduler.Dy-hT7lj.js";import{S as ge,i as Te,c as se,b as ce,m as ie,t as x,a as q,d as fe,e as de,g as _e}from"../chunks/index.jcCBAMyh.js";import{S as Ge}from"../chunks/SvgIcon.D5ofxCQw.js";import{N as xe}from"../chunks/index.ZlEQwogg.js";import{g as ze}from"../chunks/stores.C8TdjPC3.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.DUTEVMI9.js";import{A as qe}from"../chunks/AppBar.C2N-oVhp.js";import{p as Fe}from"../chunks/stores.YmkBQNJ3.js";import{e as ee}from"../chunks/each.D6YF6ztN.js";function De(c,e,l){const t=c.slice();return t[3]=e[l],t[5]=l,t}function ye(c,e,l){const t=c.slice();return t[6]=e[l],t}function Ae(c){let e,l,t=c[6].txn_id+"",n,r,d,_=c[6].title+"",a,o,u,s=c[6].debit_amount+"",g,L,b,D=c[6].credit_amount+"",M;return{c(){e=p("tr"),l=p("td"),n=V(t),r=H(),d=p("td"),a=V(_),o=H(),u=p("td"),g=V(s),L=H(),b=p("td"),M=V(D)},l(E){e=v(E,"TR",{});var k=T(e);l=v(k,"TD",{});var A=T(l);n=G(A,t),A.forEach(h),r=w(k),d=v(k,"TD",{});var O=T(d);a=G(O,_),O.forEach(h),o=w(k),u=v(k,"TD",{});var $=T(u);g=G($,s),$.forEach(h),L=w(k),b=v(k,"TD",{});var f=T(b);M=G(f,D),f.forEach(h),k.forEach(h)},m(E,k){j(E,e,k),i(e,l),i(l,n),i(e,r),i(e,d),i(d,a),i(e,o),i(e,u),i(u,g),i(e,L),i(e,b),i(b,M)},p(E,k){k&1&&t!==(t=E[6].txn_id+"")&&z(n,t),k&1&&_!==(_=E[6].title+"")&&z(a,_),k&1&&s!==(s=E[6].debit_amount+"")&&z(g,s),k&1&&D!==(D=E[6].credit_amount+"")&&z(M,D)},d(E){E&&h(e)}}}function He(c){let e,l,t,n=c[3].account_name+"",r,d,_,a,o,u="Total",s,g,L=c[3].total_debit+"",b,D,M,E=c[3].total_credit+"",k,A,O=ee(c[3].lines),$=[];for(let f=0;f<O.length;f+=1)$[f]=Ae(ye(c,O,f));return{c(){e=p("tr"),l=p("td"),t=p("span"),r=V(n),d=H();for(let f=0;f<$.length;f+=1)$[f].c();_=H(),a=p("tr"),o=p("th"),o.textContent=u,s=H(),g=p("td"),b=V(L),D=H(),M=p("td"),k=V(E),A=H(),this.h()},l(f){e=v(f,"TR",{});var m=T(e);l=v(m,"TD",{colspan:!0});var C=T(l);t=v(C,"SPAN",{class:!0});var B=T(t);r=G(B,n),B.forEach(h),C.forEach(h),m.forEach(h),d=w(f);for(let R=0;R<$.length;R+=1)$[R].l(f);_=w(f),a=v(f,"TR",{});var P=T(a);o=v(P,"TH",{colspan:!0,"data-svelte-h":!0}),Y(o)!=="svelte-mb8xor"&&(o.textContent=u),s=w(P),g=v(P,"TD",{});var U=T(g);b=G(U,L),U.forEach(h),D=w(P),M=v(P,"TD",{});var F=T(M);k=G(F,E),F.forEach(h),A=w(P),P.forEach(h),this.h()},h(){N(t,"class","font-semibold text-lg"),N(l,"colspan","5"),N(o,"colspan","2")},m(f,m){j(f,e,m),i(e,l),i(l,t),i(t,r),j(f,d,m);for(let C=0;C<$.length;C+=1)$[C]&&$[C].m(f,m);j(f,_,m),j(f,a,m),i(a,o),i(a,s),i(a,g),i(g,b),i(a,D),i(a,M),i(M,k),i(a,A)},p(f,m){if(m&1&&n!==(n=f[3].account_name+"")&&z(r,n),m&1){O=ee(f[3].lines);let C;for(C=0;C<O.length;C+=1){const B=ye(f,O,C);$[C]?$[C].p(B,m):($[C]=Ae(B),$[C].c(),$[C].m(_.parentNode,_))}for(;C<$.length;C+=1)$[C].d(1);$.length=O.length}m&1&&L!==(L=f[3].total_debit+"")&&z(b,L),m&1&&E!==(E=f[3].total_credit+"")&&z(k,E)},d(f){f&&(h(e),h(d),h(_),h(a)),be($,f)}}}function Ye(c){let e,l,t,n="<tr><th>Txn</th> <th>Title</th> <th>Debit Amount</th> <th>Credit Amount</th></tr>",r,d,_=ee(Object.values(c[0])),a=[];for(let o=0;o<_.length;o+=1)a[o]=He(De(c,_,o));return{c(){e=p("div"),l=p("table"),t=p("thead"),t.innerHTML=n,r=H(),d=p("tbody");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=v(o,"DIV",{class:!0});var u=T(e);l=v(u,"TABLE",{class:!0});var s=T(l);t=v(s,"THEAD",{"data-svelte-h":!0}),Y(t)!=="svelte-usehzc"&&(t.innerHTML=n),r=w(s),d=v(s,"TBODY",{});var g=T(d);for(let L=0;L<a.length;L+=1)a[L].l(g);g.forEach(h),s.forEach(h),u.forEach(h),this.h()},h(){N(l,"class","table table-hover h-fit"),N(e,"class","table-container h-[calc(100vh-14rem)] overflow-y-auto")},m(o,u){j(o,e,u),i(e,l),i(l,t),i(l,r),i(l,d);for(let s=0;s<a.length;s+=1)a[s]&&a[s].m(d,null)},p(o,[u]){if(u&1){_=ee(Object.values(o[0]));let s;for(s=0;s<_.length;s+=1){const g=De(o,_,s);a[s]?a[s].p(g,u):(a[s]=He(g),a[s].c(),a[s].m(d,null))}for(;s<a.length;s+=1)a[s].d(1);a.length=_.length}},i:W,o:W,d(o){o&&h(e),be(a,o)}}}function Ue(c,e,l){let t,{data:n}=e;const r=d=>{let _={};return d.forEach(a=>{let o=_[a.account_id];o||(o={account_id:a.account_id,account_name:a.account_name,account_type:a.acc_type,lines:[],total_credit:a.total_credit,total_debit:a.total_debit},_[a.account_id]=o),o.lines.push(a)}),console.log("@after_format",_),_};return c.$$set=d=>{"data"in d&&l(1,n=d.data)},c.$$.update=()=>{c.$$.dirty&2&&l(0,t=r(n))},[t,n]}class Je extends ge{constructor(e){super(),Te(this,e,Ue,Ye,le,{data:1})}}function we(c,e,l){const t=c.slice();return t[1]=e[l],t[3]=l,t}function Ie(c){let e,l,t=c[1].account_id+"",n,r,d,_=c[1].account_name+"",a,o,u,s=c[1].acc_type+"",g,L,b,D=c[1].total_debit+"",M,E,k,A=c[1].total_credit+"",O,$;return{c(){e=p("tr"),l=p("th"),n=V(t),r=H(),d=p("td"),a=V(_),o=H(),u=p("td"),g=V(s),L=H(),b=p("td"),M=V(D),E=H(),k=p("td"),O=V(A),$=H()},l(f){e=v(f,"TR",{});var m=T(e);l=v(m,"TH",{});var C=T(l);n=G(C,t),C.forEach(h),r=w(m),d=v(m,"TD",{});var B=T(d);a=G(B,_),B.forEach(h),o=w(m),u=v(m,"TD",{});var P=T(u);g=G(P,s),P.forEach(h),L=w(m),b=v(m,"TD",{});var U=T(b);M=G(U,D),U.forEach(h),E=w(m),k=v(m,"TD",{});var F=T(k);O=G(F,A),F.forEach(h),$=w(m),m.forEach(h)},m(f,m){j(f,e,m),i(e,l),i(l,n),i(e,r),i(e,d),i(d,a),i(e,o),i(e,u),i(u,g),i(e,L),i(e,b),i(b,M),i(e,E),i(e,k),i(k,O),i(e,$)},p(f,m){m&1&&t!==(t=f[1].account_id+"")&&z(n,t),m&1&&_!==(_=f[1].account_name+"")&&z(a,_),m&1&&s!==(s=f[1].acc_type+"")&&z(g,s),m&1&&D!==(D=f[1].total_debit+"")&&z(M,D),m&1&&A!==(A=f[1].total_credit+"")&&z(O,A)},d(f){f&&h(e)}}}function Ke(c){let e,l,t,n="<tr><th>Id</th> <th>Account</th> <th>Account Type</th> <th>Debit Total</th> <th>Credit Total</th></tr>",r,d,_=ee(c[0]),a=[];for(let o=0;o<_.length;o+=1)a[o]=Ie(we(c,_,o));return{c(){e=p("div"),l=p("table"),t=p("thead"),t.innerHTML=n,r=H(),d=p("tbody");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=v(o,"DIV",{class:!0});var u=T(e);l=v(u,"TABLE",{class:!0});var s=T(l);t=v(s,"THEAD",{"data-svelte-h":!0}),Y(t)!=="svelte-1g4kz84"&&(t.innerHTML=n),r=w(s),d=v(s,"TBODY",{});var g=T(d);for(let L=0;L<a.length;L+=1)a[L].l(g);g.forEach(h),s.forEach(h),u.forEach(h),this.h()},h(){N(l,"class","table table-hover h-fit"),N(e,"class","table-container h-[calc(100vh-14rem)] overflow-y-auto")},m(o,u){j(o,e,u),i(e,l),i(l,t),i(l,r),i(l,d);for(let s=0;s<a.length;s+=1)a[s]&&a[s].m(d,null)},p(o,[u]){if(u&1){_=ee(o[0]);let s;for(s=0;s<_.length;s+=1){const g=we(o,_,s);a[s]?a[s].p(g,u):(a[s]=Ie(g),a[s].c(),a[s].m(d,null))}for(;s<a.length;s+=1)a[s].d(1);a.length=_.length}},i:W,o:W,d(o){o&&h(e),be(a,o)}}}function Qe(c,e,l){let{data:t}=e;return c.$$set=n=>{"data"in n&&l(0,t=n.data)},[t]}class We extends ge{constructor(e){super(),Te(this,e,Qe,Ke,le,{data:0})}}function Xe(c){let e,l='<li class="crumb"><a class="anchor" href="/z/pages/portal/projects/books">Books</a></li> <li class="crumb-separator" aria-hidden="">›</li> <li>Reports</li> <li class="crumb-separator" aria-hidden="">›</li> <li>Live</li>';return{c(){e=p("ol"),e.innerHTML=l,this.h()},l(t){e=v(t,"OL",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-fmpv72"&&(e.innerHTML=l),this.h()},h(){N(e,"class","breadcrumb")},m(t,n){j(t,e,n)},p:W,d(t){t&&h(e)}}}function Ne(c){let e,l,t,n;const r=[et,Ze],d=[];function _(a,o){return a[3]==="long_ledger"?0:a[3]==="short_ledger"?1:-1}return~(e=_(c))&&(l=d[e]=r[e](c)),{c(){l&&l.c(),t=Z()},l(a){l&&l.l(a),t=Z()},m(a,o){~e&&d[e].m(a,o),j(a,t,o),n=!0},p(a,o){let u=e;e=_(a),e===u?~e&&d[e].p(a,o):(l&&(_e(),q(d[u],1,1,()=>{d[u]=null}),fe()),~e?(l=d[e],l?l.p(a,o):(l=d[e]=r[e](a),l.c()),x(l,1),l.m(t.parentNode,t)):l=null)},i(a){n||(x(l),n=!0)},o(a){q(l),n=!1},d(a){a&&h(t),~e&&d[e].d(a)}}}function Ze(c){let e=c[1],l,t,n=Me(c);return{c(){n.c(),l=Z()},l(r){n.l(r),l=Z()},m(r,d){n.m(r,d),j(r,l,d),t=!0},p(r,d){d&2&&le(e,e=r[1])?(_e(),q(n,1,1,W),fe(),n=Me(r),n.c(),x(n,1),n.m(l.parentNode,l)):n.p(r,d)},i(r){t||(x(n),t=!0)},o(r){q(n),t=!1},d(r){r&&h(l),n.d(r)}}}function et(c){let e=c[1],l,t,n=Oe(c);return{c(){n.c(),l=Z()},l(r){n.l(r),l=Z()},m(r,d){n.m(r,d),j(r,l,d),t=!0},p(r,d){d&2&&le(e,e=r[1])?(_e(),q(n,1,1,W),fe(),n=Oe(r),n.c(),x(n,1),n.m(l.parentNode,l)):n.p(r,d)},i(r){t||(x(n),t=!0)},o(r){q(n),t=!1},d(r){r&&h(l),n.d(r)}}}function Me(c){let e,l;return e=new We({props:{data:c[1]}}),{c(){se(e.$$.fragment)},l(t){ce(e.$$.fragment,t)},m(t,n){ie(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.data=t[1]),e.$set(r)},i(t){l||(x(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){de(e,t)}}}function Oe(c){let e,l;return e=new Je({props:{data:c[1]}}),{c(){se(e.$$.fragment)},l(t){ce(e.$$.fragment,t)},m(t,n){ie(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.data=t[1]),e.$set(r)},i(t){l||(x(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){de(e,t)}}}function tt(c){let e,l,t,n,r,d='<h4 class="h4">Live Reports</h4>',_,a,o,u,s,g="Report Type",L,b,D,M="Ledger short",E,k="Ledger long",A,O="Custom",$,f,m='<span>From Date</span> <input class="input" type="datetime-local"/>',C,B,P='<span>To Date</span> <input class="input" type="datetime-local"/>',U,F,R,J,ue,ae,he,K,te,pe,Ee;e=new qe({props:{$$slots:{lead:[Xe]},$$scope:{ctx:c}}}),J=new Ge({props:{className:"h-4 w-4",name:"bolt"}});let I=c[1]&&Ne(c);return{c(){se(e.$$.fragment),l=H(),t=p("div"),n=p("div"),r=p("header"),r.innerHTML=d,_=H(),a=p("section"),o=p("div"),u=p("label"),s=p("span"),s.textContent=g,L=H(),b=p("select"),D=p("option"),D.textContent=M,E=p("option"),E.textContent=k,A=p("option"),A.textContent=O,$=H(),f=p("label"),f.innerHTML=m,C=H(),B=p("label"),B.innerHTML=P,U=H(),F=p("div"),R=p("button"),se(J.$$.fragment),ue=V(`

          Generate`),he=H(),K=p("div"),I&&I.c(),this.h()},l(y){ce(e.$$.fragment,y),l=w(y),t=v(y,"DIV",{class:!0});var S=T(t);n=v(S,"DIV",{class:!0});var Q=T(n);r=v(Q,"HEADER",{class:!0,"data-svelte-h":!0}),Y(r)!=="svelte-565d1m"&&(r.innerHTML=d),_=w(Q),a=v(Q,"SECTION",{class:!0});var ne=T(a);o=v(ne,"DIV",{class:!0});var X=T(o);u=v(X,"LABEL",{class:!0});var oe=T(u);s=v(oe,"SPAN",{"data-svelte-h":!0}),Y(s)!=="svelte-2u6l74"&&(s.textContent=g),L=w(oe),b=v(oe,"SELECT",{class:!0});var re=T(b);D=v(re,"OPTION",{"data-svelte-h":!0}),Y(D)!=="svelte-18mloe5"&&(D.textContent=M),E=v(re,"OPTION",{"data-svelte-h":!0}),Y(E)!=="svelte-18gmyjn"&&(E.textContent=k),A=v(re,"OPTION",{"data-svelte-h":!0}),Y(A)!=="svelte-15u4c16"&&(A.textContent=O),re.forEach(h),oe.forEach(h),$=w(X),f=v(X,"LABEL",{class:!0,"data-svelte-h":!0}),Y(f)!=="svelte-1snx8e"&&(f.innerHTML=m),C=w(X),B=v(X,"LABEL",{class:!0,"data-svelte-h":!0}),Y(B)!=="svelte-7wjyer"&&(B.innerHTML=P),X.forEach(h),U=w(ne),F=v(ne,"DIV",{});var ke=T(F);R=v(ke,"BUTTON",{class:!0});var ve=T(R);ce(J.$$.fragment,ve),ue=G(ve,`

          Generate`),ve.forEach(h),ke.forEach(h),ne.forEach(h),Q.forEach(h),he=w(S),K=v(S,"DIV",{class:!0});var $e=T(K);I&&I.l($e),$e.forEach(h),S.forEach(h),this.h()},h(){N(r,"class","card-header"),D.__value="short_ledger",me(D,D.__value),E.__value="long_ledger",me(E,E.__value),A.__value="custom",me(A,A.__value),N(b,"class","select"),c[0]===void 0&&Se(()=>c[6].call(b)),N(u,"class","label"),N(f,"class","label"),N(B,"class","label"),N(o,"class","flex gap-2 items-center flex-wrap"),R.disabled=ae=c[2]||c[4],N(R,"class","btn btn-sm variant-filled disabled:variant-ghost disabled:text-slate-800"),N(a,"class","pl-4 py-2 flex justify-between items-center flex-wrap gap-2"),N(n,"class","card p-2"),N(K,"class","p-2 card"),N(t,"class","flex flex-col p-2 gap-2")},m(y,S){ie(e,y,S),j(y,l,S),j(y,t,S),i(t,n),i(n,r),i(n,_),i(n,a),i(a,o),i(o,u),i(u,s),i(u,L),i(u,b),i(b,D),i(b,E),i(b,A),Le(b,c[0],!0),i(o,$),i(o,f),i(o,C),i(o,B),i(a,U),i(a,F),i(F,R),ie(J,R,null),i(R,ue),i(t,he),i(t,K),I&&I.m(K,null),te=!0,pe||(Ee=[Ce(b,"change",c[6]),Ce(R,"click",c[5])],pe=!0)},p(y,[S]){const Q={};S&4096&&(Q.$$scope={dirty:S,ctx:y}),e.$set(Q),S&1&&Le(b,y[0]),(!te||S&20&&ae!==(ae=y[2]||y[4]))&&(R.disabled=ae),y[1]?I?(I.p(y,S),S&2&&x(I,1)):(I=Ne(y),I.c(),x(I,1),I.m(K,null)):I&&(_e(),q(I,1,1,()=>{I=null}),fe())},i(y){te||(x(e.$$.fragment,y),x(J.$$.fragment,y),x(I),te=!0)},o(y){q(e.$$.fragment,y),q(J.$$.fragment,y),q(I),te=!1},d(y){y&&(h(l),h(t)),de(e,y),de(J),I&&I.d(),pe=!1,Re(Ee)}}}let Be=0;function lt(c,e,l){let t,n;je(c,Fe,b=>l(7,n=b));const r=n.params.pid;ze();const d=xe(Pe("__api__"));let _=!1,a="short_ledger",o=a,u;(async()=>{})();const g=async()=>{l(2,_=!0),l(3,o=a);const b=await d.generateLiveTxn(r,{report_type:a,template_id:Be});if(b.status!==200){l(2,_=!1);return}l(1,u=b.data),console.log("@data",u),l(2,_=!1)};function L(){a=Ve(this),l(0,a)}return c.$$.update=()=>{c.$$.dirty&1&&l(4,t=a==="custom"&&Be===0),c.$$.dirty&2&&console.log("@data/2",u)},[a,u,_,o,t,g,L]}class _t extends ge{constructor(e){super(),Te(this,e,lt,tt,le,{})}}export{_t as component};
