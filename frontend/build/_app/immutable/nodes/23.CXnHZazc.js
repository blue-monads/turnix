import{a as t,t as h,c as I,b as $}from"../chunks/disclose-version.wcsHG7oF.js";import{p as N,g as q,f as D,t as F,a as A,h as b,b as o,i as P,s as B,c as u,r as x,e as E}from"../chunks/runtime.D6lgFUio.js";import{s as G}from"../chunks/render.CIW-w3Th.js";import{i as U}from"../chunks/if.lkQ-IRrr.js";import{d as H}from"../chunks/utils.Dh-XvBAd.js";import{p as J}from"../chunks/proxy.r5-P5EHK.js";import{s as K,a as z}from"../chunks/store.BaapSzAp.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.DbB_HC5r.js";import{F as L}from"../chunks/FileDropzone.CtR1lNCv.js";import{p as M}from"../chunks/stores.D4Dcgzbh.js";/* empty css                                                     */import{p as O}from"../chunks/index.xGEmn6Hr.js";import{S as Q}from"../chunks/SvgIcon.Cj01WnO8.js";import{g as R}from"../chunks/entry.Y6HcnCx3.js";var T=h('<div slot="lead" class="flex justify-center"><!></div>'),V=h("<strong>Upload a file</strong> or drag and drop",1),W=async(y,p,n,d,i,m)=>{b(p,!0);const l=n().folder||"";await d.addProjectFile(i,o(m).name,l,o(m)),b(p,!1),R(`/z/pages/portal/project/files/${i}?folder=${l}`)},X=h('<!> <div class="flex justify-end py-2"><button class="btn btn-sm variant-filled"><!></button></div>',1);function ca(y,p){N(p,!0);const n=K(),d=()=>z(M,"$page",n),i=()=>z(O,"$params",n),m=d().params.pid,l=q("__api__");let v=P(!1),e=P(void 0);const S=async a=>{console.log("onDrop",a),b(e,J(a.target.files[0]))};var j=X(),k=D(j);L(k,{name:"files",$$events:{change:S},$$slots:{lead:(a,r)=>{var s=T(),g=u(s);Q(g,{name:"arrow-up-tray",className:"w-6 h-6"}),x(s),t(a,s)},message:(a,r)=>{var s=I(),g=D(s);U(g,()=>o(e),_=>{var c=$();F(()=>G(c,o(e).name)),t(_,c)},_=>{var c=V();E(),t(_,c)}),t(a,s)}}});var w=B(k,2),f=u(w);f.__click=[W,v,i,l,m,e];var C=u(f);U(C,()=>o(v),a=>{var r=$("Uploading...");t(a,r)},a=>{var r=$("Upload");t(a,r)}),x(f),x(w),F(()=>f.disabled=!o(e)||o(v)),t(y,j),A()}H(["click"]);export{ca as component};
