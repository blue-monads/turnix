import{a as l,t as n}from"../chunks/Celh2SBM.js";import{p as D,g as P,i as _,f as g,a as L,h as p,d as v,c as b,b as $,r as y,s as h}from"../chunks/BC9Cf8Q3.js";import{d as O}from"../chunks/x8LL7je8.js";import{i as T}from"../chunks/BgSg1_cg.js";import{s as q}from"../chunks/DMueVNEq.js";import{p as k}from"../chunks/CKwprqj2.js";import{s as E,a as F}from"../chunks/BvXhjoeW.js";import{S as w}from"../chunks/CdW99GA5.js";import{N as G}from"../chunks/Dq_7tmzI.js";import"../chunks/CRz77-DP.js";import"../chunks/B857cCpa.js";import{A as H}from"../chunks/CnSBROsQ.js";import{p as J}from"../chunks/C1rFHlC-.js";import"../chunks/CMsATdMh.js";import{A as K}from"../chunks/C6IzKD7A.js";import{L as M}from"../chunks/JNyEhxU_.js";import{g as Q}from"../chunks/BW30Hxfo.js";import{f as R}from"../chunks/8TB5Umy4.js";var U=n('<ol class="breadcrumb"><li class="crumb"><a class="anchor" href="/z/pages/portal/projects/books">Books</a></li> <li class="crumb-separator" aria-hidden="">&rsaquo;</li> <li class="crumb">Sales</li></ol>'),V=()=>{},W=n('<a class="btn variant-ghost-primary btn-sm"><!> Sale</a> <button class="btn variant-filled-secondary btn-sm"><!> Close</button>',1),X=n("<!> <!>",1);function va(S,A){D(A,!0);const[N,C]=E(),r=F(J,"$page",N).params.pid,c=G(P("__api__"));let m=_(k([])),e=_(!0);const d=async()=>{p(e,!0);const a=await c.listSales(r);a.status===200&&(p(m,k((a.data||[]).map(t=>({...t,total:R(t.total),created_at:new Date(t.created_at).toISOString(),updated_at:new Date(t.updated_at).toISOString()})))),p(e,!1))};d();var f=X(),u=g(f);H(u,{$$slots:{lead:(a,t)=>{var s=U();l(a,s)},trail:(a,t)=>{var s=W(),o=g(s);q(o,"href",`/z/pages/portal/projects/books/${r}/sales/new`);var z=b(o);w(z,{className:"h-4 w-4",name:"plus"}),$(),y(o);var i=h(o,2);i.__click=[V];var B=b(i);w(B,{className:"h-4 w-4 mr-1",name:"check"}),$(),y(i),l(a,s)}}});var I=h(u,2);{var x=a=>{M(a,{})},j=a=>{K(a,{action_key:"id",key_names:[["id","ID"],["title","Title"],["notes","Notes"],["total","Total"],["created_at","Created At"]],get datas(){return v(m)},color:["ctype"],actions:[{Name:"preview",Class:"variant-filled-primary",Action:async t=>{Q(`/z/pages/portal/projects/books/${r}/sales/preview?sid=${t}`)}},{Name:"options",Class:"variant-filled-secondary",Action:async t=>{}},{Name:"delete",Class:"variant-filled-error",Action:async t=>{(await c.deleteSale(r,t)).status===200&&d()}}]})};T(I,a=>{v(e)?a(x):a(j,!1)})}l(S,f),L(),C()}O(["click"]);export{va as component};
