import{a as v,t as w,c as J}from"../chunks/uYeY98Ep.js";import{c as a,s as r,f as R,r as t,d as e,t as Q,e as dt,p as ct,g as vt,h as K,a as pt,i as B,b as Z}from"../chunks/CRNwc6nF.js";import{d as _t}from"../chunks/CHLatDmB.js";import{i as tt}from"../chunks/DPugg-eY.js";import{k as st}from"../chunks/CLHGMGVy.js";import{s as at}from"../chunks/Bo8IgBjd.js";import{p as et}from"../chunks/Ycl9y-hy.js";import{b as ut}from"../chunks/D2s8Z0_2.js";import{s as mt,a as ht}from"../chunks/xNd68Pov.js";import{r as bt}from"../chunks/VksgPlDO.js";import{S as ft}from"../chunks/CTtbmK_c.js";import{N as gt}from"../chunks/Dq_7tmzI.js";import{g as xt}from"../chunks/Cd_4edPv.js";import"../chunks/dt-uJVo0.js";import"../chunks/BmWNUg7v.js";import{A as yt}from"../chunks/CqfoOsKq.js";import{p as $t}from"../chunks/bUAA_rse.js";import{s as c}from"../chunks/CdHdDXtF.js";import{e as rt,i as ot}from"../chunks/Bbg2O9W9.js";var kt=w("<tr><td> </td><td> </td><td> </td><td> </td></tr>"),Tt=w('<tr><td colspan="5"><span class="font-semibold text-lg"> </span></td></tr> <!> <tr><th colspan="2">Total</th><td> </td><td> </td></tr>',1),At=w('<div class="table-container h-[calc(100vh-14rem)] overflow-y-auto"><table class="table table-hover h-fit"><thead><tr><th>Txn</th><th>Title</th><th>Debit Amount</th><th>Credit Amount</th></tr></thead><tbody></tbody></table></div>');function Lt(j,p){const _=d=>{let o={};return d.forEach(l=>{let s=o[l.account_id];s||(s={account_id:l.account_id,account_name:l.account_name,account_type:l.acc_type,lines:[],total_credit:l.total_credit,total_debit:l.total_debit},o[l.account_id]=s),s.lines.push(l)}),console.log("@after_format",o),o};let u=dt(()=>_(p.data));var m=At(),h=a(m),i=r(a(h));rt(i,21,()=>Object.values(e(u)),ot,(d,o)=>{var l=Tt(),s=R(l),n=a(s),y=a(n),I=a(y,!0);t(y),t(n),t(s);var b=r(s,2);rt(b,17,()=>e(o).lines,ot,(E,g)=>{var T=kt(),A=a(T),F=a(A,!0);t(A);var C=r(A),D=a(C,!0);t(C);var z=r(C),M=a(z,!0);t(z);var O=r(z),U=a(O,!0);t(O),t(T),Q(()=>{c(F,e(g).txn_id),c(D,e(g).title),c(M,e(g).debit_amount),c(U,e(g).credit_amount)}),v(E,T)});var $=r(b,2),f=r(a($)),k=a(f,!0);t(f);var N=r(f),q=a(N,!0);t(N),t($),Q(()=>{c(I,e(o).account_name),c(k,e(o).total_debit),c(q,e(o).total_credit)}),v(d,l)}),t(i),t(h),t(m),v(j,m)}var St=w("<tr><th> </th><td> </td><td> </td><td> </td><td> </td></tr>"),wt=w('<div class="table-container h-[calc(100vh-14rem)] overflow-y-auto"><table class="table table-hover h-fit"><thead><tr><th>Id</th><th>Account</th><th>Account Type</th><th>Debit Total</th><th>Credit Total</th></tr></thead><tbody></tbody></table></div>');function jt(j,p){var _=wt(),u=a(_),m=r(a(u));rt(m,21,()=>p.data,ot,(h,i)=>{var d=St(),o=a(d),l=a(o,!0);t(o);var s=r(o),n=a(s,!0);t(s);var y=r(s),I=a(y,!0);t(y);var b=r(y),$=a(b,!0);t(b);var f=r(b),k=a(f,!0);t(f),t(d),Q(()=>{c(l,e(i).account_id),c(n,e(i).account_name),c(I,e(i).acc_type),c($,e(i).total_debit),c(k,e(i).total_credit)}),v(h,d)}),t(m),t(u),t(_),v(j,_)}const Ct=async(j,p,_,u,m,h,i,d)=>{B(p,!0),B(_,et(e(u)));const o=await m.generateLiveTxn(h,{report_type:e(u),template_id:i});if(o.status!==200){B(p,!1);return}B(d,et(o.data)),console.log("@data",e(d)),B(p,!1)};var Dt=w('<ol class="breadcrumb"><li class="crumb"><a class="anchor" href="/z/pages/portal/projects/books">Books</a></li> <li class="crumb-separator">&rsaquo;</li> <li><a class="anchor">Reports</a></li> <li class="crumb-separator">&rsaquo;</li> <li>Static Report</li></ol>'),Rt=w('<!> <div class="flex flex-col p-2 gap-2"><div class="card p-2"><header class="card-header"><h4 class="h4">Static Reports</h4></header> <section class="pl-4 py-2 flex justify-between items-center flex-wrap gap-2"><div class="flex gap-2 items-center flex-wrap"><label class="label"><span>Report Type</span> <select class="select"><option>Ledger short</option><option>Ledger long</option><option>Custom</option></select></label> <label class="label"><span>From Date</span> <input class="input" type="datetime-local"></label> <label class="label"><span>To Date</span> <input class="input" type="datetime-local"></label></div> <div><button class="btn btn-sm variant-filled disabled:variant-ghost disabled:text-slate-800"><!> Generate</button></div></section></div> <div class="p-2 card"><!></div></div>',1);function Yt(j,p){ct(p,!0);const[_,u]=mt(),h=ht($t,"$page",_).params.pid;xt();const i=gt(vt("__api__"));let d=K(!1),o=0,l=K("short_ledger"),s=K(et(e(l))),n=K(void 0);(async()=>{})();let I=dt(()=>e(l)==="custom"&&o===0);bt(()=>{console.log("@data/2",e(n))});var b=Rt(),$=R(b);yt($,{$$slots:{lead:(L,V)=>{var G=Dt(),H=r(a(G),2);at(H,"aria-hidden",!0);var P=r(H,2),x=a(P);at(x,"href",`/z/pages/portal/projects/books/${h}/report`),t(P);var S=r(P,2);at(S,"aria-hidden",!0),Z(2),t(G),v(L,G)}}});var f=r($,2),k=a(f),N=r(a(k),2),q=a(N),E=a(q),g=r(a(E),2),T=a(g);T.value=(T.__value="short_ledger")==null?"":"short_ledger";var A=r(T);A.value=(A.__value="long_ledger")==null?"":"long_ledger";var F=r(A);F.value=(F.__value="custom")==null?"":"custom",t(g),t(E),Z(4),t(q);var C=r(q,2),D=a(C);D.__click=[Ct,d,s,l,i,h,o,n];var z=a(D);ft(z,{className:"h-4 w-4",name:"bolt"}),Z(),t(D),t(C),t(N),t(k);var M=r(k,2),O=a(M);{var U=L=>{var V=J(),G=R(V);{var H=x=>{var S=J(),W=R(S);st(W,()=>e(n),X=>{Lt(X,{get data(){return e(n)}})}),v(x,S)},P=x=>{var S=J(),W=R(S);{var X=Y=>{var lt=J(),it=R(lt);st(it,()=>e(n),nt=>{jt(nt,{get data(){return e(n)}})}),v(Y,lt)};tt(W,Y=>{e(s)==="short_ledger"&&Y(X)},!0)}v(x,S)};tt(G,x=>{e(s)==="long_ledger"?x(H):x(P,!1)})}v(L,V)};tt(O,L=>{e(n)&&L(U)})}t(M),t(f),Q(()=>D.disabled=e(d)||e(I)),ut(g,()=>e(l),L=>B(l,L)),v(j,b),pt(),u()}_t(["click"]);export{Yt as component};
