import{a as d,t as h,c as M}from"../chunks/uYeY98Ep.js";import{p as C,g as D,h as _,f as y,a as E,i as f,d as o,c as n,s as x,r as l,b}from"../chunks/CRNwc6nF.js";import{i as F}from"../chunks/DPugg-eY.js";import{k as O}from"../chunks/CLHGMGVy.js";import{s as A}from"../chunks/Bo8IgBjd.js";import{p as m}from"../chunks/Ycl9y-hy.js";import{s as R,a as W}from"../chunks/xNd68Pov.js";import{S as N}from"../chunks/CTtbmK_c.js";import{f as G,T as H}from"../chunks/CArKupo6.js";import{g as J}from"../chunks/Cd_4edPv.js";import"../chunks/Zb-LiZS2.js";import"../chunks/BmWNUg7v.js";import{A as K}from"../chunks/C9oD0EKA.js";import{N as Q}from"../chunks/Dq_7tmzI.js";import"../chunks/D8sggRce.js";import"../chunks/g85Fs1Im.js";import{L as U}from"../chunks/DDEYG0vs.js";import{p as V}from"../chunks/bUAA_rse.js";var X=h('<div slot="lead" class="flex gap-2"><ol class="breadcrumb"><li class="crumb"><a class="anchor" href="/z/pages/portal/projects/books">Books</a></li> <li class="crumb-separator" aria-hidden="">&rsaquo;</li> <li class="crumb"><a class="anchor">Account</a></li> <li class="crumb-separator" aria-hidden="">&rsaquo;</li> <li class="crumb">Transactions</li></ol></div>'),Y=h('<div slot="trail" class="flex gap-2"><button class="inline-flex gap-1"><!> Find</button> <a class="inline-flex gap-1"><!> New</a></div>'),Z=h("<!> <!>",1);function ha(T,L){C(L,!0);const[j,z]=R(),p=W(V,"$page",j).params.pid,$=Q(D("__api__"));J();let g=_(!0),u=_(m([])),k=m({}),e=_(m([]));(async()=>{const s=await $.listAccount(p);f(g,!0),await v(!0),(await s).data.forEach(a=>{const t=a.id;k[t]=a.name}),f(g,!1)})();const v=async s=>{const r=o(e).length>0?o(e).at(-1):0;!s&&o(e).length>0&&f(e,m(o(e).slice(0,-1)));const a=await $.listTxnWithLines(p,r);if(a.status!==200)return;const{maxId:t,txns:i}=G(a.data);f(u,m(i)),o(e).push(t)};var w=Z(),I=y(w);K(I,{$$slots:{lead:(s,r)=>{var a=X(),t=n(a),i=x(n(t),4),c=n(i);A(c,"href",`/z/pages/portal/projects/books/${p}`),l(i),b(4),l(t),l(a),d(s,a)},trail:(s,r)=>{var a=Y(),t=n(a),i=n(t);N(i,{name:"magnifying-glass",className:"w-5 h-5"}),b(),l(t);var c=x(t,2);A(c,"href",`/z/pages/portal/projects/books/${p}/txn/new`);var q=n(c);N(q,{name:"plus",className:"w-5 h-5"}),b(),l(c),l(a),d(s,a)}}});var B=x(I,2);{var P=s=>{U(s,{})},S=s=>{var r=M(),a=y(r);O(a,()=>o(u),t=>{H(t,{get accountsIndex(){return k},get lineData(){return o(u)},pid:p,$$events:{prev_page:()=>v(!1),next_page:()=>v(!0)}})}),d(s,r)};F(B,s=>{o(g)?s(P):s(S,!1)})}d(T,w),E(),z()}export{ha as component};
