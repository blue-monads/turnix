import{a as i,t as c}from"../chunks/disclose-version.BOfWGsg9.js";import{p as y,g as k,i as u,f as A,a as C,h as p,b as n,c as N,e as w,r as x,s as P,d as j}from"../chunks/runtime.CmPLUjJJ.js";import{i as z}from"../chunks/if.DoU_1wcm.js";import{s as B}from"../chunks/attributes.yGGqmlPO.js";import{p as _}from"../chunks/proxy.DKs42Gzo.js";import{s as I,a as L}from"../chunks/store.BN9B0iWR.js";import{g as S}from"../chunks/entry.SbDQTVSd.js";import{p as q}from"../chunks/stores.P_GwiDr4.js";import{N as D}from"../chunks/index.Dq_7tmzI.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.Kk8Ai2k7.js";import{A as E}from"../chunks/AppBar.pSMxueMf.js";import{S as T}from"../chunks/SvgIcon.Cn9REWmg.js";import"../chunks/index.DQ4XhlMg.js";import{A as F}from"../chunks/autotable.D5y0wA8l.js";import{L as G}from"../chunks/loader._7BlSOYJ.js";var H=c('<ol class="breadcrumb"><li class="crumb"><a class="anchor" href="/z/pages/portal/projects/books">Books</a></li> <li class="crumb-separator" aria-hidden="">&rsaquo;</li> <li class="crumb">Contacts</li></ol>'),J=c('<a class="btn variant-ghost-primary btn-sm"><!> Contact</a>'),K=c("<!> <!>",1);function pa(b,v){y(v,!0);const $=I(),s=L(q,"$page",$).params.pid,l=D(k("__api__"));let o=u(!0),m=u(_([]));const d=async()=>{p(o,!0);const a=await l.listContacts(s);a.status===200&&(p(m,_(a.data)),p(o,!1))};d();var f=K(),g=A(f);E(g,{$$slots:{lead:(a,r)=>{var t=H();i(a,t)},trail:(a,r)=>{var t=J();B(t,"href",`/z/pages/portal/projects/books/${s}/contacts/new`);var e=N(t);T(e,{className:"h-4 w-4",name:"plus"}),w(),x(t),i(a,t)}}});var h=P(g,2);z(h,()=>n(o),a=>{G(a,{})},a=>{var r=j(()=>[{Name:"edit",Class:"variant-filled-primary",Action:async(t,e)=>{S(`/z/pages/portal/projects/books/${s}/contacts/edit?cid=${t}`)}},{Name:"delete",Class:"variant-filled-error",Action:async(t,e)=>{(await l.deleteContact(s,t)).status===200&&d()}}]);F(a,{action_key:"id",key_names:[["id","ID"],["name","Name"],["ctype","Type"],["email","Email"],["phone","Phone"]],get datas(){return n(m)},color:["ctype"],get actions(){return n(r)}})}),i(b,f),C()}export{pa as component};
