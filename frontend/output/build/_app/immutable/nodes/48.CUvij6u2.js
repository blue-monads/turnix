import{a as i,t as n}from"../chunks/disclose-version.BOfWGsg9.js";import{p as C,g as S,i as g,f as I,a as x,h as p,b as l,s as _,c as v,e as b,r as $,d as E}from"../chunks/runtime.CmPLUjJJ.js";import{i as j}from"../chunks/if.DoU_1wcm.js";import{s as y}from"../chunks/attributes.yGGqmlPO.js";import{p as h}from"../chunks/proxy.DKs42Gzo.js";import{s as z,a as B}from"../chunks/store.BN9B0iWR.js";import{S as D}from"../chunks/SvgIcon.Cn9REWmg.js";import{N as P}from"../chunks/index.Dq_7tmzI.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.Kk8Ai2k7.js";import{A as L}from"../chunks/AppBar.pSMxueMf.js";import{p as O}from"../chunks/stores.BgpLsI8J.js";import"../chunks/index.DQ4XhlMg.js";import{A as T}from"../chunks/autotable.D5y0wA8l.js";import{L as q}from"../chunks/loader._7BlSOYJ.js";import{g as F}from"../chunks/entry.CytXzrzW.js";import{f as G}from"../chunks/index.UdVxqQke.js";var H=n('<ol class="breadcrumb"><li class="crumb"><a class="anchor" href="/z/pages/portal/projects/books">Books</a></li> <li class="crumb-separator">&rsaquo;</li> <li class="crumb">Estimates</li></ol>'),J=n('<a class="btn variant-ghost-primary btn-sm"><!> Estimate</a>'),K=n("<!> <!>",1);function la(w,A){C(A,!0);const k=z(),r=B(O,"$page",k).params.pid,m=P(S("__api__"));let c=g(h([])),o=g(!0);const d=async()=>{p(o,!0);const t=await m.listEstimate(r);t.status===200&&(p(c,h((t.data||[]).map(s=>({...s,total:G(s.total),created_at:new Date(s.created_at).toISOString(),updated_at:new Date(s.updated_at).toISOString()})))),p(o,!1))};d();var f=K(),u=I(f);L(u,{$$slots:{lead:(t,s)=>{var a=H(),e=_(v(a),2);y(e,"aria-hidden",!0),b(2),$(a),i(t,a)},trail:(t,s)=>{var a=J();y(a,"href",`/z/pages/portal/projects/books/${r}/estimates/new`);var e=v(a);D(e,{className:"h-4 w-4",name:"plus"}),b(),$(a),i(t,a)}}});var N=_(u,2);j(N,()=>l(o),t=>{q(t,{})},t=>{var s=E(()=>[{Name:"preview",Class:"variant-filled-primary",Action:async a=>{F(`/z/pages/portal/projects/books/${r}/estimates/preview?sid=${a}`)}},{Name:"options",Class:"variant-filled-secondary",Action:async a=>{}},{Name:"delete",Class:"variant-filled-error",Action:async a=>{(await m.deleteEstimate(r,a)).status===200&&d()}}]);T(t,{action_key:"id",key_names:[["id","ID"],["title","Title"],["notes","Notes"],["total","Total"],["created_at","Created At"]],get datas(){return l(c)},get actions(){return l(s)}})}),i(w,f),x()}export{la as component};
