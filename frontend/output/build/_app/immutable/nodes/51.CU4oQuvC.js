import{c as I,a as k}from"../chunks/disclose-version.BOfWGsg9.js";import{p as E,g as L,i as o,f as P,a as S,h as e,b as a,d as n}from"../chunks/runtime.CmPLUjJJ.js";import{i as A}from"../chunks/if.DoU_1wcm.js";import{p as f}from"../chunks/proxy.DKs42Gzo.js";import{s as B,a as $}from"../chunks/store.BN9B0iWR.js";import{N as j}from"../chunks/index.Dq_7tmzI.js";import{p as q}from"../chunks/stores.DkdCKZTz.js";import"../chunks/index.DQ4XhlMg.js";import"../chunks/autotable.D5y0wA8l.js";import{L as z}from"../chunks/loader._7BlSOYJ.js";import{p as F}from"../chunks/index.COSOhg_g.js";import{S as G}from"../chunks/SalesPreview.DCoZNf49.js";function Z(x,w){E(w,!0);const u=B(),C=()=>$(q,"$page",u),N=()=>$(F,"$params",u),i=C().params.pid,b=N().sid,g=j(L("__api__"));let p=o(void 0),_=o(f([])),m=o(!0),d=o(!0);const h=async()=>{e(m,!0);const t=await g.listContacts(i);t.status===200&&(e(_,f(t.data)),e(m,!1))};(async()=>{e(d,!0);const t=await g.getEstimate(i,b);t.status===200&&(e(p,f(t.data)),e(d,!1),console.log("@sale_data",t.data))})(),h();let y=n(()=>a(_).reduce((t,r)=>{const c=r.id,l=r.name;return t[c]=l,t},{}));var v=I(),D=P(v);A(D,()=>a(m)||a(d),t=>{z(t,{})},t=>{var r=n(()=>{var s;return(s=a(p))==null?void 0:s.estimate}),c=n(()=>{var s;return(s=a(p))==null?void 0:s.lines}),l=n(()=>Number(i));G(t,{name:"Estimate",get data(){return a(r)},get lines(){return a(c)},get pid(){return a(l)},get contactsNameIndex(){return a(y)}})}),k(x,v),S()}export{Z as component};
