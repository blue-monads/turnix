import{a as d,t as v,b as it}from"../chunks/uYeY98Ep.js";import{p as nt,g as dt,h as _,u as pt,t as A,a as vt,i,d as t,f as ut,c as l,s as y,r as a,b as ft,e as F}from"../chunks/CRNwc6nF.js";import{s as M}from"../chunks/CdHdDXtF.js";import{i as z}from"../chunks/DPugg-eY.js";import{e as D,i as G}from"../chunks/Bbg2O9W9.js";import{d as ct}from"../chunks/CHLatDmB.js";import{p}from"../chunks/Ycl9y-hy.js";import{p as mt}from"../chunks/B33JRQ5o.js";import{s as _t,a as gt}from"../chunks/xNd68Pov.js";import"../chunks/Zb-LiZS2.js";import"../chunks/BmWNUg7v.js";import{T as xt,a as U}from"../chunks/CUH6vHtO.js";import{C as V}from"../chunks/LuMZZBmK.js";import{s as bt,S as ht}from"../chunks/CJp-zUAu.js";import{S as $t}from"../chunks/CTtbmK_c.js";import{p as yt}from"../chunks/bUAA_rse.js";import{j as jt}from"../chunks/BbxmcxOi.js";import{L as wt}from"../chunks/DDEYG0vs.js";const Ct=async(I,x,j,L,S,w,b)=>{i(x,!0),i(j,"");const u=await L.runProjectSQL2(S,{qstr:t(w),data:[]});if(u.status!==200){i(j,`${u.statusText} : ${u.data}`);return}i(b,p(u.data)),i(x,!1)};var Lt=v("<span>SQL</span>"),St=v("<span>Formatter</span>"),qt=v("<!> <!>",1),Pt=v('<div class="min-h-10 card overflow-auto resize-y p-2"><!></div>'),Qt=v('<td class="p-1"> </td>'),kt=v('<td class="p-1"><!></td>'),Tt=v("<tr></tr>"),Ot=v('<table class="table table-hover overflow-auto input"><thead><tr></tr></thead><tbody></tbody></table>'),Rt=v('<div class="flex flex-col w-full h-[94vh] p-2"><div class="w-full p-2 rounded"><!></div> <div><p class="text-red-600"> </p></div> <div class="flex justify-end p-2"><button class="inline-flex rounded p.05 variant-filled self-center"><!> Run</button></div> <div class="w-full h-full p-2 overflow-auto"><!></div></div>');function Zt(I,x){nt(x,!0);const[j,L]=_t(),S=()=>gt(yt,"$page",j);let w=mt(x,"isReadOnly",3,!1),b=_("select * from __project__Accounts;"),u=_(`const process = (ctx) => {
}`);const W=S().params.pid,X=dt("__api__");let C=_(p([])),N=_(!1),h=_("sql"),B=_(""),$=_(p([]));pt(()=>{if(!t(C).length){i($,p([]));return}const r=Object.keys(t(C)[0]);r.includes("id")?i($,p(["id",...r.filter(f=>f!=="id")])):i($,p(r))});var q=Rt(),P=l(q),Y=l(P);xt(Y,{children:(r,f)=>{var n=qt(),c=ut(n);U(c,{name:"SQL Query",value:"sql",get group(){return t(h)},set group(s){i(h,p(s))},children:(s,o)=>{var e=Lt();d(s,e)},$$slots:{default:!0}});var g=y(c,2);U(g,{name:"Formatter",value:"formatter",get group(){return t(h)},set group(s){i(h,p(s))},children:(s,o)=>{var e=St();d(s,e)},$$slots:{default:!0}}),d(r,n)},$$slots:{default:!0,panel:(r,f)=>{var n=Pt(),c=l(n);{var g=o=>{const e=F(()=>bt({dialect:ht}));V(o,{get readonly(){return w()},extensions:[],get lang(){return t(e)},get value(){return t(b)},set value(m){i(b,p(m))}})},s=o=>{const e=F(jt);V(o,{get readonly(){return w()},extensions:[],get lang(){return t(e)},get value(){return t(u)},set value(m){i(u,p(m))}})};z(c,o=>{t(h)==="sql"?o(g):o(s,!1)})}a(n),d(r,n)}}}),a(P);var Q=y(P,2),E=l(Q),Z=l(E,!0);a(E),a(Q);var k=y(Q,2),T=l(k);T.__click=[Ct,N,B,X,W,b,C];var tt=l(T);$t(tt,{className:"w-4 h-4 mt-1",name:"play"}),ft(),a(T),a(k);var H=y(k,2),et=l(H);{var at=r=>{wt(r,{})},rt=r=>{var f=Ot(),n=l(f),c=l(n);D(c,21,()=>t($),G,(s,o)=>{var e=Qt(),m=l(e,!0);a(e),A(()=>M(m,t(o))),d(s,e)}),a(c),a(n);var g=y(n);D(g,21,()=>t(C),G,(s,o)=>{var e=Tt();D(e,21,()=>t($),G,(m,J)=>{var O=kt();const st=F(()=>t(o)[t(J)]);var ot=l(O);{var lt=R=>{var K=it();A(()=>M(K,t(o)[t(J)])),d(R,K)};z(ot,R=>{t(st)!==void 0&&R(lt)})}a(O),d(m,O)}),a(e),d(s,e)}),a(g),a(f),d(r,f)};z(et,r=>{t(N)?r(at):r(rt,!1)})}a(H),a(q),A(()=>M(Z,t(B))),d(I,q),vt(),L()}ct(["click"]);export{Zt as component};
