import{c as D,a as I}from"../chunks/disclose-version.BOfWGsg9.js";import{p as S,g as k,i as o,f as L,a as P,h as e,b as a,d as u}from"../chunks/runtime.CmPLUjJJ.js";import{i as A}from"../chunks/if.DoU_1wcm.js";import{p as m}from"../chunks/proxy.DKs42Gzo.js";import{s as B,a as g}from"../chunks/store.BN9B0iWR.js";import{N as j}from"../chunks/index.Dq_7tmzI.js";import{p as q}from"../chunks/stores.DkdCKZTz.js";import"../chunks/index.DQ4XhlMg.js";import"../chunks/autotable.D5y0wA8l.js";import{L as z}from"../chunks/loader._7BlSOYJ.js";import{p as E}from"../chunks/index.COSOhg_g.js";import{S as F}from"../chunks/SalesPreview.DCoZNf49.js";function Y(_,$){S($,!0);const d=B(),v=()=>g(q,"$page",d),x=()=>g(E,"$params",d),r=v().params.pid,w=x().sid,c=j(k("__api__"));let n=o(void 0),l=o(m([])),i=o(!0),p=o(!0);const C=async()=>{e(i,!0);const t=await c.listContacts(r);t.status===200&&(e(l,m(t.data)),e(i,!1))};(async()=>{e(p,!0);const t=await c.getSale(r,w);t.status===200&&(e(n,m(t.data)),e(p,!1),console.log("@sale_data",t.data))})(),C();let N=u(()=>a(l).reduce((t,s)=>{const h=s.id,y=s.name;return t[h]=y,t},{}));var f=D(),b=L(f);A(b,()=>a(i)||a(p),t=>{z(t,{})},t=>{var s=u(()=>Number(r));F(t,{get lines(){return a(n).lines},get data(){return a(n).sale},get pid(){return a(s)},get contactsNameIndex(){return a(N)}})}),I(_,f),P()}export{Y as component};
