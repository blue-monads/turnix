import{a as d,t as h,c as P}from"../chunks/disclose-version.BOfWGsg9.js";import{p as S,g as q,i as _,f as y,a as M,h as f,b as o,c as n,s as x,r as l,e as b}from"../chunks/runtime.CmPLUjJJ.js";import{i as C}from"../chunks/if.DoU_1wcm.js";import{k as D}from"../chunks/key.B3I6Q0YW.js";import{s as A}from"../chunks/attributes.yGGqmlPO.js";import{p as m}from"../chunks/proxy.DKs42Gzo.js";import{s as E,a as F}from"../chunks/store.BN9B0iWR.js";import{S as N}from"../chunks/SvgIcon.Cn9REWmg.js";import{f as O,T as R}from"../chunks/format.BBsRjD1n.js";import{g as W}from"../chunks/stores.C0Vv8-i4.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.B5GFseBd.js";import{A as G}from"../chunks/AppBar.DRZCjzsx.js";import{N as H}from"../chunks/index.Dq_7tmzI.js";import"../chunks/index.DnNofn7z.js";import"../chunks/autotable.D5y0wA8l.js";import{L as J}from"../chunks/loader._7BlSOYJ.js";import{p as K}from"../chunks/stores.DkdCKZTz.js";var Q=h('<div slot="lead" class="flex gap-2"><ol class="breadcrumb"><li class="crumb"><a class="anchor" href="/z/pages/portal/projects/books">Books</a></li> <li class="crumb-separator" aria-hidden="">&rsaquo;</li> <li class="crumb"><a class="anchor">Account</a></li> <li class="crumb-separator" aria-hidden="">&rsaquo;</li> <li class="crumb">Transactions</li></ol></div>'),U=h('<div slot="trail" class="flex gap-2"><button class="inline-flex gap-1"><!> Find</button> <a class="inline-flex gap-1"><!> New</a></div>'),V=h("<!> <!>",1);function va(T,L){S(L,!0);const j=E(),p=F(K,"$page",j).params.pid,$=H(q("__api__"));W();let g=_(!0),u=_(m([])),k=m({}),e=_(m([]));(async()=>{const t=await $.listAccount(p);f(g,!0),await v(!0),(await t).data.forEach(a=>{const s=a.id;k[s]=a.name}),f(g,!1)})();const v=async t=>{const r=o(e).length>0?o(e).at(-1):0;!t&&o(e).length>0&&f(e,m(o(e).slice(0,-1)));const a=await $.listTxnWithLines(p,r);if(a.status!==200)return;const{maxId:s,txns:i}=O(a.data);f(u,m(i)),o(e).push(s)};var w=V(),I=y(w);G(I,{$$slots:{lead:(t,r)=>{var a=Q(),s=n(a),i=x(n(s),4),c=n(i);A(c,"href",`/z/pages/portal/projects/books/${p}`),l(i),b(4),l(s),l(a),d(t,a)},trail:(t,r)=>{var a=U(),s=n(a),i=n(s);N(i,{name:"magnifying-glass",className:"w-5 h-5"}),b(),l(s);var c=x(s,2);A(c,"href",`/z/pages/portal/projects/books/${p}/txn/new`);var B=n(c);N(B,{name:"plus",className:"w-5 h-5"}),b(),l(c),l(a),d(t,a)}}});var z=x(I,2);C(z,()=>o(g),t=>{J(t,{})},t=>{var r=P(),a=y(r);D(a,()=>o(u),s=>{R(s,{get accountsIndex(){return k},get lineData(){return o(u)},pid:p,$$events:{prev_page:()=>v(!1),next_page:()=>v(!0)}})}),d(t,r)}),d(T,w),M()}export{va as component};
