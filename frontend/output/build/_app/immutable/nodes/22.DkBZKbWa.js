import{c as v,a as o,t as j}from"../chunks/disclose-version.BOfWGsg9.js";import{p as S,g as A,i as b,f as g,b as a,a as C,h as p,c as E,r as Q,t as F}from"../chunks/runtime.CmPLUjJJ.js";import{s as H}from"../chunks/render.CZQ66Y_F.js";import{i as k}from"../chunks/if.DoU_1wcm.js";import{k as I}from"../chunks/key.B3I6Q0YW.js";import{e as J,i as K}from"../chunks/each.BJPUi07-.js";import{p as l}from"../chunks/proxy.DKs42Gzo.js";import{s as G,a as L}from"../chunks/store.BN9B0iWR.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.Kk8Ai2k7.js";import{T as M,a as N}from"../chunks/Tab.DYwUpmHc.js";import{p as D}from"../chunks/index.CqTR9n69.js";import{E as O}from"../chunks/EasyGrid.Cv0QWozq.js";function R($,i){S(i,!0);const y=G(),f=L(D,"$params",y).pid,_=A("__api__");let s=b(l([])),e=b(!0);(async()=>{p(e,!0);const t=await _.listProjectTableColumns(f,i.table);t.status===200&&(p(s,l(t.data.map(r=>({title:r.name,key:r.name,type:"text"})))),p(e,!1))})();var n=v(),x=g(n);k(x,()=>!a(e),t=>{O(t,{key:"id",get columns(){return a(s)},enablePagination:!0,enableSidebar:!0,enableSort:!0,onLoad:async r=>{const m=await _.autoQueryProjectTable(f,i.table,r);return m.status!==200?[]:(console.log("@resp",m.data),m.data)}})}),o($,n),C()}var U=j('<div class="flex justify-center items-center h-full"><span class="text-gray-500">Empty</span></div>'),V=j("<span> </span>"),W=j('<div class="flex flex-col w-full h-[94vh] p-2"><!></div>');function it($,i){S(i,!0);const y=G(),f=L(D,"$params",y).pid,_=A("__api__");let s=b(l([])),e=b(null);(async()=>{const t=await _.listProjectTables(f);t.status===200&&(p(s,l(t.data)),p(e,l(a(s).at(0))))})();var n=W(),x=E(n);k(x,()=>a(s).length===0,t=>{var r=U();o(t,r)},t=>{M(t,{children:(r,m)=>{var c=v(),h=g(c);J(h,17,()=>a(s),K,(P,u)=>{N(P,{get group(){return a(e)},set group(d){p(e,l(d))},name:"SQL Query",get value(){return a(u)},children:(d,w)=>{var T=V(),B=E(T);Q(T),F(()=>H(B,a(u))),o(d,T)},$$slots:{default:!0}})}),o(r,c)},$$slots:{default:!0,panel:(r,m)=>{var c=v(),h=g(c);k(h,()=>a(e),P=>{var u=v(),d=g(u);I(d,()=>a(e),w=>{R(w,{get table(){return a(e)}})}),o(P,u)}),o(r,c)}}})}),Q(n),o($,n),C()}export{it as component};
