import{c as g,a as n,t as E}from"../chunks/Celh2SBM.js";import{p as C,g as G,i as b,f as $,d as t,a as L,h as c,c as S,r as A,t as J}from"../chunks/BC9Cf8Q3.js";import{s as K}from"../chunks/BTw4jHF_.js";import{i as w}from"../chunks/BgSg1_cg.js";import{k as M}from"../chunks/C7D5lwhK.js";import{e as N,i as O}from"../chunks/BqP2cxbq.js";import{p as m}from"../chunks/CKwprqj2.js";import{s as D,a as q}from"../chunks/BvXhjoeW.js";import"../chunks/CRz77-DP.js";import"../chunks/B857cCpa.js";import{T as R,a as U}from"../chunks/Bzk7-iQC.js";import{p as z}from"../chunks/DK_nkBS0.js";import{E as V}from"../chunks/Crh2YWQ8.js";function W(y,u){C(u,!0);const[x,h]=D(),v=q(z,"$params",x).pid,_=G("__api__");let o=b(m([])),e=b(!0);(async()=>{c(e,!0);const s=await _.listProjectTableColumns(v,u.table);s.status===200&&(c(o,m(s.data.map(a=>({title:a.name,key:a.name,type:"text"})))),c(e,!1))})();var l=g(),P=$(l);{var T=s=>{V(s,{key:"id",get columns(){return t(o)},enablePagination:!0,enableSidebar:!0,enableSort:!0,onLoad:async a=>{const r=await _.autoQueryProjectTable(v,u.table,a);return r.status!==200?[]:(console.log("@resp",r.data),r.data)}})};w(P,s=>{t(e)||s(T)})}n(y,l),L(),h()}var X=E('<div class="flex justify-center items-center h-full"><span class="text-gray-500">Empty</span></div>'),Y=E("<span> </span>"),Z=E('<div class="flex flex-col w-full h-[94vh] p-2"><!></div>');function fa(y,u){C(u,!0);const[x,h]=D(),v=q(z,"$params",x).pid,_=G("__api__");let o=b(m([])),e=b(null);(async()=>{const a=await _.listProjectTables(v);a.status===200&&(c(o,m(a.data)),c(e,m(t(o).at(0))))})();var l=Z(),P=S(l);{var T=a=>{var r=X();n(a,r)},s=a=>{R(a,{children:(r,H)=>{var f=g(),k=$(f);N(k,17,()=>t(o),O,(j,p)=>{U(j,{name:"SQL Query",get value(){return t(p)},get group(){return t(e)},set group(i){c(e,m(i))},children:(i,Q)=>{var d=Y(),I=S(d,!0);A(d),J(()=>K(I,t(p))),n(i,d)},$$slots:{default:!0}})}),n(r,f)},$$slots:{default:!0,panel:(r,H)=>{var f=g(),k=$(f);{var j=p=>{var i=g(),Q=$(i);M(Q,()=>t(e),d=>{W(d,{get table(){return t(e)}})}),n(p,i)};w(k,p=>{t(e)&&p(j)})}n(r,f)}}})};w(P,a=>{t(o).length===0?a(T):a(s,!1)})}A(l),n(y,l),L(),h()}export{fa as component};
