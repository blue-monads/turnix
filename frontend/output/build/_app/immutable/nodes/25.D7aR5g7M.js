import{a as p,t as c}from"../chunks/uYeY98Ep.js";import{p as N,g as x,h as _,f as z,a as L,i as n,d as $,c as S,b as E,r as I,s as R}from"../chunks/CRNwc6nF.js";import{d as B}from"../chunks/CHLatDmB.js";import{i as D}from"../chunks/DPugg-eY.js";import{p as y}from"../chunks/Ycl9y-hy.js";import{s as M,a as U}from"../chunks/xNd68Pov.js";import{p as q}from"../chunks/BIb1nXgJ.js";import"../chunks/D8sggRce.js";import{A as F}from"../chunks/g85Fs1Im.js";import{L as G}from"../chunks/DDEYG0vs.js";import{g as l}from"../chunks/lZe3btPj.js";import{g as H}from"../chunks/Cd_4edPv.js";import"../chunks/Zb-LiZS2.js";import"../chunks/BmWNUg7v.js";import{A as J}from"../chunks/C9oD0EKA.js";import{S as K}from"../chunks/CTtbmK_c.js";var O=c('<h4 class="h4">Projects Plugins</h4>'),Q=(m,e,r)=>{e.trigger({type:"component",component:"project_new_plugin_picker",meta:{pid:r}})},T=c('<button class="btn btn-sm variant-ghost-secondary"><!> Plugin</button>'),V=c("<!> <!>",1);function dt(m,e){N(e,!0);const[r,h]=M(),A=()=>U(q,"$params",r),d=x("__api__");let s=A().pid,g=_(y([])),i=_(!0);const u=async()=>{n(i,!0);const t=await d.listProjectPlugins(s);t.status===200&&(n(g,y(t.data)),n(i,!1))};u();const b=H(),P=async t=>{(await d.removeProjectPlugin(s,t)).status===200&&u()};var f=V(),v=z(f);J(v,{$$slots:{lead:(t,o)=>{var a=O();p(t,a)},trail:(t,o)=>{var a=T();a.__click=[Q,b,s];var C=S(a);K(C,{name:"plus",className:"w-6 h-6"}),E(),I(a),p(t,a)}}});var j=R(v,2);{var k=t=>{G(t,{})},w=t=>{F(t,{get datas(){return $(g)},action_key:"id",key_names:[["id","ID"],["name","Name"],["ptype","type"],["created_at","Created At"],["updated_at","Updated At"]],color:["ptype"],actions:[{Name:"Run",Class:"variant-filled-success",Action:async(o,a)=>{console.log("@run",o,a),l(`/z/pages/portal/project/plugins/run?pid=${s}&id=${o}`)}},{Name:"Live Editor",Class:"variant-filled-primary",Action:async(o,a)=>{console.log("@view",o,a),l(`/z/pages/portal/project/plugins/view?pid=${s}&id=${o}`)}},{Name:"Raw Edit",Class:"variant-filled-secondary",Action:async(o,a)=>{console.log("@edit",o,a),l(`/z/pages/portal/project/plugins/edit?pid=${s}&id=${o}`)}},{Name:"remove",Class:"variant-filled-error",Action:P}]})};D(j,t=>{$(i)?t(k):t(w,!1)})}p(m,f),L(),h()}B(["click"]);export{dt as component};
