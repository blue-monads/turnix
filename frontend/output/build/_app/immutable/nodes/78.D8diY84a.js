import{a as l,t as c}from"../chunks/disclose-version.BOfWGsg9.js";import{p as j,g as z,i as g,f as v,a as B,h as n,b as p,c as b,e as $,r as y,s as h,d as D}from"../chunks/runtime.CmPLUjJJ.js";import{d as P}from"../chunks/events.DnYA5zBv.js";import{i as L}from"../chunks/if.DoU_1wcm.js";import{s as O}from"../chunks/attributes.yGGqmlPO.js";import{p as k}from"../chunks/proxy.DKs42Gzo.js";import{s as T,a as q}from"../chunks/store.BN9B0iWR.js";import{S as w}from"../chunks/SvgIcon.Cn9REWmg.js";import{N as E}from"../chunks/index.Dq_7tmzI.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.Kk8Ai2k7.js";import{A as F}from"../chunks/AppBar.pSMxueMf.js";import{p as G}from"../chunks/stores.BgpLsI8J.js";import"../chunks/index.DQ4XhlMg.js";import{A as H}from"../chunks/autotable.D5y0wA8l.js";import{L as J}from"../chunks/loader._7BlSOYJ.js";import{g as K}from"../chunks/entry.CytXzrzW.js";import{f as M}from"../chunks/index.UdVxqQke.js";var Q=c('<ol class="breadcrumb"><li class="crumb"><a class="anchor" href="/z/pages/portal/projects/books">Books</a></li> <li class="crumb-separator" aria-hidden="">&rsaquo;</li> <li class="crumb">Sales</li></ol>'),R=()=>{},U=c('<a class="btn variant-ghost-primary btn-sm"><!> Sale</a> <button class="btn variant-filled-secondary btn-sm"><!> Close</button>',1),V=c("<!> <!>",1);function ua(S,A){j(A,!0);const N=T(),e=q(G,"$page",N).params.pid,m=E(z("__api__"));let d=g(k([])),o=g(!0);const f=async()=>{n(o,!0);const a=await m.listSales(e);a.status===200&&(n(d,k((a.data||[]).map(s=>({...s,total:M(s.total),created_at:new Date(s.created_at).toISOString(),updated_at:new Date(s.updated_at).toISOString()})))),n(o,!1))};f();var u=V(),_=v(u);F(_,{$$slots:{lead:(a,s)=>{var t=Q();l(a,t)},trail:(a,s)=>{var t=U(),r=v(t);O(r,"href",`/z/pages/portal/projects/books/${e}/sales/new`);var I=b(r);w(I,{className:"h-4 w-4",name:"plus"}),$(),y(r);var i=h(r,2);i.__click=[R];var x=b(i);w(x,{className:"h-4 w-4 mr-1",name:"check"}),$(),y(i),l(a,t)}}});var C=h(_,2);L(C,()=>p(o),a=>{J(a,{})},a=>{var s=D(()=>[{Name:"preview",Class:"variant-filled-primary",Action:async t=>{K(`/z/pages/portal/projects/books/${e}/sales/preview?sid=${t}`)}},{Name:"options",Class:"variant-filled-secondary",Action:async t=>{}},{Name:"delete",Class:"variant-filled-error",Action:async t=>{(await m.deleteSale(e,t)).status===200&&f()}}]);H(a,{action_key:"id",key_names:[["id","ID"],["title","Title"],["notes","Notes"],["total","Total"],["created_at","Created At"]],get datas(){return p(d)},color:["ctype"],get actions(){return p(s)}})}),l(S,u),B()}P(["click"]);export{ua as component};
