import{a as i,t as l}from"../chunks/uYeY98Ep.js";import{p as x,g as E,h as u,f as j,a as z,i as p,d as g,s as _,c as v,b,r as $}from"../chunks/CRNwc6nF.js";import{i as B}from"../chunks/DPugg-eY.js";import{s as y}from"../chunks/Bo8IgBjd.js";import{p as h}from"../chunks/Ycl9y-hy.js";import{s as D,a as P}from"../chunks/xNd68Pov.js";import{S as L}from"../chunks/CTtbmK_c.js";import{N as O}from"../chunks/Dq_7tmzI.js";import"../chunks/dt-uJVo0.js";import"../chunks/BmWNUg7v.js";import{A as T}from"../chunks/CqfoOsKq.js";import{p as q}from"../chunks/bUAA_rse.js";import"../chunks/DSROIJzG.js";import{A as F}from"../chunks/g85Fs1Im.js";import{L as G}from"../chunks/DDEYG0vs.js";import{g as H}from"../chunks/lZe3btPj.js";import{f as J}from"../chunks/8TB5Umy4.js";var K=l('<ol class="breadcrumb"><li class="crumb"><a class="anchor" href="/z/pages/portal/projects/books">Books</a></li> <li class="crumb-separator">&rsaquo;</li> <li class="crumb">Estimates</li></ol>'),M=l('<a class="btn variant-ghost-primary btn-sm"><!> Estimate</a>'),Q=l("<!> <!>",1);function ca(w,A){x(A,!0);const[k,N]=D(),r=P(q,"$page",k).params.pid,m=O(E("__api__"));let n=u(h([])),e=u(!0);const c=async()=>{p(e,!0);const a=await m.listEstimate(r);a.status===200&&(p(n,h((a.data||[]).map(t=>({...t,total:J(t.total),created_at:new Date(t.created_at).toISOString(),updated_at:new Date(t.updated_at).toISOString()})))),p(e,!1))};c();var d=Q(),f=j(d);T(f,{$$slots:{lead:(a,t)=>{var s=K(),o=_(v(s),2);y(o,"aria-hidden",!0),b(2),$(s),i(a,s)},trail:(a,t)=>{var s=M();y(s,"href",`/z/pages/portal/projects/books/${r}/estimates/new`);var o=v(s);L(o,{className:"h-4 w-4",name:"plus"}),b(),$(s),i(a,s)}}});var C=_(f,2);{var S=a=>{G(a,{})},I=a=>{F(a,{action_key:"id",key_names:[["id","ID"],["title","Title"],["notes","Notes"],["total","Total"],["created_at","Created At"]],get datas(){return g(n)},actions:[{Name:"preview",Class:"variant-filled-primary",Action:async t=>{H(`/z/pages/portal/projects/books/${r}/estimates/preview?sid=${t}`)}},{Name:"options",Class:"variant-filled-secondary",Action:async t=>{}},{Name:"delete",Class:"variant-filled-error",Action:async t=>{(await m.deleteEstimate(r,t)).status===200&&c()}}]})};B(C,a=>{g(e)?a(S):a(I,!1)})}i(w,d),z(),N()}export{ca as component};
