import{a as r,t as s,c as ae,b as We}from"./Celh2SBM.js";import{p as ta,c as l,d as e,r as t,t as x,s as u,a as ra,f as B,i as L,h as _,u as ya,e as $e}from"./BC9Cf8Q3.js";import{s as te}from"./BTw4jHF_.js";import{s as qe}from"./Bq7wcGJH.js";import{i as d}from"./BgSg1_cg.js";import{e as de,i as ue}from"./BqP2cxbq.js";import{r as Ve,b as ea,s as Ge,d as ma}from"./DMueVNEq.js";import{s as je}from"./VNVQYHFW.js";import{d as la}from"./x8LL7je8.js";import{p as m}from"./CKwprqj2.js";import{i as oa,s as na}from"./s7-mFsCb.js";import{b as xa}from"./B96pt0vU.js";import{p as Ee}from"./BV18QS1o.js";import{S as ce}from"./CdW99GA5.js";const ka={equal:["value"],not_equal:["value"],contains:["value"],not_contains:["value"],starts_with:["value"],ends_with:["value"],is_null:["novalue"],is_not_null:["novalue"],between:["range"],not_between:["range"],greater_than:["value"],less_than:["value"],greater_than_or_equal:["value"],less_than_or_equal:["value"]},wa=Object.keys(ka);var Fa=(i,a)=>{e(a).operator=i.target.value},Pa=s("<option> </option>"),Sa=(i,a)=>{e(a).value[0]=i.target.value},Aa=(i,a)=>{e(a).value[1]=i.target.value},Ea=s('<input class="p-2 border" type="text"> <input class="p-2 border" type="text">',1),Ca=(i,a)=>{e(a).value[0]=i.target.value},Na=s('<input class="p-2 border" type="text">'),Oa=s('<div class="flex flex-col gap-2 border "><select class="p-2"></select> <!></div>'),Ra=(i,a,o)=>{a.push({fiterType:o.column.type||"text",operator:"equal",value:[]})},Ia=(i,a,o)=>{a.applyFilter(a.column,o)},La=s('<div class="flex flex-col gap-2 text-xs p-1"><!> <button class="btn bg-gray-50 hover:bg-gray-100">add</button> <div class="flex justify-end gap-1"><button class="btn btn-sm variant-filled">close</button> <button class="btn btn-sm variant-filled-tertiary">clear</button> <button class="btn btn-sm variant-filled-primary">apply</button></div></div>');function Ma(i,a){ta(a,!0);const o=m(a.currentFilterModel||[{fiterType:a.column.type||"text",operator:"equal",value:[]}]);var W=La(),Y=l(W);de(Y,17,()=>o,ue,(J,f,De)=>{var Q=Oa(),E=l(Q);oa(E,()=>e(f).operator);var H;E.__change=[Fa,f],de(E,21,()=>wa,ue,(k,w)=>{var g=Pa(),O={},Ne=l(g,!0);t(g),x(()=>{O!==(O=e(w))&&(g.value=(g.__value=e(w))==null?"":e(w)),te(Ne,e(w))}),r(k,g)}),t(E);var U=u(E,2);{var re=k=>{var w=Ea(),g=B(w);Ve(g),g.__change=[Sa,f];var O=u(g,2);Ve(O),O.__change=[Aa,f],x((Ne,Xe)=>{ea(g,Ne),ea(O,Xe)},[()=>e(f).value.at(0)||"",()=>e(f).value.at(1)||""]),r(k,w)},fe=k=>{var w=Na();Ve(w),w.__change=[Ca,f],x(g=>ea(w,g),[()=>e(f).value.at(0)||""]),r(k,w)};d(U,k=>{e(f).operator==="range"?k(re):k(fe,!1)})}t(Q),x(()=>{H!==(H=e(f).operator)&&(E.value=(E.__value=e(f).operator)==null?"":e(f).operator,na(E,e(f).operator))}),r(J,Q)});var xe=u(Y,2);xe.__click=[Ra,o,a];var Te=u(xe,2),ze=l(Te);ze.__click=function(...J){var f;(f=a.closeFilter)==null||f.apply(this,J)};var ke=u(ze,2);ke.__click=function(...J){var f;(f=a.clearFilter)==null||f.apply(this,J)};var Ce=u(ke,2);Ce.__click=[Ia,a,o],t(Te),t(W),r(i,W),ra()}la(["change","click"]);var ja=s('<div class="flex justify-center items-center h-full"><span class="text-gray-500">Empty</span></div>'),qa=s('<div class="flex justify-center items-center h-full"><span class="text-gray-500">Loading...</span></div>'),Ta=(i,a,o,W,Y)=>{!a.enableSort||e(o).disableSort||(e(W)===e(o).key?e(Y)==="asc"?_(Y,"desc"):_(W,""):(_(W,m(e(o).key)),_(Y,"asc")))},za=(i,a,o)=>{console.log("@col/ev",e(a)),i.stopPropagation(),o(e(a),i)},Da=s('<span class="rounded-full absolute top-1 -right-1 w-2 h-2 bg-blue-400 shadow"></span>'),Ba=s("<div><button><!> <!></button></div>"),Wa=s('<div class="fixed rounded bg-white shadow-lg z-10 min-w-64 resize p-2 border-b"><!></div>'),Ga=s('<th class="px-2 py-1"><div class="flex gap-2"><button class="flex gap-1"><span> </span> <!></button> <!> <!></div></th>'),Va=(i,a)=>{e(a).action()},Xa=s("<button><!> </button>"),Ya=s('<th class="px-2 py-2 flex"><!></th>'),Ha=s('<tr class="hover:bg-gray-100 border-b border-gray-200 py-10 text-gray-700"><td class="px-2 py-2"><span class="p-1 rounded-lg">Loading...</span></td></tr>'),Ja=s('<tr class="hover:bg-gray-100 border-b border-gray-200 py-10 text-gray-700"><td class="px-2 py-2"><span class="p-1 rounded-lg">Empty</span></td></tr>'),Qa=s('<span class="pill"> </span>'),Ua=s("<span><!></span>"),Za=(i,a,o)=>e(a).action(e(o)[e(a).name],e(o)),Ka=s("<button><!> </button>"),$a=s('<td class="px-2 py-2 flex flex-row"></td>'),et=s('<td class="px-2 py-2"><!></td> <!>',1),at=s('<tr class="hover:bg-gray-100 border-b border-gray-200 py-10 text-gray-700"></tr>'),tt=s('<table class="table-auto border-collapse relative w-full"><thead><tr class="rounded-lg text-sm font-medium text-gray-700 text-left"><!><!></tr></thead><tbody class="text-sm font-normal text-gray-700"><!></tbody></table>'),rt=(i,a,o,W,Y)=>{e(a).includes(e(o).key)?_(a,m(e(a).filter(xe=>xe!==e(o).key))):(_(a,m([...e(a),e(o).key])),e(W).includes(e(o).key)||_(Y,!0))},lt=s('<div class="flex"><label class="flex items-center gap-2"><input type="checkbox" class="h-4 w-4 border-gray-300 rounded"> <span> </span></label></div>'),ot=s('<div class="flex flex-col gap-2 p-2"></div>'),nt=s('<div class="flex min-w-48 flex-col border-l border-gray-200 p-1 resize-x overflow-auto"><!></div>'),st=s('<!> <div class="flex w-6 flex-col border-l border-gray-200 p-1"><div class="flex justify-start gap-4 rotate-90 "><button class="hover:bg-gray-50 px-1">Columns</button></div></div>',1),vt=async(i,a)=>{a("initial")},it=(i,a,o)=>{_(a,m(Number(i.target.value))),_(o,!0),console.log("@ev",i.target.value),console.log(qe(e(a)))},_t=async(i,a)=>{a("previous")},ct=async(i,a)=>{a("next")},dt=s('<div class="flex justify-end gap-2"><button><!></button> <select class="rounded w-20 border-gray-300 border pl-2"><option>25</option><option>50</option><option>100</option><option>250</option></select> <div class="flex gap-2"><button class="btn btn-sm bg-gray-100"><!></button> <button class="btn btn-sm bg-gray-100"><!></button></div></div>'),ut=s('<div class="p-1 card"><div class="flex"><div class="flex-1 min-h-32 overflow-auto"><!></div> <!></div> <!></div>');function Et(i,a){ta(a,!0);let o=Ee(a,"columns",19,()=>[]),W=Ee(a,"handle",15),Y=Ee(a,"enableStartAutoLoad",3,!0),xe=Ee(a,"enableSidebar",3,!1),Te=Ee(a,"enablePagination",3,!0),ze=Ee(a,"enableFilter",3,!0),ke=L(m([])),Ce=L("asc"),J=L(void 0),f=L(0),De=L(0),Q=L(!1),E=L("none"),H=L(25),U=m({}),re=L(m(o().map(n=>n.key))),fe=L(m([])),k=L(null),w=L(m({top:0,left:0})),g=L(!1),O;const Ne=74;W({reload:()=>pe("initial"),next:()=>pe("next"),previous:()=>pe("previous")});const Xe=n=>{let v=Ne;for(var c=0;c<n.length;c++)v=n.charCodeAt(c)+((v<<5)-v);return v},sa=(n,v)=>{e(k)===n.key?_(k,null):(_(k,m(n.key)),setTimeout(()=>{if(O){const c=v.target.getBoundingClientRect(),G=O.getBoundingClientRect();let b=c.left+window.scrollX;const h=b+G.width,C=window.innerWidth;h>C&&(b=Math.max(0,C-G.width)),_(w,m({top:`${c.bottom+window.scrollY}px`,left:`${b}px`}))}},0))},Be=()=>{_(k,null),_(w,m({top:0,left:0}))},pe=async n=>{_(Q,!0),_(g,!1);let v=qe(e(re)),c=await a.onLoad({loadType:n,orderBy:e(J),orderDirection:e(Ce),filterModels:qe(U),activeColumns:v,minId:e(f),maxId:e(De),pageSize:e(H)});c||(c=[]),aa(c),_(Q,!1),_(fe,m(v))},aa=n=>{let v=0,c=0;if(n.length>0){let G=n[0][a.key];c=G,v=G,n.forEach(b=>{const h=b[a.key];h<e(f)&&(v=h),h>e(De)&&(c=h)})}_(f,m(v)),_(De,m(c)),_(ke,m(n))};Y()?pe("initial"):(_(fe,m(qe(e(re)))),aa(a.initialData||[])),ya(()=>{const n=v=>{O&&!O.contains(v.target)&&Be()};return document.addEventListener("click",n),()=>{document.removeEventListener("click",n)}});const va=n=>()=>{e(E)===n?_(E,"none"):_(E,m(n))};var Ye=ut(),He=l(Ye),Je=l(He),ia=l(Je);{var _a=n=>{var v=ja();r(n,v)},ca=n=>{var v=ae(),c=B(v);{var G=h=>{var C=qa();r(h,C)},b=h=>{var C=tt(),Z=l(C),M=l(Z),j=l(M);de(j,17,o,ue,(F,p)=>{var R=ae(),ne=B(R);{var ge=y=>{var P=Ga(),se=l(P),ve=l(se);ve.__click=[Ta,a,p,J,Ce];var I=l(ve),V=l(I,!0);t(I);var Fe=u(I,2);{var q=S=>{var A=ae(),z=B(A);{var ie=D=>{ce(D,{name:"chevron-down",className:"h-4 w-4"})},X=D=>{ce(D,{name:"chevron-up",className:"h-4 w-4"})};d(z,D=>{e(Ce)==="asc"?D(ie):D(X,!1)})}r(S,A)};d(Fe,S=>{e(p).key===e(J)&&S(q)})}t(ve);var be=u(ve,2);{var T=S=>{var A=Ba(),z=l(A);z.__click=[za,p,sa];var ie=l(z);{var X=Ie=>{var $=Da();r(Ie,$)};d(ie,Ie=>{U[e(p).key]&&Ie(X)})}var D=u(ie,2);ce(D,{name:"bars-3-bottom-right",className:"h-4 w-4"}),t(z),t(A),x(()=>je(z,`rounded p-0.5 relative ${(U[e(p).key]?"bg-blue-100":"")??""}`)),r(S,A)};d(be,S=>{ze()&&S(T)})}var Qe=u(be,2);{var Ue=S=>{var A=Wa(),z=l(A);const ie=$e(()=>o().find(X=>X.key===e(k)));Ma(z,{get currentFilterModel(){return U[e(k)]},closeFilter:Be,clearFilter:()=>{U[e(k)]=null,_(g,!0),Be()},get column(){return e(ie)},applyFilter:(X,D)=>{U[X.key]=D,_(g,!0),console.log(qe(U)),Be()}}),t(A),xa(A,X=>O=X,()=>O),x(()=>Ge(A,"style",`top: ${e(w).top??""}; left: ${e(w).left??""};`)),r(S,A)};d(Qe,S=>{e(k)&&S(Ue)})}t(se),t(P),x(()=>te(V,e(p).title)),r(y,P)};d(ne,y=>{e(fe).includes(e(p).key)&&e(re).includes(e(p).key)&&y(ge)})}r(F,R)});var we=u(j);{var le=F=>{var p=Ya(),R=l(p);{var ne=y=>{var P=ae(),se=B(P);de(se,17,()=>a.headerActions,ue,(ve,I)=>{var V=Xa();V.__click=[Va,I];var Fe=l(V);{var q=T=>{ce(T,{get name(){return e(I).icon},className:"h-5 w-5"})};d(Fe,T=>{e(I).icon&&T(q)})}var be=u(Fe);t(V),x(()=>{je(V,`flex m-1 btn btn-sm bg-gray-50 ${e(I).Class??""}`),te(be,` ${e(I).name??""}`)}),r(ve,V)}),r(y,P)},ge=y=>{var P=We("Actions");r(y,P)};d(R,y=>{a.headerActions?y(ne):y(ge,!1)})}t(p),r(F,p)};d(we,F=>{(a.actions||a.headerActions)&&F(le)})}t(M),t(Z);var oe=u(Z),K=l(oe);{var Oe=F=>{var p=Ha(),R=l(p);t(p),x(()=>Ge(R,"colspan",o().length)),r(F,p)},Re=F=>{var p=ae(),R=B(p);{var ne=y=>{var P=Ja(),se=l(P);t(P),x(()=>Ge(se,"colspan",o().length)),r(y,P)},ge=y=>{var P=ae(),se=B(P);de(se,17,()=>e(ke),ue,(ve,I)=>{var V=at();de(V,21,o,ue,(Fe,q)=>{var be=ae();const T=$e(()=>e(I)[e(q).key]);var Qe=B(be);{var Ue=S=>{var A=et(),z=B(A),ie=l(z);{var X=$=>{var ee=Ua(),Ze=l(ee);{var he=N=>{var me=We();x(Le=>te(me,Le),[()=>new Date(e(T)).toLocaleDateString()]),r(N,me)},ye=N=>{var me=ae(),Le=B(me);{var Me=Pe=>{var Se=Qa(),Ke=l(Se,!0);t(Se),x(()=>te(Ke,e(T))),r(Pe,Se)},ga=Pe=>{var Se=ae(),Ke=B(Se);{var ba=Ae=>{var _e=We();x(()=>te(_e,o().rendererOptions.mappings[e(T)]||"")),r(Ae,_e)},ha=Ae=>{var _e=We();x(()=>te(_e,e(I)[e(q).key]||"")),r(Ae,_e)};d(Ke,Ae=>{var _e;o().type==="lookup"&&((_e=o().rendererOptions)!=null&&_e.mappings)?Ae(ba):Ae(ha,!1)},!0)}r(Pe,Se)};d(Le,Pe=>{e(q).type==="number"?Pe(Me):Pe(ga,!1)},!0)}r(N,me)};d(Ze,N=>{e(q).type==="date"&&e(T)?N(he):N(ye,!1)})}t(ee),x(N=>{je(ee,`p-1 rounded-lg ${e(q).cssClasses||""}`),Ge(ee,"style",N)},[()=>{var N;return`background-color: ${(N=e(q).rendererOptions)!=null&&N.autoColor?`hsl(${Xe(e(T))%360}, 100%, 80%)`:""}`}]),r($,ee)};d(ie,$=>{e(T)&&$(X)})}t(z);var D=u(z,2);{var Ie=$=>{var ee=$a();de(ee,21,()=>a.actions,ue,(Ze,he)=>{var ye=Ka();ye.__click=[Za,he,I];var N=l(ye);{var me=Me=>{ce(Me,{get name(){return e(he).icon},className:"h-5 w-5"})};d(N,Me=>{e(he).icon&&Me(me)})}var Le=u(N);t(ye),x(()=>{je(ye,`flex m-1 text-white transform hover:scale-110 btn btn-sm ${e(he).Class||"bg-blue-400"}`),te(Le,` ${e(he).name??""}`)}),r(Ze,ye)}),t(ee),r($,ee)};d(D,$=>{a.actions&&$(Ie)})}r(S,A)};d(Qe,S=>{e(fe).includes(e(q).key)&&e(re).includes(e(q).key)&&S(Ue)})}r(Fe,be)}),t(V),r(ve,V)}),r(y,P)};d(R,y=>{e(ke).length===0?y(ne):y(ge,!1)},!0)}r(F,p)};d(K,F=>{e(Q)?F(Oe):F(Re,!1)})}t(oe),t(C),r(h,C)};d(c,h=>{e(Q)?h(G):h(b,!1)},!0)}r(n,v)};d(ia,n=>{o().length===0?n(_a):n(ca,!1)})}t(Je);var da=u(Je,2);{var ua=n=>{var v=st(),c=B(v);{var G=M=>{var j=nt(),we=l(j);{var le=oe=>{var K=ot();de(K,21,o,ue,(Oe,Re)=>{var F=lt(),p=l(F),R=l(p);Ve(R),R.__change=[rt,re,Re,fe,g];var ne=u(R,2),ge=l(ne,!0);t(ne),t(p),t(F),x(y=>{ma(R,y),te(ge,e(Re).title)},[()=>e(re).includes(e(Re).key)]),r(Oe,F)}),t(K),r(oe,K)};d(we,oe=>{e(E)==="columns"&&oe(le)})}t(j),r(M,j)};d(c,M=>{e(E)!="none"&&M(G)})}var b=u(c,2),h=l(b),C=l(h),Z=$e(()=>va("columns"));C.__click=function(...M){var j;(j=e(Z))==null||j.apply(this,M)},t(h),t(b),r(n,v)};d(da,n=>{xe()&&n(ua)})}t(He);var fa=u(He,2);{var pa=n=>{var v=dt(),c=l(v);c.__click=[vt,pe];var G=l(c);ce(G,{className:"h-4 w-4",name:"arrow-path"}),t(c);var b=u(c,2);oa(b,()=>e(H)+"");var h;b.__change=[it,H,g];var C=l(b);C.value=(C.__value="25")==null?"":"25";var Z=u(C);Z.value=(Z.__value="50")==null?"":"50";var M=u(Z);M.value=(M.__value="100")==null?"":"100";var j=u(M);j.value=(j.__value="250")==null?"":"250",t(b);var we=u(b,2),le=l(we);le.__click=[_t,pe];var oe=l(le);ce(oe,{className:"h-4 w-4",name:"chevron-left"}),t(le);var K=u(le,2);K.__click=[ct,pe];var Oe=l(K);ce(Oe,{className:"h-4 w-4",name:"chevron-right"}),t(K),t(we),t(v),x(()=>{je(c,`btn btn-sm  ${(e(g)?"bg-blue-200":"bg-gray-50")??""}`),h!==(h=e(H)+"")&&(b.value=(b.__value=e(H)+"")==null?"":e(H)+"",na(b,e(H)+""))}),r(n,v)};d(fa,n=>{!e(Q)&&Te()&&n(pa)})}t(Ye),r(i,Ye),ra()}la(["click","change"]);export{Et as E};
