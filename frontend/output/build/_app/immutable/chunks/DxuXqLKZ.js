import{a as e,t as n,c as y}from"./uYeY98Ep.js";import{p as H,a as J,i as u,d,h as k,c as x,f as F,r as E,t as K}from"./CRNwc6nF.js";import{d as M}from"./CHLatDmB.js";import{i as p}from"./DPugg-eY.js";import{s as g}from"./Bo8IgBjd.js";import{p as N}from"./Ycl9y-hy.js";import{b as O}from"./DdDSiWKt.js";var Q=n('<div class="svelte-vtwvgl">loading...</div>'),V=n('<img class="h-fit w-auto overflow-auto">'),X=n('<video controls><source type="video/mp4"></video>',2),Y=n('<audio controls><source type="audio/mp3"></audio>'),Z=n('<button class="btn btn-sm variant-filled">download</button>'),$=n('<div class="h-inherit w-inherit overflow-auto svelte-vtwvgl"><!></div>');function va(j,t){H(t,!0);let _=k(!1),S=k(void 0);const R=["png","jpg","jpeg","gif","bmp","webp","svg"],h=t.filename.split(".").pop();let b=R.includes(h)?"image":h==="mp4"?"video":h==="mp3"?"audio":"other",f=k("");(async()=>{u(_,!0);const a=await t.api.getFileShortKey(t.fileId);a.status===200&&(u(f,N(t.api.getFileWithShortKeyURL(a.data))),u(_,!1))})();const W=async()=>{const a=document.createElement("a");a.href=d(f),a.download=t.filename,document.body.appendChild(a),a.click()};var c=$(),C=x(c);{var I=a=>{var m=Q();e(a,m)},L=a=>{var m=y(),P=F(m);{var T=o=>{var i=V();K(()=>{g(i,"src",d(f)),g(i,"alt",t.filename)}),e(o,i)},U=o=>{var i=y(),q=F(i);{var z=r=>{var s=X(),w=x(s);E(s),K(()=>g(w,"src",d(f))),e(r,s)},A=r=>{var s=y(),w=F(s);{var B=l=>{var v=Y(),G=x(v);E(v),K(()=>g(G,"src",d(f))),e(l,v)},D=l=>{var v=Z();v.__click=W,e(l,v)};p(w,l=>{b==="audio"?l(B):l(D,!1)},!0)}e(r,s)};p(q,r=>{b==="video"?r(z):r(A,!1)},!0)}e(o,i)};p(P,o=>{b==="image"?o(T):o(U,!1)},!0)}e(a,m)};p(C,a=>{d(_)?a(I):a(L,!1)})}E(c),O(c,a=>u(S,a),()=>d(S)),e(j,c),J()}M(["click"]);export{va as F};
