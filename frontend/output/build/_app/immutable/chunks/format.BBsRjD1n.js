import{a as h,t as p}from"./disclose-version.BOfWGsg9.js";import{p as Z,c as r,s as o,f as $,r as t,b as l,t as f,e as tt,a as rt}from"./runtime.CmPLUjJJ.js";import{s as n}from"./render.CZQ66Y_F.js";import{i as R}from"./if.DoU_1wcm.js";import{e as q,i as B}from"./each.BJPUi07-.js";import{s as at}from"./attributes.yGGqmlPO.js";import{d as et}from"./events.DnYA5zBv.js";import{p as ot}from"./props.IjRlZquB.js";import{f as F}from"./index.UdVxqQke.js";import{S as G}from"./SvgIcon.Cn9REWmg.js";import{c as lt}from"./index-client.Caj9tY0k.js";var dt=p('<span class="chip variant-ghost"> </span>'),st=p('<span class="chip variant-ghost"> </span>'),ct=p('<tr><td role="gridcell"></td><td role="gridcell"></td><td role="gridcell"></td><td role="gridcell"><span class="chip variant-filled"> </span></td><td role="gridcell"><!></td><td role="gridcell"><!></td><td role="gridcell"></td><td role="gridcell"></td></tr>'),it=p('<tr><td role="gridcell"> </td><td role="gridcell"> </td><td role="gridcell"> </td><td role="gridcell"></td><td role="gridcell"></td><td role="gridcell"></td><td role="gridcell"></td><td role="gridcell"><a class="underline">edit</a></td></tr> <!>',1),nt=(c,a)=>{console.log("@prev"),a("prev_page")},vt=(c,a)=>{console.log("@next"),a("next_page")},mt=p('<div class="card m-2 overflow-x-auto"><table class="table p-0 table-compact"><thead class="table-head"><tr><th role="columnheader">#</th><th role="columnheader">Title</th><th role="columnheader">Notes</th><th role="columnheader">Account</th><th role="columnheader">Debit</th><th role="columnheader">Credit</th><th role="columnheader">Attachments</th><th role="columnheader">Actions</th></tr></thead><tbody class="table-body p-0 overflow-y-scroll w-full max-h-screen"></tbody></table> <div class="flex justify-end gap-2 p-1"><div class="flex gap-2"><button class="btn btn-sm bg-gray-100"><!></button> <button class="btn btn-sm bg-gray-100"><!></button></div></div></div>');function Dt(c,a){Z(a,!0);const i=lt();let _=ot(a,"lineData",19,()=>[]);console.log("@lines",_());var e=mt(),d=r(e),T=o(r(d));q(T,21,_,B,(K,v)=>{var E=it(),b=$(E),x=r(b),L=r(x);t(x);var y=o(x),O=r(y);t(y);var k=o(y),P=r(k);t(k);var S=o(k,5),Q=r(S);t(S),t(b);var U=o(b,2);q(U,17,()=>l(v).lines,B,(V,m)=>{var w=ct(),D=o(r(w),3),z=r(D),W=r(z);t(z),t(D);var A=o(D),X=r(A);R(X,()=>l(m).credit_amount,I=>{var s=dt(),N=r(s);f(()=>n(N,F(l(m).credit_amount))),t(s),h(I,s)}),t(A);var M=o(A),Y=r(M);R(Y,()=>l(m).debit_amount,I=>{var s=st(),N=r(s);f(()=>n(N,F(l(m).debit_amount))),t(s),h(I,s)}),t(M),tt(2),t(w),f(()=>n(W,a.accountsIndex[l(m).account_id]||"")),h(V,w)}),f(()=>{n(L,l(v).txn.id),n(O,l(v).txn.title),n(P,l(v).txn.notes),at(Q,"href",`/z/pages/portal/projects/books/${a.pid}/txn/edit?tid=${l(v).txn.id}`)}),h(K,E)}),t(T),t(d);var j=o(d,2),C=r(j),g=r(C);g.__click=[nt,i];var H=r(g);G(H,{className:"h-4 w-4",name:"chevron-left"}),t(g);var u=o(g,2);u.__click=[vt,i];var J=r(u);G(J,{className:"h-4 w-4",name:"chevron-right"}),t(u),t(C),t(j),t(e),h(c,e),rt()}et(["click"]);const At=c=>{let a={},i=0;c.lines.forEach(e=>{let d=a[e.txn_id];d||(d=[],a[e.txn_id]=d),d.push(e)});const _=c.transactions.map(e=>(i=Math.max(i,e.id),{lines:a[e.id]||[],txn:e}));return{maxId:i,txns:_}};export{Dt as T,At as f};
