import{a as d,b as O,t as Z,c as ut}from"./uYeY98Ep.js";import{p as nt,c as a,r as e,s,d as F,i as D,b as U,t as mt,a as ot,h as Y,e as bt,g as _t,f as ft}from"./CRNwc6nF.js";import{i as lt}from"./DPugg-eY.js";import{p as T}from"./Ycl9y-hy.js";import{p as o,s as vt,r as xt}from"./B33JRQ5o.js";import{s as gt,a as ht}from"./xNd68Pov.js";import"./lZe3btPj.js";import"./D8sggRce.js";import"./g85Fs1Im.js";import{L as yt}from"./DDEYG0vs.js";import{d as kt,r as wt,e as At}from"./CHLatDmB.js";import{r as h,s as Pt,b as rt}from"./Bo8IgBjd.js";import{b as S}from"./C6nodsJR.js";import{p as Nt}from"./CWmzcjye.js";import{S as X}from"./CTtbmK_c.js";import"./Zb-LiZS2.js";import"./BmWNUg7v.js";import{F as It}from"./Dflf-9w3.js";import{N as St}from"./Dq_7tmzI.js";import{g as Dt}from"./Cd_4edPv.js";import{p as Tt}from"./bUAA_rse.js";const Ft=async(_,t,c)=>{const l=await t.onPickAccount();l&&c(l)},jt=async(_,t,c)=>{const l=await t.onPickAccount();l&&c(l)};var Ct=Z('<div slot="lead" class="flex justify-center"><!></div>'),Et=Z("<strong>Upload a file</strong> or drag and drop",1),Lt=Z('<div class="p-2"><form class="card"><header class="card-header"><h4 class="h4"><!></h4></header> <section class="p-4 flex flex-col gap-4"><label class="label"><span>Title</span> <input name="title" class="input p-1" type="text" placeholder="Opening balance"></label> <div class="label border p-2 flex flex-col"><span>Lines</span> <div class="flex flex-row justify-start gap-4 items-center"><label class="label"><span>Debit Account</span> <input class="input p-1" type="text" disabled placeholder="Petty cash"></label> <button class="pt-4 cursor-pointer" type="button"><!></button> <label class="label"><span>Amount</span> <input name="debit amount" class="input p-1" type="number"></label></div> <div class="flex flex-row justify-start gap-4"><label class="label"><span>Credit Account</span> <input class="input p-1" type="text" disabled placeholder="Bank XYZ"></label> <button class="pt-4 cursor-pointer" type="button"><!></button> <label class="label"><span>Amount</span> <input name="credit amount" class="input p-1" type="number"></label></div></div> <label class="label"><span>Notes</span> <textarea class="textarea p-1" rows="4"></textarea></label> <label class="label"><span>Attachments</span> <!></label> <label class="label"><span>Reference ID</span> <input class="input p-1" type="text" placeholder="REF-123"></label></section> <footer class="card-footer flex justify-end"><button type="submit" class="btn variant-filled">save</button></footer></form></div>');function Bt(_,t){nt(t,!0);let c=Y(void 0),l=o(t,"edit",3,!1),y=o(t,"title",15,""),k=o(t,"notes",15,""),f=o(t,"debit_account_id",15,0),v=o(t,"credit_account_id",15,0),w=o(t,"debit_amount",15,100),u=o(t,"credit_amount",15,100),A=o(t,"reference_id",3,""),P=o(t,"attachments",19,()=>({})),j=o(t,"accountsIndex",19,()=>({}));var m=Lt(),x=a(m),C=bt(()=>Nt(()=>{t.onSubmit({title:y(),notes:k(),debit_account_id:f(),credit_account_id:v(),debit_amount:w(),credit_amount:u(),reference_id:A(),attachments:P()})})),g=a(x),n=a(g),b=a(n);{var q=r=>{var i=O("Edit Transaction");d(r,i)},E=r=>{var i=O("Add Transaction");d(r,i)};lt(b,r=>{l()?r(q):r(E,!1)})}e(n),e(g);var H=s(g,2),L=a(H),K=s(a(L),2);h(K),e(L);var B=s(L,2),G=s(a(B),2),R=a(G),Q=s(a(R),2);h(Q),e(R);var N=s(R,2);N.__click=[Ft,t,f];var it=a(N);X(it,{name:"arrow-up-right",className:"w-5 h-5"}),e(N);var V=s(N,2),W=s(a(V),2);h(W),e(V),e(G);var $=s(G,2),z=a($),tt=s(a(z),2);h(tt),e(z);var I=s(z,2);I.__click=[jt,t,v];var ct=a(I);X(ct,{name:"arrow-up-right",className:"w-5 h-5"}),e(I);var at=s(I,2),et=s(a(at),2);h(et),e(at),e($),e(B);var J=s(B,2),M=s(a(J),2);wt(M),Pt(M,"placeholder","Extra information about txn"),e(J);var st=s(J,2),pt=s(a(st),2);It(pt,{name:"files",get files(){return F(c)},set files(r){D(c,T(r))},$$slots:{lead:(r,i)=>{var p=Ct(),dt=a(p);X(dt,{name:"arrow-up-tray",className:"w-6 h-6"}),e(p),d(r,p)},message:(r,i)=>{var p=Et();U(),d(r,p)},meta:(r,i)=>{var p=O("PNG, JPG or PDF");d(r,p)}}}),e(st),U(2),e(H),U(2),e(x),e(m),mt(()=>{rt(Q,j()[f()]||""),rt(tt,j()[v()]||"")}),At("submit",x,function(...r){var i;(i=F(C))==null||i.apply(this,r)}),S(K,y),S(W,w),S(et,u),S(M,k),d(_,m),ot()}kt(["click"]);function ra(_,t){nt(t,!0);const[c,l]=gt(),y=()=>ht(Tt,"$page",c);let k=xt(t,["$$slots","$$events","$$legacy","onSubmit"]);const f=y().params.pid,v=St(_t("__api__")),w=Dt();let u=Y(!0),A=T({}),P=Y(T([]));(async()=>{D(u,!0);const n=await v.listAccount(f);n.status===200&&((n.data||[]).forEach(b=>{A[Number(b.id)]=b.name}),D(P,T(n.data)),D(u,!1))})();var m=ut(),x=ft(m);{var C=n=>{yt(n,{})},g=n=>{Bt(n,vt({get onSubmit(){return t.onSubmit},get accountsIndex(){return A},onPickAccount:async()=>new Promise((b,q)=>{w.trigger({type:"component",component:"books_account_picker",meta:{data:F(P),onClick:E=>{b(E)}}})})},()=>k))};lt(x,n=>{F(u)?n(C):n(g,!1)})}d(_,m),ot(),l()}export{ra as T};
