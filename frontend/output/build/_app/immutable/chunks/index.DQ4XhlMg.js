import{a as r,t as s,c as q}from"./disclose-version.BOfWGsg9.js";import{p as pa,c as i,b as a,s as N,r as o,t as l,h as va,a as ha,d as y,i as Sa,f as P,n as Ia}from"./runtime.CmPLUjJJ.js";import{s as z}from"./render.CZQ66Y_F.js";import{i as T}from"./if.DoU_1wcm.js";import{e as oa,i as sa}from"./each.BJPUi07-.js";import{r as Q,b as Z,s as g}from"./attributes.yGGqmlPO.js";import{d as fa}from"./events.DnYA5zBv.js";import{r as La}from"./misc.CveY8KIp.js";import{p as Ea}from"./proxy.DKs42Gzo.js";import{i as Ba,s as Oa}from"./select.BNLwbYi8.js";import{p as J}from"./props.IjRlZquB.js";import{r as Aa}from"./legacy-client.BxBrBVYa.js";import{_ as Pa}from"./_kv_editor.D4sPfubf.js";import{b as Xa}from"./input.BRsTNa69.js";import{S as ka}from"./SvgIcon.Cn9REWmg.js";import{c as Ma}from"./index-client.Caj9tY0k.js";import{s as Da}from"./snippet.UtI6fqho.js";import"./ProgressBar.svelte_svelte_type_style_lang.Kk8Ai2k7.js";import{A as Fa}from"./AppBar.pSMxueMf.js";var Ga=s('<div class="flex"><input type="text" class="w-full p-1 border"> <button class="bg-gray-700 rounded text-white p-2">-</button></div>'),Ua=(E,e,v,d)=>{a(e)&&(v(v()+","+a(e)),va(e,""),d())},ja=s('<div class="flex flex-col p-1 gap-1"><!> <div class="flex mt-1"><input type="text" class="p-1 w-full border"> <button class="bg-gray-700 rounded text-white p-1">+</button></div></div>');function Va(E,e){pa(e,!0);let v=J(e,"value",15,""),d=J(e,"onChange",3,null),X=J(e,"seperator",3,","),M=y(()=>v().split(X())),D=Sa("");const F=()=>{d()&&d()(v())},m=b=>B=>{const G=[...a(M)];G[b]=B.target.value,v(G.toString()),F()},S=b=>()=>{const B=a(M).filter((G,U)=>U!==b);v(B.toString()),F()};var u=ja(),I=i(u);oa(I,17,()=>a(M),sa,(b,B,G)=>{var U=Ga(),ra=i(U);Q(ra);var la=y(()=>m(G));ra.__change=function(...ia){var _;(_=a(la))==null||_.apply(this,ia)};var wa=N(ra,2),ga=y(()=>S(G));wa.__click=function(...ia){var _;(_=a(ga))==null||_.apply(this,ia)},o(U),l(()=>Z(ra,a(B))),r(b,U)});var ea=N(I,2),W=i(ea);Q(W);var L=N(W,2);L.__click=[Ua,D,v,F],o(ea),o(u),Xa(W,()=>a(D),b=>va(D,b)),r(E,u),ha()}fa(["change","click"]);const Ha=async(E,e,v)=>{va(e,!0);const d=v.onClick();d instanceof Promise&&await d,va(e,!1)};var Ra=s('<button class="btn btn-sm variant-filled"><!> </button>');function Ya(E,e){pa(e,!0);let v=J(e,"name",3,""),d=Sa(!1);var X=Ra();X.__click=[Ha,d,e];var M=i(X);T(M,()=>a(d),F=>{ka(F,{name:"arrow-path",className:"h-5 w-5 animate-spin"})},F=>{ka(F,{name:"arrow-down-on-square",className:"h-5 w-5"})});var D=N(M);o(X),l(()=>z(D,` ${v()??""}`)),r(E,X),ha()}fa(["click"]);var qa=s("<option> </option>"),za=s('<input type="text" class="p-2 input"> <datalist></datalist>',1),Ja=s('<input type="email" class="p-2 input">'),Ka=s("<option> </option>"),Za=s('<input type="text" class="p-2 input"> <datalist></datalist>',1),Qa=s("<option> </option>"),Wa=s('<select class="p-1 input"></select>'),$a=s('<div class="flex justify-between w-full"><!> <div class="w-10 p-1 text-gray-700"><button><!></button></div></div>'),at=s('<input type="text" class="p-2 shadow rounded-lg bg-gray-100 outline-none focus:bg-gray-200">'),tt=s('<textarea class="p-2 textarea"></textarea>'),et=s('<input type="number" class="p-2 shadow rounded-lg bg-gray-100 outline-none focus:bg-gray-200">'),rt=s('<div class="flex w-full justify-start"><input type="checkbox" class="p-2"></div>'),nt=s("<div>Not impl</div>"),ot=s('<div class="flex-col flex py-3"><label class="pb-2 label"> </label> <!></div>'),st=s('<div class="flex justify-end py-3"><!></div>'),vt=s('<div class="h-full w-full p-4 overflow-auto"><div class="p-5 w-full card"><h3 class="h3"> </h3> <p class="text-red-500"> </p> <!> <!></div></div>');function Pt(E,e){pa(e,!0);let v=J(e,"data",19,()=>({})),d=J(e,"modified",15,!1),X=J(e,"message",3,""),M=J(e,"onSave",3,void 0),D=J(e,"noSubmit",3,!1);const F=Ma();let m=Sa(Ea({})),S;Aa(()=>{S={}}),Aa(()=>{console.log(`FORM_DEBUG => ${e.schema.name}`,"DATA",a(m),"ORIGINAL_DATA",v(),"SCHEMA",e.schema)});const u=_=>v()[_]||"",I=_=>t=>{L(_)(t.target.value)},ea=_=>t=>{L(_)(Number(t.target.value))},W=_=>t=>{L(_)(!!t.target.checked)},L=_=>t=>{va(m,Ea({...a(m),[_]:t})),d(!0),F("modified",a(m))},b=_=>{const t="fixme";return va(m,Ea({...a(m),[_]:t})),t};var B=vt(),G=i(B),U=i(G),ra=i(U);o(U);var la=N(U,2),wa=i(la);o(la);var ga=N(la,2);oa(ga,17,()=>e.schema.fields,sa,(_,t,c)=>{var xa=ot(),ya=i(xa);g(ya,"for",`field-${c}`);var Ca=i(ya);o(ya);var Na=N(ya,2);T(Na,()=>a(t).ftype==="TEXT",Ta=>{var _a=za(),Y=P(_a);Q(Y),g(Y,"id",`field-${c??""}`),g(Y,"list",`field-${c??""}-datalist`),l(()=>Z(Y,u(a(t).key_name)));var ca=y(()=>I(a(t).key_name));Y.__change=function(...$){var A;(A=a(ca))==null||A.apply(this,$)};var k=N(Y,2);g(k,"id",`field-${c??""}-datalist`),oa(k,21,()=>a(t).options||[],sa,($,A)=>{var f=qa(),aa={},K=i(f);o(f),l(()=>{aa!==(aa=a(A))&&(f.value=(f.__value=a(A))==null?"":a(A)),z(K,a(A))}),r($,f)}),o(k),l(()=>Y.disabled=a(t).disabled),r(Ta,_a)},Ta=>{var _a=q(),Y=P(_a);T(Y,()=>a(t).ftype==="EMAIL",ca=>{var k=Ja();Q(k),g(k,"id",`field-${c??""}`),g(k,"list",`field-${c??""}-datalist`),l(()=>Z(k,u(a(t).key_name)));var $=y(()=>I(a(t).key_name));k.__change=function(...A){var f;(f=a($))==null||f.apply(this,A)},l(()=>k.disabled=a(t).disabled),r(ca,k)},ca=>{var k=q(),$=P(k);T($,()=>a(t).ftype==="SELECT",A=>{var f=$a(),aa=i(f);T(aa,()=>S[c],j=>{var h=Za(),x=P(h);Q(x),g(x,"id",`field-${c??""}`),g(x,"list",`field-${c??""}-datalist`),l(()=>Z(x,u(a(t).key_name)));var C=y(()=>I(a(t).key_name));x.__change=function(...p){var n;(n=a(C))==null||n.apply(this,p)};var V=N(x,2);g(V,"id",`field-${c??""}-datalist`),oa(V,21,()=>a(t).options||[],sa,(p,n)=>{var O=Ka(),R={},H=i(O);o(O),l(()=>{R!==(R=a(n))&&(O.value=(O.__value=a(n))==null?"":a(n)),z(H,a(n))}),r(p,O)}),o(V),l(()=>x.disabled=a(t).disabled),r(j,h)},j=>{var h=Wa();g(h,"id",`field-${c??""}`),Ba(h,()=>u(a(t).key_name));var x,C=y(()=>I(a(t).key_name));h.__change=function(...V){var p;(p=a(C))==null||p.apply(this,V)},oa(h,21,()=>a(t).options||[],sa,(V,p)=>{var n=Qa(),O={},R=i(n);o(n),l(()=>{O!==(O=a(p))&&(n.value=(n.__value=a(p))==null?"":a(p)),z(R,a(p))}),r(V,n)}),o(h),l(()=>{x!==(x=u(a(t).key_name))&&(h.value=(h.__value=u(a(t).key_name))==null?"":u(a(t).key_name),Oa(h,u(a(t).key_name)))}),r(j,h)});var K=N(aa,2),w=i(K);w.__click=()=>{S[c]=!S[c],S=S};var ua=i(w),ta=y(()=>S[c]?"lock-open":"lock-closed");ka(ua,{get name(){return a(ta)},className:"w-6 h-6"}),o(w),o(K),o(f),r(A,f)},A=>{var f=q(),aa=P(f);T(aa,()=>a(t).ftype==="TEXT_SLUG",K=>{var w=at();Q(w),g(w,"id",`field-${c??""}`),g(w,"list",`field-${c??""}-datalist`),l(()=>Z(w,u(a(t).key_name)||(a(t).slug_gen?a(t).slug_gen():b(a(t).key_name))));var ua=y(()=>I(a(t).key_name));w.__change=function(...ta){var j;(j=a(ua))==null||j.apply(this,ta)},l(()=>w.disabled=a(t).disabled),r(K,w)},K=>{var w=q(),ua=P(w);T(ua,()=>a(t).ftype==="MULTI_TEXT",ta=>{var j=y(()=>L(a(t).key_name)),h=y(()=>u(a(t).key_name));Va(ta,{get onChange(){return a(j)},get value(){return a(h)}})},ta=>{var j=q(),h=P(j);T(h,()=>a(t).ftype==="LONG_TEXT"||a(t).ftype==="TEXT_POLICY",x=>{var C=tt();La(C),g(C,"id",`field-${c}`),l(()=>Z(C,u(a(t).key_name)));var V=y(()=>I(a(t).key_name));C.__change=function(...p){var n;(n=a(V))==null||n.apply(this,p)},l(()=>C.disabled=a(t).disabled),r(x,C)},x=>{var C=q(),V=P(C);T(V,()=>a(t).ftype==="INT",p=>{var n=et();Q(n),g(n,"id",`field-${c}`),l(()=>Z(n,u(a(t).key_name)));var O=y(()=>ea(a(t).key_name));n.__change=function(...R){var H;(H=a(O))==null||H.apply(this,R)},l(()=>n.disabled=a(t).disabled),r(p,n)},p=>{var n=q(),O=P(n);T(O,()=>a(t).ftype==="BOOL",R=>{var H=rt(),na=i(H);Q(na),g(na,"id",`field-${c}`),l(()=>Z(na,u(a(t).key_name)||!1));var da=y(()=>W(a(t).key_name));na.__change=function(...ma){var ba;(ba=a(da))==null||ba.apply(this,ma)},o(H),r(R,H)},R=>{var H=q(),na=P(H);T(na,()=>a(t).ftype==="KEY_VALUE_TEXT",da=>{var ma=y(()=>v()[a(t).key_name]||{});Pa(da,{get data(){return a(ma)},onChange:ba=>{L(a(t).key_name)(JSON.stringify(ba))}})},da=>{var ma=nt();r(da,ma)},!0),r(R,H)},!0),r(p,n)},!0),r(x,C)},!0),r(ta,j)},!0),r(K,w)},!0),r(A,f)},!0),r(ca,k)},!0),r(Ta,_a)}),o(xa),l(()=>z(Ca,a(t).name)),r(_,xa)});var ia=N(ga,2);T(ia,()=>d()&&!D(),_=>{var t=st(),c=i(t);Ya(c,{name:"Save",onClick:()=>{M()&&M()(a(m))}}),o(t),r(_,t)}),o(G),o(B),l(()=>{z(ra,e.schema.name),z(wa,X()||"")}),r(E,B),ha()}fa(["change","click"]);var lt=s('<h4 class="h4 capitalize"> </h4>'),it=(E,e)=>{a(e).actionFn()},_t=s('<button class="btn btn-sm variant-filled-primary text-secondary-50"><!> </button>'),ct=s('<div slot="trail"><!></div>'),ut=s('<!> <div class="p-2"><!></div>',1);function Xt(E,e){pa(e,!0);var v=ut(),d=P(v);Fa(d,{$$slots:{lead:(D,F)=>{var m=lt(),S=i(m);o(m),l(()=>z(S,e.title)),r(D,m)},trail:(D,F)=>{var m=ct(),S=i(m);T(S,()=>e.actions,u=>{var I=q(),ea=P(I);oa(ea,17,()=>e.actions,sa,(W,L)=>{var b=_t();b.__click=[it,L];var B=i(b);T(B,()=>a(L).icon,U=>{ka(U,{get name(){return a(L).icon},className:"h-4 w-4"})});var G=N(B);o(b),l(()=>z(G,` ${a(L).name??""}`)),r(W,b)}),r(u,I)}),o(m),r(D,m)}}});var X=N(d,2),M=i(X);Da(M,()=>e.children??Ia),o(X),r(E,v),ha()}fa(["click"]);var dt=(E,e)=>{e.handler&&e.handler()},mt=s('<div class="fixed bottom-5 right-5"><button class="btn-icon variant-filled bg-primary-hover-token"><svg viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path fill-rule="evenodd" d="M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z" clip-rule="evenodd"></path></svg></button></div>');function Mt(E,e){pa(e,!0);var v=mt(),d=i(v);d.__click=[dt,e],o(v),r(E,v),ha()}fa(["click"]);export{Pt as A,Mt as F,Xt as P};
