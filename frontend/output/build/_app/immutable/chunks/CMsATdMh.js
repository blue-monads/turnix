import{a as r,t as o,c as z}from"./Celh2SBM.js";import{p as La,c as v,d as a,s as I,r as n,t as h,h as ha,a as Ba,e as x,i as Va,f as O,n as Ka}from"./BC9Cf8Q3.js";import{s as J}from"./BTw4jHF_.js";import{i as A}from"./BgSg1_cg.js";import{e as pa,i as fa}from"./BqP2cxbq.js";import{r as aa,b as $,s as k}from"./DMueVNEq.js";import{d as Ta,r as Za}from"./x8LL7je8.js";import{p as ja}from"./CKwprqj2.js";import{i as Qa,s as Wa}from"./s7-mFsCb.js";import{p as K}from"./BV18QS1o.js";import{c as $a}from"./Ct1gh0vf.js";import{r as Ha}from"./4yW3OGLw.js";import{_ as at}from"./Diz3GWx4.js";import{b as tt}from"./Dy57PNli.js";import{S as Ia}from"./CdW99GA5.js";import{s as et}from"./DnAYHjTP.js";import"./CRz77-DP.js";import"./B857cCpa.js";import{A as rt}from"./CnSBROsQ.js";var nt=o('<div class="flex"><input type="text" class="w-full p-1 border"> <button class="bg-gray-700 rounded text-white p-2">-</button></div>'),ot=(N,e,s,d)=>{a(e)&&(s(s()+","+a(e)),ha(e,""),d())},st=o('<div class="flex flex-col p-1 gap-1"><!> <div class="flex mt-1"><input type="text" class="p-1 w-full border"> <button class="bg-gray-700 rounded text-white p-1">+</button></div></div>');function vt(N,e){La(e,!0);let s=K(e,"value",15,""),d=K(e,"onChange",3,null),P=K(e,"seperator",3,","),X=x(()=>s().split(P())),M=Va("");const G=()=>{d()&&d()(s())},c=w=>T=>{const L=[...a(X)];L[w]=T.target.value,s(L.toString()),G()},i=w=>()=>{const T=a(X).filter((L,D)=>D!==w);s(T.toString()),G()};var g=st(),C=v(g);pa(C,17,()=>a(X),fa,(w,T,L)=>{var D=nt(),Z=v(D);aa(Z);var j=x(()=>c(L));Z.__change=function(...ga){var ra;(ra=a(j))==null||ra.apply(this,ga)};var Oa=I(Z,2),Ea=x(()=>i(L));Oa.__click=function(...ga){var ra;(ra=a(Ea))==null||ra.apply(this,ga)},n(D),h(()=>$(Z,a(T))),r(w,D)});var ta=I(C,2),ea=v(ta);aa(ea);var U=I(ea,2);U.__click=[ot,M,s,G],n(ta),n(g),tt(ea,()=>a(M),w=>ha(M,w)),r(N,g),Ba()}Ta(["change","click"]);const lt=async(N,e,s)=>{ha(e,!0);const d=s.onClick();d instanceof Promise&&await d,ha(e,!1)};var it=o('<button class="btn btn-sm variant-filled"><!> </button>');function _t(N,e){La(e,!0);let s=K(e,"name",3,""),d=Va(!1);var P=it();P.__click=[lt,d,e];var X=v(P);{var M=i=>{Ia(i,{name:"arrow-path",className:"h-5 w-5 animate-spin"})},G=i=>{Ia(i,{name:"arrow-down-on-square",className:"h-5 w-5"})};A(X,i=>{a(d)?i(M):i(G,!1)})}var c=I(X);n(P),h(()=>J(c,` ${s()??""}`)),r(N,P),Ba()}Ta(["click"]);var ct=o("<option> </option>"),ut=o('<input type="text" class="p-2 input"> <datalist></datalist>',1),dt=o('<input type="email" class="p-2 input">'),mt=o("<option> </option>"),pt=o('<input type="text" class="p-2 input"> <datalist></datalist>',1),ft=o("<option> </option>"),ht=o('<select class="p-1 input"></select>'),gt=o('<div class="flex justify-between w-full"><!> <div class="w-10 p-1 text-gray-700"><button><!></button></div></div>'),yt=o('<input type="text" class="p-2 shadow rounded-lg bg-gray-100 outline-none focus:bg-gray-200">'),bt=o('<textarea class="p-2 textarea"></textarea>'),kt=o('<input type="number" class="p-2 shadow rounded-lg bg-gray-100 outline-none focus:bg-gray-200">'),xt=o('<div class="flex w-full justify-start"><input type="checkbox" class="p-2"></div>'),wt=o("<div>Not impl</div>"),Tt=o('<div class="flex-col flex py-3"><label class="pb-2 label"> </label> <!></div>'),Et=o('<div class="flex justify-end py-3"><!></div>'),St=o('<div class="h-full w-full p-4 overflow-auto"><div class="p-5 w-full card"><h3 class="h3"> </h3> <p class="text-red-500"> </p> <!> <!></div></div>');function $t(N,e){La(e,!0);let s=K(e,"data",19,()=>({})),d=K(e,"modified",15,!1),P=K(e,"message",3,""),X=K(e,"onSave",3,void 0),M=K(e,"noSubmit",3,!1);const G=$a();let c=Va(ja({})),i;Ha(()=>{i={}}),Ha(()=>{console.log(`FORM_DEBUG => ${e.schema.name}`,"DATA",a(c),"ORIGINAL_DATA",s(),"SCHEMA",e.schema)});const g=f=>s()[f]||"",C=f=>t=>{U(f)(t.target.value)},ta=f=>t=>{U(f)(Number(t.target.value))},ea=f=>t=>{U(f)(!!t.target.checked)},U=f=>t=>{ha(c,ja({...a(c),[f]:t})),d(!0),G("modified",a(c))},w=f=>{const t="fixme";return ha(c,ja({...a(c),[f]:t})),t};var T=St(),L=v(T),D=v(L),Z=v(D,!0);n(D);var j=I(D,2),Oa=v(j,!0);n(j);var Ea=I(j,2);pa(Ea,17,()=>e.schema.fields,fa,(f,t,l)=>{var Pa=Tt(),Sa=v(Pa);k(Sa,"for",`field-${l}`);var Ra=v(Sa,!0);n(Sa);var Ya=I(Sa,2);{var qa=va=>{var ya=ut(),V=O(ya);aa(V),k(V,"id",`field-${l??""}`),k(V,"list",`field-${l??""}-datalist`);var Xa=x(()=>C(a(t).key_name));V.__change=function(...B){var m;(m=a(Xa))==null||m.apply(this,B)};var ba=I(V,2);k(ba,"id",`field-${l??""}-datalist`),pa(ba,21,()=>a(t).options||[],fa,(B,m)=>{var H=ct(),Q={},la=v(H,!0);n(H),h(()=>{Q!==(Q=a(m))&&(H.value=(H.__value=a(m))==null?"":a(m)),J(la,a(m))}),r(B,H)}),n(ba),h(B=>{$(V,B),V.disabled=a(t).disabled},[()=>g(a(t).key_name)]),r(va,ya)},za=va=>{var ya=z(),V=O(ya);{var Xa=B=>{var m=dt();aa(m),k(m,"id",`field-${l??""}`),k(m,"list",`field-${l??""}-datalist`);var H=x(()=>C(a(t).key_name));m.__change=function(...Q){var la;(la=a(H))==null||la.apply(this,Q)},h(Q=>{$(m,Q),m.disabled=a(t).disabled},[()=>g(a(t).key_name)]),r(B,m)},ba=B=>{var m=z(),H=O(m);{var Q=ia=>{var _a=gt(),Aa=v(_a);{var Ma=F=>{var u=pt(),y=O(u);aa(y),k(y,"id",`field-${l??""}`),k(y,"list",`field-${l??""}-datalist`);var oa=x(()=>C(a(t).key_name));y.__change=function(...b){var _;(_=a(oa))==null||_.apply(this,b)};var S=I(y,2);k(S,"id",`field-${l??""}-datalist`),pa(S,21,()=>a(t).options||[],fa,(b,_)=>{var p=mt(),W={},sa=v(p,!0);n(p),h(()=>{W!==(W=a(_))&&(p.value=(p.__value=a(_))==null?"":a(_)),J(sa,a(_))}),r(b,p)}),n(S),h(b=>{$(y,b),y.disabled=a(t).disabled},[()=>g(a(t).key_name)]),r(F,u)},Da=F=>{var u=ht();k(u,"id",`field-${l??""}`),Qa(u,()=>$0);var y,oa=x(()=>C(a(t).key_name));u.__change=function(...S){var b;(b=a(oa))==null||b.apply(this,S)},pa(u,21,()=>a(t).options||[],fa,(S,b)=>{var _=ft(),p={},W=v(_,!0);n(_),h(()=>{p!==(p=a(b))&&(_.value=(_.__value=a(b))==null?"":a(b)),J(W,a(b))}),r(S,_)}),n(u),h(S=>{y!==(y=S)&&(u.value=(u.__value=S)==null?"":S,Wa(u,S))},[()=>g(a(t).key_name)]),r(F,u)};A(Aa,F=>{i[l]?F(Ma):F(Da,!1)})}var R=I(Aa,2),E=v(R);E.__click=()=>{i[l]=!i[l],i=i};var ka=v(E);const na=x(()=>i[l]?"lock-open":"lock-closed");Ia(ka,{get name(){return a(na)},className:"w-6 h-6"}),n(E),n(R),n(_a),r(ia,_a)},la=ia=>{var _a=z(),Aa=O(_a);{var Ma=R=>{var E=yt();aa(E),k(E,"id",`field-${l??""}`),k(E,"list",`field-${l??""}-datalist`);var ka=x(()=>C(a(t).key_name));E.__change=function(...na){var F;(F=a(ka))==null||F.apply(this,na)},h(na=>{$(E,na),E.disabled=a(t).disabled},[()=>g(a(t).key_name)||(a(t).slug_gen?a(t).slug_gen():w(a(t).key_name))]),r(R,E)},Da=R=>{var E=z(),ka=O(E);{var na=u=>{const y=x(()=>U(a(t).key_name)),oa=x(()=>g(a(t).key_name));vt(u,{get onChange(){return a(y)},get value(){return a(oa)}})},F=u=>{var y=z(),oa=O(y);{var S=_=>{var p=bt();Za(p),k(p,"id",`field-${l}`);var W=x(()=>C(a(t).key_name));p.__change=function(...sa){var Na;(Na=a(W))==null||Na.apply(this,sa)},h(sa=>{$(p,sa),p.disabled=a(t).disabled},[()=>g(a(t).key_name)]),r(_,p)},b=_=>{var p=z(),W=O(p);{var sa=ca=>{var Y=kt();aa(Y),k(Y,"id",`field-${l}`);var Fa=x(()=>ta(a(t).key_name));Y.__change=function(...xa){var Ca;(Ca=a(Fa))==null||Ca.apply(this,xa)},h(xa=>{$(Y,xa),Y.disabled=a(t).disabled},[()=>g(a(t).key_name)]),r(ca,Y)},Na=ca=>{var Y=z(),Fa=O(Y);{var xa=ua=>{var da=xt(),ma=v(da);aa(ma),k(ma,"id",`field-${l}`);var Ga=x(()=>ea(a(t).key_name));ma.__change=function(...wa){var q;(q=a(Ga))==null||q.apply(this,wa)},n(da),h(wa=>$(ma,wa),[()=>g(a(t).key_name)||!1]),r(ua,da)},Ca=ua=>{var da=z(),ma=O(da);{var Ga=q=>{const Ua=x(()=>s()[a(t).key_name]||{});at(q,{get data(){return a(Ua)},onChange:Ja=>{U(a(t).key_name)(JSON.stringify(Ja))}})},wa=q=>{var Ua=wt();r(q,Ua)};A(ma,q=>{a(t).ftype==="KEY_VALUE_TEXT"?q(Ga):q(wa,!1)},!0)}r(ua,da)};A(Fa,ua=>{a(t).ftype==="BOOL"?ua(xa):ua(Ca,!1)},!0)}r(ca,Y)};A(W,ca=>{a(t).ftype==="INT"?ca(sa):ca(Na,!1)},!0)}r(_,p)};A(oa,_=>{a(t).ftype==="LONG_TEXT"||a(t).ftype==="TEXT_POLICY"?_(S):_(b,!1)},!0)}r(u,y)};A(ka,u=>{a(t).ftype==="MULTI_TEXT"?u(na):u(F,!1)},!0)}r(R,E)};A(Aa,R=>{a(t).ftype==="TEXT_SLUG"?R(Ma):R(Da,!1)},!0)}r(ia,_a)};A(H,ia=>{a(t).ftype==="SELECT"?ia(Q):ia(la,!1)},!0)}r(B,m)};A(V,B=>{a(t).ftype==="EMAIL"?B(Xa):B(ba,!1)},!0)}r(va,ya)};A(Ya,va=>{a(t).ftype==="TEXT"?va(qa):va(za,!1)})}n(Pa),h(()=>J(Ra,a(t).name)),r(f,Pa)});var ga=I(Ea,2);{var ra=f=>{var t=Et(),l=v(t);_t(l,{name:"Save",onClick:()=>{X()&&X()(a(c))}}),n(t),r(f,t)};A(ga,f=>{d()&&!M()&&f(ra)})}n(L),n(T),h(()=>{J(Z,e.schema.name),J(Oa,P()||"")}),r(N,T),Ba()}Ta(["change","click"]);var At=o('<h4 class="h4 capitalize"> </h4>'),Nt=(N,e)=>{a(e).actionFn()},Ct=o('<button class="btn btn-sm variant-filled-primary text-secondary-50"><!> </button>'),It=o('<div slot="trail"><!></div>'),Lt=o('<!> <div class="p-2"><!></div>',1);function ae(N,e){var s=Lt(),d=O(s);rt(d,{$$slots:{lead:(M,G)=>{var c=At(),i=v(c,!0);n(c),h(()=>J(i,e.title)),r(M,c)},trail:(M,G)=>{var c=It(),i=v(c);{var g=C=>{var ta=z(),ea=O(ta);pa(ea,17,()=>e.actions,fa,(U,w)=>{var T=Ct();T.__click=[Nt,w];var L=v(T);{var D=j=>{Ia(j,{get name(){return a(w).icon},className:"h-4 w-4"})};A(L,j=>{a(w).icon&&j(D)})}var Z=I(L);n(T),h(()=>J(Z,` ${a(w).name??""}`)),r(U,T)}),r(C,ta)};A(i,C=>{e.actions&&C(g)})}n(c),r(M,c)}}});var P=I(d,2),X=v(P);et(X,()=>e.children??Ka),n(P),r(N,s)}Ta(["click"]);var Bt=(N,e)=>{e.handler&&e.handler()},Ot=o('<div class="fixed bottom-5 right-5"><button class="btn-icon variant-filled bg-primary-hover-token"><svg viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path fill-rule="evenodd" d="M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z" clip-rule="evenodd"></path></svg></button></div>');function te(N,e){La(e,!0);var s=Ot(),d=v(s);d.__click=[Bt,e],n(s),r(N,s),Ba()}Ta(["click"]);export{$t as A,te as F,ae as P};
