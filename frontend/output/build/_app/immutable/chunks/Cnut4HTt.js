import{a as v,n as V,c as nt,t as M,b as it}from"./uYeY98Ep.js";import{t as f,p as st,i as k,f as ct,d as a,a as dt,h as P,g as Dt,u as Nt,c as m,s as p,r as h}from"./CRNwc6nF.js";import{s as I}from"./CdHdDXtF.js";import{i as w}from"./DPugg-eY.js";import{e as ot,i as rt}from"./Bbg2O9W9.js";import{s as g,r as qt,d as Et}from"./Bo8IgBjd.js";import{s as Tt}from"./XLtYruJy.js";import{d as jt}from"./CHLatDmB.js";import{p as A}from"./Ycl9y-hy.js";import{p as s}from"./B33JRQ5o.js";import{c as Rt}from"./BV-QqiEb.js";import"./DSROIJzG.js";import"./g85Fs1Im.js";import{L as Ut}from"./DDEYG0vs.js";import{c as Gt}from"./wRW8cPNe.js";import{S as X}from"./CTtbmK_c.js";import{g as lt}from"./lZe3btPj.js";import{g as Kt}from"./Cd_4edPv.js";import"./dt-uJVo0.js";import"./BmWNUg7v.js";var Ot=V('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="text-purple-500 inline-block bi bi-image" viewBox="0 0 16 16"><path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"></path><path d="M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1h12z"></path></svg>');function Xt(o,t){let e=s(t,"width",3,"16"),c=s(t,"height",3,"16");var l=Ot();f(()=>{g(l,"width",e()),g(l,"height",c())}),v(o,l)}var Yt=V('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="text-yellow-600 inline-block bi bi-music-note-beamed" viewBox="0 0 16 16"><path d="M6 13c0 1.105-1.12 2-2.5 2S1 14.105 1 13c0-1.104 1.12-2 2.5-2s2.5.896 2.5 2zm9-2c0 1.105-1.12 2-2.5 2s-2.5-.895-2.5-2 1.12-2 2.5-2 2.5.895 2.5 2z"></path><path fill-rule="evenodd" d="M14 11V2h1v9h-1zM6 3v10H5V3h1z"></path><path d="M5 2.905a1 1 0 0 1 .9-.995l8-.8a1 1 0 0 1 1.1.995V3L5 4V2.905z"></path></svg>');function Zt(o,t){let e=s(t,"width",3,"16"),c=s(t,"height",3,"16");var l=Yt();f(()=>{g(l,"width",e()),g(l,"height",c())}),v(o,l)}var Jt=V('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="text-indigo-500 inline-block ltr:mr-1 rtl:ml-1 bi bi-file-earmark" viewBox="0 0 16 16"><path d="M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5h-2z"></path></svg>');function Qt(o,t){let e=s(t,"width",3,"16"),c=s(t,"height",3,"16");var l=Jt();f(()=>{g(l,"width",e()),g(l,"height",c())}),v(o,l)}var Wt=V('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="text-red-500 inline-block bi bi-play-btn-fill" viewBox="0 0 16 16"><path d="M0 12V4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm6.79-6.907A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"></path></svg>');function $t(o,t){let e=s(t,"width",3,"16"),c=s(t,"height",3,"16");var l=Wt();f(()=>{g(l,"width",e()),g(l,"height",c())}),v(o,l)}var te=V('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="inline-block bi bi-file-zip" viewBox="0 0 16 16"><path d="M6.5 7.5a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v.938l.4 1.599a1 1 0 0 1-.416 1.074l-.93.62a1 1 0 0 1-1.109 0l-.93-.62a1 1 0 0 1-.415-1.074l.4-1.599V7.5zm2 0h-1v.938a1 1 0 0 1-.03.243l-.4 1.598.93.62.93-.62-.4-1.598a1 1 0 0 1-.03-.243V7.5z"></path><path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2zm5.5-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H9v1H8v1h1v1H8v1h1v1H7.5V5h-1V4h1V3h-1V2h1V1z"></path></svg>');function ee(o,t){let e=s(t,"width",3,"16"),c=s(t,"height",3,"16");var l=te();f(()=>{g(l,"width",e()),g(l,"height",c())}),v(o,l)}function ae(o,t){st(t,!0);let e=s(t,"name",3,"");const c={image:Xt,video:$t,music:Zt,zip:ee,other:Qt},l={mp4:"video",jpg:"image",png:"image",webp:"image",mp3:"music",zip:"zip"};let y=P("other");e().includes(".")&&k(y,A(l[e().split(".").pop()]||"other"));var x=nt(),B=ct(x);Gt(B,()=>c[a(y)],(D,N)=>{N(D,{get height(){return t.size},get width(){return t.size}})}),v(o,x),dt()}var ie=V('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="inline-block bi bi-folder-fill" viewBox="0 0 16 16"><path d="M9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.825a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3zm-8.322.12C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139z"></path></svg>');function oe(o,t){let e=s(t,"size",3,"16");var c=ie();f(()=>{g(c,"width",e()),g(c,"height",e())}),v(o,c)}var re=(o,t,e)=>t("open_item",a(e)),le=(o,t,e)=>t("select_item",a(e)),ne=(o,t,e)=>{t(t()===a(e).name?"":a(e).name)},se=M('<input type="checkbox">'),ce=(o,t,e)=>{console.log("@clicked1",t()),t()(a(e)),console.log("@clicked2",t()),o.preventDefault()},de=(o,t,e)=>t(a(e)),ve=M('<button class="btn btn-sm variant-filled"><!></button>'),he=(o,t,e)=>t(o,a(e)),me=(o,t,e,c)=>{o.stopPropagation(),t("action",{action:a(e),row:a(c)})},ge=M('<button class="flex gap-1 justify-start items-center p-1 rounded-lg hover:bg-white hover:text-secondary-600"><!> <p> </p></button>'),fe=M('<div class="fixed z-10 shadow-lg w-28 h-max p-1 border border-zinc-200 rounded-lg flex flex-col gap-2 variant-filled"></div>'),pe=M('<tr><td class="w-1"><!></td><td><button class="mr-1 text-indigo-500" type="button"><!> </button></td><td><!></td><td><!></td><td><!> <button class="btn btn-sm variant-filled-secondary relative group transition-all duration-200 focus:overflow-visible overflow-hidden"><!></button> <!></td></tr>'),_e=M('<div class="table-container"><table class="table table-hover overflow-auto"><thead><tr><td></td><th>Name</th><th>Created At</th><th>Size</th><th>Action</th></tr></thead><tbody><!></tbody></table></div>');function qe(o,t){st(t,!0);const e=r=>{console.log("@exp"),r.is_folder?lt(`${y()}?folder=${x()?x()+"/"+r.name:r.name}`):lt(`${y()}/preview?folder=${x()}&fid=${r.id}&filename=${r.name}`)};let c=s(t,"files",19,()=>[]),l=s(t,"loading",3,!1),y=s(t,"baseUrl",3,"/z/pages/portal/self/files"),x=s(t,"path",3,""),B=s(t,"selected",15),D=s(t,"hidePreview",3,!1),N=s(t,"onExplore",3,e),vt=s(t,"pickMode",3,!1),ht=Dt("__api__");const q=Rt(),mt=Kt();let Y="32";const gt=[{name:"rename",icon:"pencil-square"},{name:"download",icon:"arrow-down-on-square"},{name:"delete",icon:"trash"}],ft=[{name:"rename",icon:"pencil-square"},{name:"delete",icon:"trash"}];let H=P(!1),C=P(0),E=P(A({top:0,left:0}));const Z=r=>{k(H,!1),k(C,0)};Nt(()=>(document.addEventListener("click",Z),()=>{document.removeEventListener("click",Z)}));const pt=r=>{const _=["Bytes","KB","MB","GB","TB"];if(r===0)return"0 Byte";const u=parseInt(String(Math.floor(Math.log(r)/Math.log(1024))));return u===0?`${r} ${_[u]}`:`${(r/1024**u).toFixed(1)} ${_[u]}`},_t=r=>{mt.trigger({type:"component",component:"file_preview_dialog",meta:{api:ht,fileId:r.id,filename:r.name}})},ut=(r,_)=>{r.stopPropagation();const L=r.currentTarget.getBoundingClientRect();k(E,A({top:L.bottom+window.scrollY,left:L.left+window.scrollX-5})),k(H,A(!a(H)||a(C)!==_.id)),k(C,A(a(H)?_.id:0))};var T=_e(),J=m(T),Q=p(m(J)),bt=m(Q);{var wt=r=>{Ut(r,{})},xt=r=>{var _=nt(),u=ct(_);ot(u,17,c,rt,(L,d)=>{var z=pe();z.__dblclick=[re,q,d],z.__click=[le,q,d];var j=m(z),zt=m(j);{var kt=i=>{var n=se();qt(n),n.__change=[ne,B,d],f(()=>Et(n,B()===a(d).name)),v(i,n)};w(zt,i=>{vt()&&i(kt)})}h(j);var R=p(j),U=m(R);U.__click=[ce,N,d];var W=m(U);{var Vt=i=>{oe(i,{size:Y})},Mt=i=>{ae(i,{size:Y,get name(){return a(d).name}})};w(W,i=>{a(d).is_folder?i(Vt):i(Mt,!1)})}var yt=p(W);h(U),h(R);var G=p(R),Bt=m(G);{var Ht=i=>{var n=it();f(b=>I(n,b),[()=>new Date(a(d).created_at).toLocaleString()]),v(i,n)};w(Bt,i=>{a(d).created_at&&i(Ht)})}h(G);var K=p(G),At=m(K);{var Ct=i=>{var n=it();f(b=>I(n,b),[()=>pt(a(d).size)]),v(i,n)};w(At,i=>{a(d).size&&i(Ct)})}h(K);var $=p(K),tt=m($);{var Lt=i=>{var n=ve();n.__click=[de,_t,d];var b=m(n);X(b,{name:"eye",className:"w-4 h-4"}),h(n),v(i,n)};w(tt,i=>{!a(d).is_folder&&!D()&&i(Lt)})}var F=p(tt,2);F.__click=[he,ut,d];var Ft=m(F);X(Ft,{name:"bars-3",className:"w-4 h-4"}),h(F);var St=p(F,2);{var It=i=>{var n=fe();ot(n,21,()=>a(d).is_folder?ft:gt,rt,(b,O)=>{var S=ge();S.__click=[me,q,O,d];var et=m(S);X(et,{get name(){return a(O).icon},className:"w-4 h-4"});var at=p(et,2),Pt=m(at,!0);h(at),h(S),f(()=>I(Pt,a(O).name)),v(b,S)}),h(n),f(()=>g(n,"style",`top: ${a(E).top??""}px; left: ${a(E).left??""}px;`)),v(i,n)};w(St,i=>{a(H)&&a(C)===a(d).id&&i(It)})}h($),h(z),f(()=>{Tt(z,`cursor-pointer hover:bg-gray-700 ${(B()===a(d).name?"variant-outline-primary":"")??""}`),I(yt,` ${a(d).name??""}`)}),v(L,z)}),v(r,_)};w(bt,r=>{l()?r(wt):r(xt,!1)})}h(Q),h(J),h(T),v(o,T),dt()}jt(["dblclick","click","change"]);export{qe as F};
