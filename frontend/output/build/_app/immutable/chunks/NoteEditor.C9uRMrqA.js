import{a as q,t as J}from"./disclose-version.BOfWGsg9.js";import{p as W,g as z,i as S,t as D,a as X,h as u,b as t,s as r,c as s,r as e,d as Y}from"./runtime.CmPLUjJJ.js";import{s as Z}from"./render.CZQ66Y_F.js";import{e as $,i as aa}from"./each.BJPUi07-.js";import{r as ta,s as ea}from"./attributes.yGGqmlPO.js";import{d as sa}from"./events.DnYA5zBv.js";import{r as ra}from"./misc.CveY8KIp.js";import{b as G}from"./input.BRsTNa69.js";import{p as c}from"./proxy.DKs42Gzo.js";import{s as oa,a as la}from"./store.BN9B0iWR.js";import{S as H}from"./SvgIcon.Cn9REWmg.js";import{F as ia}from"./FilePicker.D0e64Dn9.js";import{p as na}from"./stores.BgpLsI8J.js";var ca=(d,a,o)=>{u(a,c(t(a).replace(t(o),"")))},da=J('<div class="flex-shrink-0 p-1 rounded bg-white relative"><button class="btn btn-sm absolute top-0 right-0"><!></button> <img alt="" class="w-full max-w-32 h-auto"></div>'),pa=(d,a,o,p,l)=>{a.show(ia,{pid:o,onPick:async b=>{a.close();const n=await p.sharedFile(b.id);n.status===200&&u(l,c(t(l)===""?n.data:t(l)+","+n.data))}})},va=(d,a,o,p,l)=>{a.onSave({title:t(o),notes:t(p),attachments:t(l)})},ma=J('<div class="card"><header class="card-header"><h4 class="h4"> </h4></header> <section class="p-4 flex flex-col gap-4"><label class="label"><span>Title</span> <input class="input p-1" type="text" placeholder="Input"></label> <label class="label"><span>Notes</span> <textarea class="textarea p-1" rows="4" placeholder="Notes description"></textarea></label> <div><span>Files</span> <div class="mx-auto cursor-pointer flex w-full max-w-lg flex-col items-center justify-center p-2 text-center"><div class="flex items-center gap-2"></div></div> <button class="btn btn-sm variant-filled-secondary"><!></button></div></section> <footer class="card-footer flex justify-end"><button type="button" class="btn variant-filled">save</button></footer></div>');function ja(d,a){var L,R,T;W(a,!0);const o=oa(),l=la(na,"$page",o).params.pid,b=z("__vs_modal__"),n=z("__api__");let v=S(c(((L=a.data)==null?void 0:L.title)||"")),m=S(c(((R=a.data)==null?void 0:R.notes)||"")),_=S(c(((T=a.data)==null?void 0:T.attachments)||"")),K=Y(()=>t(_).split(",").filter(Boolean).map(i=>n.getSharedFileURL(i)));var h=ma(),x=s(h),j=s(x),M=s(j);e(j),e(x);var g=r(x,2),k=s(g),A=r(s(k),2);ta(A),e(k);var w=r(k,2),E=r(s(w),2);ra(E),e(w);var I=r(w,2),N=r(s(I),2),P=s(N);$(P,21,()=>t(K),aa,(i,U)=>{var F=da(),f=s(F);f.__click=[ca,_,U];var Q=s(f);H(Q,{name:"x-mark",className:"w-4 h-4"}),e(f);var V=r(f,2);e(F),D(()=>ea(V,"src",t(U))),q(i,F)}),e(P),e(N);var y=r(N,2);y.__click=[pa,b,l,n,_];var O=s(y);H(O,{name:"plus",className:"w-6 h-6"}),e(y),e(I),e(g);var B=r(g,2),C=s(B);C.__click=[va,a,v,m,_],e(B),e(h),D(()=>{Z(M,a.data?"Edit Note":"Add Note"),C.disabled=!t(v)||!t(m)}),G(A,()=>t(v),i=>u(v,i)),G(E,()=>t(m),i=>u(m,i)),q(d,h),X()}sa(["click"]);export{ja as N};
