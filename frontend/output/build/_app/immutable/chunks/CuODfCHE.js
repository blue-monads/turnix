import{a as E,t as B}from"./Celh2SBM.js";import{p as ta,g as J,i as I,t as K,a as ea,h as b,d as a,s as r,c as s,r as e,e as sa}from"./BC9Cf8Q3.js";import{s as ra}from"./BTw4jHF_.js";import{i as oa}from"./BgSg1_cg.js";import{e as la,i as ia}from"./BqP2cxbq.js";import{r as na,s as ca}from"./DMueVNEq.js";import{d as da,r as pa}from"./x8LL7je8.js";import{b as M}from"./Dy57PNli.js";import{p}from"./CKwprqj2.js";import{s as va,a as ma}from"./BvXhjoeW.js";import{S as P}from"./CdW99GA5.js";import{F as _a}from"./BL86hxur.js";import{p as fa}from"./C1rFHlC-.js";var ua=async(v,t,i,o)=>{console.log("@delete_file",a(t));try{await i.deleteShareFile(a(t))}catch(l){console.error(l)}b(o,p(a(o).replace(a(t),"")))},ba=B('<img alt="" class="w-full max-w-32 h-auto">'),ha=B('<div class="p-1 rounded bg-white relative min-w-20 min-h-20 self-start"><button class="btn btn-sm absolute top-0 right-0"><!></button> <!></div>'),ga=(v,t,i,o,l)=>{t.show(_a,{pid:i,onPick:async h=>{t.close();const c=await o.sharedFile(h.id);c.status===200&&b(l,p(a(l)===""?c.data:a(l)+","+c.data))}})},xa=(v,t,i,o,l)=>{t.onSave({title:a(i),notes:a(o),attachments:a(l)})},wa=B('<div class="card"><header class="card-header"><h4 class="h4"> </h4></header> <section class="p-4 flex flex-col gap-4"><label class="label"><span>Title</span> <input class="input p-1" type="text" placeholder="Input"></label> <label class="label"><span>Notes</span> <textarea class="textarea p-1" rows="4" placeholder="Notes description"></textarea></label> <div class="flex flex-col gap-2"><span>Files</span> <div class="flex justify-items-start flex-wrap gap-2 p-2"></div> <button class="btn btn-sm variant-filled-secondary w-10"><!></button></div></section> <footer class="card-footer flex justify-end"><button type="button" class="btn variant-filled">save</button></footer></div>');function Ra(v,t){var z,D,G;ta(t,!0);const[i,o]=va(),h=ma(fa,"$page",i).params.pid,c=J("__vs_modal__"),g=J("__api__");let m=I(p(((z=t.data)==null?void 0:z.title)||"")),_=I(p(((D=t.data)==null?void 0:D.notes)||"")),f=I(p(((G=t.data)==null?void 0:G.attachments)||"")),O=sa(()=>a(f).split(",").filter(Boolean));const Q=["jpg","jpeg","png","gif","webp","svg"];var x=wa(),w=s(x),C=s(w),V=s(C,!0);e(C),e(w);var k=r(w,2),y=s(k),L=r(s(y),2);na(L),e(y);var N=r(y,2),R=r(s(N),2);pa(R),e(N);var T=r(N,2),F=r(s(T),2);la(F,21,()=>a(O),ia,(d,j)=>{var A=ha(),u=s(A);u.__click=[ua,j,g,f];var X=s(u);P(X,{name:"x-mark",className:"w-4 h-4"}),e(u);var Y=r(u,2);{var Z=n=>{var H=ba();K(aa=>ca(H,"src",aa),[()=>g.getSharedFileURL(a(j))]),E(n,H)},$=n=>{P(n,{name:"document",className:"w-16 h-16 text-gray-600"})};oa(Y,n=>{Q.includes(a(j).split(".").at(-1))?n(Z):n($,!1)})}e(A),E(d,A)}),e(F);var S=r(F,2);S.__click=[ga,c,h,g,f];var W=s(S);P(W,{name:"plus",className:"w-6 h-6"}),e(S),e(T),e(k);var U=r(k,2),q=s(U);q.__click=[xa,t,m,_,f],e(U),e(x),K(()=>{ra(V,t.data?"Edit Note":"Add Note"),q.disabled=!a(m)||!a(_)}),M(L,()=>a(m),d=>b(m,d)),M(R,()=>a(_),d=>b(_,d)),E(v,x),ea(),o()}da(["click"]);export{Ra as N};
