import{a as _,t as p}from"./uYeY98Ep.js";import{p as rt,c as r,s as o,f as et,r as t,d as l,b as at,t as f,a as ot}from"./CRNwc6nF.js";import{s as v}from"./CdHdDXtF.js";import{i as q}from"./DPugg-eY.js";import{e as B,i as F}from"./Bbg2O9W9.js";import{s as lt}from"./Bo8IgBjd.js";import{d as dt}from"./CHLatDmB.js";import{p as st}from"./B33JRQ5o.js";import{c as ct}from"./BV-QqiEb.js";import{f as G}from"./8TB5Umy4.js";import{S as H}from"./CTtbmK_c.js";var it=p('<span class="chip variant-ghost"> </span>'),nt=p('<span class="chip variant-ghost"> </span>'),vt=p('<tr><td role="gridcell"></td><td role="gridcell"></td><td role="gridcell"></td><td role="gridcell"><span class="chip variant-filled"> </span></td><td role="gridcell"><!></td><td role="gridcell"><!></td><td role="gridcell"></td><td role="gridcell"></td></tr>'),mt=p('<tr><td role="gridcell"> </td><td role="gridcell"> </td><td role="gridcell"> </td><td role="gridcell"></td><td role="gridcell"></td><td role="gridcell"></td><td role="gridcell"></td><td role="gridcell"><a class="underline">edit</a></td></tr> <!>',1),ht=(i,e)=>{console.log("@prev"),e("prev_page")},_t=(i,e)=>{console.log("@next"),e("next_page")},pt=p('<div class="card m-2 overflow-x-auto"><table class="table p-0 table-compact"><thead class="table-head"><tr><th role="columnheader">#</th><th role="columnheader">Title</th><th role="columnheader">Notes</th><th role="columnheader">Account</th><th role="columnheader">Debit</th><th role="columnheader">Credit</th><th role="columnheader">Attachments</th><th role="columnheader">Actions</th></tr></thead><tbody class="table-body p-0 overflow-y-scroll w-full max-h-screen"></tbody></table> <div class="flex justify-end gap-2 p-1"><div class="flex gap-2"><button class="btn btn-sm bg-gray-100"><!></button> <button class="btn btn-sm bg-gray-100"><!></button></div></div></div>');function Nt(i,e){rt(e,!0);const n=ct();let u=st(e,"lineData",19,()=>[]);console.log("@lines",u());var a=pt(),d=r(a),j=o(r(d));B(j,21,u,F,(L,m)=>{var S=mt(),x=et(S),y=r(x),O=r(y,!0);t(y);var k=o(y),P=r(k,!0);t(k);var w=o(k),Q=r(w,!0);t(w);var z=o(w,5),U=r(z);t(z),t(x);var V=o(x,2);B(V,17,()=>l(m).lines,F,(W,h)=>{var D=vt(),A=o(r(D),3),M=r(A),X=r(M,!0);t(M),t(A);var I=o(A),Y=r(I);{var Z=s=>{var c=it(),N=r(c,!0);t(c),f(T=>v(N,T),[()=>G(l(h).credit_amount)]),_(s,c)};q(Y,s=>{l(h).credit_amount&&s(Z)})}t(I);var R=o(I),$=r(R);{var tt=s=>{var c=nt(),N=r(c,!0);t(c),f(T=>v(N,T),[()=>G(l(h).debit_amount)]),_(s,c)};q($,s=>{l(h).debit_amount&&s(tt)})}t(R),at(2),t(D),f(()=>v(X,e.accountsIndex[l(h).account_id]||"")),_(W,D)}),f(()=>{v(O,l(m).txn.id),v(P,l(m).txn.title),v(Q,l(m).txn.notes),lt(U,"href",`/z/pages/portal/projects/books/${e.pid}/txn/edit?tid=${l(m).txn.id}`)}),_(L,S)}),t(j),t(d);var C=o(d,2),E=r(C),g=r(E);g.__click=[ht,n];var J=r(g);H(J,{className:"h-4 w-4",name:"chevron-left"}),t(g);var b=o(g,2);b.__click=[_t,n];var K=r(b);H(K,{className:"h-4 w-4",name:"chevron-right"}),t(b),t(E),t(C),t(a),_(i,a),ot()}dt(["click"]);const Tt=i=>{let e={},n=0;i.lines.forEach(a=>{let d=e[a.txn_id];d||(d=[],e[a.txn_id]=d),d.push(a)});const u=i.transactions.map(a=>(n=Math.max(n,a.id),{lines:e[a.id]||[],txn:a}));return{maxId:n,txns:u}};export{Nt as T,Tt as f};
